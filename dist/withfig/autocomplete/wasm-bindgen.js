var U=Object.create;var N=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var j=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ee(t))!ne.call(e,r)&&r!==n&&N(e,r,{get:()=>t[r],enumerable:!(i=Y(t,r))||i.enumerable});return e};var re=(e,t,n)=>(n=e!=null?U(te(e)):{},ie(t||!e||!e.__esModule?N(n,"default",{value:e,enumerable:!0}):n,e));var q=j(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.shellExpand=T.ensureTrailingSlash=void 0;var oe=e=>e.endsWith("/")?e:`${e}/`;T.ensureTrailingSlash=oe;var se=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,ae=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,r=>{var o;let a=r.slice(1);return(o=t[a])!==null&&o!==void 0?o:r}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(r,o,a)=>{var u,c;return(c=(u=t[o])!==null&&u!==void 0?u:a)!==null&&c!==void 0?c:r}),le=(e,t)=>{var n;let{environmentVariables:i}=t;return ae(se(e,(n=i?.HOME)!==null&&n!==void 0?n:"~"),i)};T.shellExpand=le});var P=j(y=>{"use strict";var ue=y&&y.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(s){try{l(i.next(s))}catch(d){a(d)}}function c(s){try{l(i.throw(s))}catch(d){a(d)}}function l(s){s.done?o(s.value):r(s.value).then(u,c)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.filepaths=y.folders=y.getCurrentInsertedDirectory=y.sortFilesAlphabetically=void 0;var E=q();function R(e,t=[]){let n=t.map(r=>r.toLowerCase()),i=e.filter(r=>!n.includes(r.toLowerCase()));return[...i.filter(r=>!r.startsWith(".")).sort((r,o)=>r.localeCompare(o)),...i.filter(r=>r.startsWith(".")).sort((r,o)=>r.localeCompare(o)),"../"]}y.sortFilesAlphabetically=R;var ce=(e,t,n)=>{if(e===null)return"/";let i=(0,E.shellExpand)(t,n),r=i.slice(0,i.lastIndexOf("/")+1);return r===""?(0,E.ensureTrailingSlash)(e):r.startsWith("/")?r:`${(0,E.ensureTrailingSlash)(e)}${r}`};y.getCurrentInsertedDirectory=ce;function F(e={}){let{extensions:t=[],equals:n=[],matches:i,filterFolders:r=!1,editFileSuggestions:o,editFolderSuggestions:a,rootDirectory:u,showFolders:c="always"}=e,l=new Set(t),s=new Set(n),d=()=>t.length>0||n.length>0||i,h=(p=[])=>d()?p.filter(({name:g="",type:_})=>{if(!r&&_==="folder"||s.has(g)||i&&g.match(i))return!0;let[,...f]=g.split(".");if(f.length>=1){let b=f.length-1,w=f[b];do{if(l.has(w))return!0;b-=1,w=[f[b],w].join(".")}while(b>=0)}return!1}):p,O=(p=[])=>!o&&!a?p:p.map(g=>Object.assign(Object.assign({},g),(g.type==="file"?o:a)||{}));return{trigger:(p,g)=>{let _=p.lastIndexOf("/"),f=g.lastIndexOf("/");return _!==f?!0:_===-1&&f===-1?!1:p.slice(0,_)!==g.slice(0,f)},getQueryTerm:p=>p.slice(p.lastIndexOf("/")+1),custom:(p,g,_)=>ue(this,void 0,void 0,function*(){var f;let{isDangerous:b,currentWorkingDirectory:w,searchTerm:m}=_,S=(f=(0,y.getCurrentInsertedDirectory)(u??w,m,_))!==null&&f!==void 0?f:"/";try{let k=yield g({command:"ls",args:["-1ApL"],cwd:S}),Z=R(k.stdout.split(`
`),[".DS_Store"]),J=[];for(let D of Z)if(D){let V=D.endsWith("/")?"folders":"filepaths";(V==="filepaths"&&c!=="only"||V==="folders"&&c!=="never")&&J.push({type:V==="filepaths"?"file":"folder",name:D,insertValue:D,isDangerous:b,context:{templateType:V}})}return O(h(J))}catch{return[]}})}}y.folders=Object.assign(()=>F({showFolders:"only"}),Object.freeze(F({showFolders:"only"})));y.filepaths=Object.assign(F,Object.freeze(F()))});var H=j(x=>{"use strict";var A=x&&x.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(s){try{l(i.next(s))}catch(d){a(d)}}function c(s){try{l(i.throw(s))}catch(d){a(d)}}function l(s){s.done?o(s.value):r(s.value).then(u,c)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.keyValueList=x.keyValue=x.valueList=void 0;var K=new Map;function W(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function $(e,t,n){return A(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...n);return W(t,i)}if(typeof e[0]=="string"){let i=e.map(r=>({name:r}));return W(t,i)}return W(t,e)})}function C(e,t,n,i){return A(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let r=K.get(e);return r===void 0&&(r=yield $(e,t,i),K.set(e,r)),r}return $(e,t,i)})}function z(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function L(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function M(e,t){let n=new Set(e);return t.filter(i=>{var r;return typeof i.name=="string"?!n.has(i.name):!(!((r=i.name)===null||r===void 0)&&r.some(o=>n.has(o)))})}function de({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:i=!1,allowRepeatedValues:r=!1}){return{trigger:(o,a)=>o.lastIndexOf(e)!==a.lastIndexOf(e),getQueryTerm:o=>o.slice(o.lastIndexOf(e)+e.length),custom:(...o)=>A(this,void 0,void 0,function*(){var a;let u=yield C(t,i?e:"",n,o);if(r)return u;let[c]=o,l=(a=c[c.length-1])===null||a===void 0?void 0:a.split(e);return M(l,u)})}}x.valueList=de;function fe({separator:e="=",keys:t=[],values:n=[],cache:i=!1,insertSeparator:r=!0}){return{trigger:(o,a)=>o.indexOf(e)!==a.indexOf(e),getQueryTerm:o=>o.slice(o.indexOf(e)+1),custom:(...o)=>A(this,void 0,void 0,function*(){let[a]=o,c=!a[a.length-1].includes(e),l=c?t:n,s=z(c,i);return C(l,c&&r?e:"",s,o)})}}x.keyValue=fe;function pe({separator:e="=",delimiter:t=",",keys:n=[],values:i=[],cache:r=!1,insertSeparator:o=!0,insertDelimiter:a=!1,allowRepeatedKeys:u=!1,allowRepeatedValues:c=!0}){return{trigger:(l,s)=>{let d=L(l,e,t),h=L(s,e,t);return d!==h},getQueryTerm:l=>{let s=L(l,e,t);return l.slice(s+1)},custom:(...l)=>A(this,void 0,void 0,function*(){let[s]=l,d=s[s.length-1],h=L(d,e,t),O=h===-1||d.slice(h,h+e.length)!==e,p=O?n:i,g=z(O,r),f=yield C(p,O?o?e:"":a?t:"",g,l);if(O){if(u)return f;let w=d.split(t).map(m=>m.slice(0,m.indexOf(e)));return M(w,f)}if(c)return f;let b=d.split(t).map(w=>w.slice(w.indexOf(e)+e.length));return M(b,f)})}}x.keyValueList=pe});var Q=j(I=>{"use strict";var me=I&&I.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(s){try{l(i.next(s))}catch(d){a(d)}}function c(s){try{l(i.throw(s))}catch(d){a(d)}}function l(s){s.done?o(s.value):r(s.value).then(u,c)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.ai=void 0;var ge=4097,he=4,ye=.8,ve=ge*he*ye;function be({name:e,prompt:t,message:n,postProcess:i,temperature:r,splitOn:o}){return{scriptTimeout:15e3,custom:(a,u,c)=>me(this,void 0,void 0,function*(){var l,s;let d=yield u({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let h=typeof t=="function"?yield t({tokens:a,executeCommand:u,generatorContext:c}):t,O=typeof n=="function"?yield n({tokens:a,executeCommand:u,generatorContext:c}):n;if(O===null||O.length===0)return console.warn("No message provided to AI generator"),[];let p=ve-((l=h?.length)!==null&&l!==void 0?l:0),g={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...h?[{role:"system",content:h}]:[],{role:"user",content:O.slice(0,p)}],temperature:r},_=JSON.stringify(g),f=yield u({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",_]}),b=JSON.parse(f.stdout);return(s=b?.choices.map(m=>{var S;return(S=m?.message)===null||S===void 0?void 0:S.content}).filter(m=>typeof m=="string").flatMap(m=>o?m.split(o).filter(S=>S.trim().length>0):[m]).map(m=>{if(i)return i(m);let S=m.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:S,insertValue:`'${S}'`,description:"Generated by Fig AI"}}))!==null&&s!==void 0?s:[]})}}I.ai=be});var B=j(v=>{"use strict";var _e=v&&v.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),we=v&&v.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_e(t,e,n)};Object.defineProperty(v,"__esModule",{value:!0});v.ai=v.folders=v.filepaths=void 0;var G=P();Object.defineProperty(v,"filepaths",{enumerable:!0,get:function(){return G.filepaths}});Object.defineProperty(v,"folders",{enumerable:!0,get:function(){return G.folders}});we(H(),v);var Oe=Q();Object.defineProperty(v,"ai",{enumerable:!0,get:function(){return Oe.ai}})});var X=re(B(),1),Se={name:"wasm-bindgen",description:"Generate bindings between WebAssembly and JavaScript",options:[{name:["--help","-h"],description:"Show help for wasm-bindgen"},{name:["--version","-v"],description:"Show version for wasm-bindgen"},{name:"--out-dir",description:"Output directory",args:{name:"directory",description:"Target directory to emit JS bindings, TS definitions, .wasm binaries, etc",template:["folders"]}},{name:"--out-name",description:"Set a custom output filename (Without extension. Defaults to crate name)",args:{name:"filename",description:"Output filename",suggestCurrentToken:!0,template:["filepaths"]}},{name:"--target",description:"What type of output to generate",args:{name:"target",suggestions:[{name:"web",description:"Directly loadable in a web browser"},{name:"bundler",description:"Suitable for loading in bundlers like Webpack"},{name:"nodejs",description:"Loadable via require as a Node.js module"},{name:"no-modules",description:"Like web, but older and doesn't use ES modules"},{name:"deno",description:"Loadable using imports from Deno modules"}]}},{name:"--no-modules-global",description:"Name of global to assign generated bindings to",args:{name:"name"}},{name:"--browser",description:"Hint that JS should only be compatible with a browser"},{name:"--typescript",description:"Output a TypeScript definition file (on by default)"},{name:"--no-typescript",description:"Don't emit a *.d.ts file"},{name:"--omit-imports",description:"Don't emit imports in generated JavaScript"},{name:"--debug",description:"Include otherwise-extraneous debug checks in output"},{name:"--no-demangle",description:"Don't demangle Rust symbol names"},{name:"--keep-debug",description:"Keep debug sections in wasm files"},{name:"--remove-name-section",description:"Remove the debugging `name` section of the file"},{name:"--remove-producers-section",description:"Remove the telemetry `producers` section"},{name:"--omit-default-module-path",description:"Don't add WebAssembly fallback imports in generated JavaScript"},{name:"--encode-into",description:"Whether or not to use TextEncoder#encodeInto()",args:{name:"option",suggestions:[{name:"test"},{name:"always",description:"Always use TextEncoder#encodeInto()"},{name:"never",description:"Never use TextEncoder#encodeInto()"}]}},{name:"--nodejs",description:"Deprecated, use `--target nodejs`",deprecated:{insertValue:"--target nodejs"}},{name:"--web",description:"Deprecated, use `--target web`",deprecated:{insertValue:"--target web"}},{name:"--no-modules",description:"Deprecated, use `--target no-modules`",deprecated:{insertValue:"--target no-modules"}},{name:"--weak-refs",description:"Enable usage of the JS weak references proposal"},{name:"--reference-types",description:"Enable usage of WebAssembly reference types"}],args:{name:"input",description:"File name to output the compiled binary bindings",isScript:!0,generators:(0,X.filepaths)({extensions:["wasm"]})}},Ve=Se;export{Ve as default};
