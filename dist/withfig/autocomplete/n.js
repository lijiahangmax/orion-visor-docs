var ee=Object.create;var z=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var te=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var T=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var se=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of te(n))!re.call(e,r)&&r!==t&&z(e,r,{get:()=>n[r],enumerable:!(i=ne(n,r))||i.enumerable});return e};var oe=(e,n,t)=>(t=e!=null?ee(ie(e)):{},se(n||!e||!e.__esModule?z(t,"default",{value:e,enumerable:!0}):t,e));var J=T(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.shellExpand=j.ensureTrailingSlash=void 0;var ae=e=>e.endsWith("/")?e:`${e}/`;j.ensureTrailingSlash=ae;var ce=(e,n)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",n):e,le=(e,n)=>e.replace(/\$([A-Za-z0-9_]+)/g,r=>{var s;let a=r.slice(1);return(s=n[a])!==null&&s!==void 0?s:r}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(r,s,a)=>{var l,d;return(d=(l=n[s])!==null&&l!==void 0?l:a)!==null&&d!==void 0?d:r}),de=(e,n)=>{var t;let{environmentVariables:i}=n;return le(ce(e,(t=i?.HOME)!==null&&t!==void 0?t:"~"),i)};j.shellExpand=de});var $=T(v=>{"use strict";var ue=v&&v.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(o){try{c(i.next(o))}catch(u){a(u)}}function d(o){try{c(i.throw(o))}catch(u){a(u)}}function c(o){o.done?s(o.value):r(o.value).then(l,d)}c((i=i.apply(e,n||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.filepaths=v.folders=v.getCurrentInsertedDirectory=v.sortFilesAlphabetically=void 0;var L=J();function W(e,n=[]){let t=n.map(r=>r.toLowerCase()),i=e.filter(r=>!t.includes(r.toLowerCase()));return[...i.filter(r=>!r.startsWith(".")).sort((r,s)=>r.localeCompare(s)),...i.filter(r=>r.startsWith(".")).sort((r,s)=>r.localeCompare(s)),"../"]}v.sortFilesAlphabetically=W;var pe=(e,n,t)=>{if(e===null)return"/";let i=(0,L.shellExpand)(n,t),r=i.slice(0,i.lastIndexOf("/")+1);return r===""?(0,L.ensureTrailingSlash)(e):r.startsWith("/")?r:`${(0,L.ensureTrailingSlash)(e)}${r}`};v.getCurrentInsertedDirectory=pe;function V(e={}){let{extensions:n=[],equals:t=[],matches:i,filterFolders:r=!1,editFileSuggestions:s,editFolderSuggestions:a,rootDirectory:l,showFolders:d="always"}=e,c=new Set(n),o=new Set(t),u=()=>n.length>0||t.length>0||i,h=(m=[])=>u()?m.filter(({name:g="",type:w})=>{if(!r&&w==="folder"||o.has(g)||i&&g.match(i))return!0;let[,...p]=g.split(".");if(p.length>=1){let b=p.length-1,x=p[b];do{if(c.has(x))return!0;b-=1,x=[p[b],x].join(".")}while(b>=0)}return!1}):m,S=(m=[])=>!s&&!a?m:m.map(g=>Object.assign(Object.assign({},g),(g.type==="file"?s:a)||{}));return{trigger:(m,g)=>{let w=m.lastIndexOf("/"),p=g.lastIndexOf("/");return w!==p?!0:w===-1&&p===-1?!1:m.slice(0,w)!==g.slice(0,p)},getQueryTerm:m=>m.slice(m.lastIndexOf("/")+1),custom:(m,g,w)=>ue(this,void 0,void 0,function*(){var p;let{isDangerous:b,currentWorkingDirectory:x,searchTerm:f}=w,O=(p=(0,v.getCurrentInsertedDirectory)(l??x,f,w))!==null&&p!==void 0?p:"/";try{let E=yield g({command:"ls",args:["-1ApL"],cwd:O}),Y=W(E.stdout.split(`
`),[".DS_Store"]),q=[];for(let I of Y)if(I){let M=I.endsWith("/")?"folders":"filepaths";(M==="filepaths"&&d!=="only"||M==="folders"&&d!=="never")&&q.push({type:M==="filepaths"?"file":"folder",name:I,insertValue:I,isDangerous:b,context:{templateType:M}})}return S(h(q))}catch{return[]}})}}v.folders=Object.assign(()=>V({showFolders:"only"}),Object.freeze(V({showFolders:"only"})));v.filepaths=Object.assign(V,Object.freeze(V()))});var Q=T(k=>{"use strict";var D=k&&k.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(o){try{c(i.next(o))}catch(u){a(u)}}function d(o){try{c(i.throw(o))}catch(u){a(u)}}function c(o){o.done?s(o.value):r(o.value).then(l,d)}c((i=i.apply(e,n||[])).next())})};Object.defineProperty(k,"__esModule",{value:!0});k.keyValueList=k.keyValue=k.valueList=void 0;var H=new Map;function C(e,n){return e.length===0?n:n.map(t=>t.insertValue?t:Object.assign(Object.assign({},t),{insertValue:t.name+e}))}function G(e,n,t){return D(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...t);return C(n,i)}if(typeof e[0]=="string"){let i=e.map(r=>({name:r}));return C(n,i)}return C(n,e)})}function R(e,n,t,i){return D(this,void 0,void 0,function*(){if(t||Array.isArray(e)){let r=H.get(e);return r===void 0&&(r=yield G(e,n,i),H.set(e,r)),r}return G(e,n,i)})}function K(e,n){return typeof n=="string"?e&&n==="keys"||!e&&n==="values":n}function N(e,...n){return Math.max(...n.map(t=>e.lastIndexOf(t)))}function F(e,n){let t=new Set(e);return n.filter(i=>{var r;return typeof i.name=="string"?!t.has(i.name):!(!((r=i.name)===null||r===void 0)&&r.some(s=>t.has(s)))})}function me({delimiter:e=",",values:n=[],cache:t=!1,insertDelimiter:i=!1,allowRepeatedValues:r=!1}){return{trigger:(s,a)=>s.lastIndexOf(e)!==a.lastIndexOf(e),getQueryTerm:s=>s.slice(s.lastIndexOf(e)+e.length),custom:(...s)=>D(this,void 0,void 0,function*(){var a;let l=yield R(n,i?e:"",t,s);if(r)return l;let[d]=s,c=(a=d[d.length-1])===null||a===void 0?void 0:a.split(e);return F(c,l)})}}k.valueList=me;function fe({separator:e="=",keys:n=[],values:t=[],cache:i=!1,insertSeparator:r=!0}){return{trigger:(s,a)=>s.indexOf(e)!==a.indexOf(e),getQueryTerm:s=>s.slice(s.indexOf(e)+1),custom:(...s)=>D(this,void 0,void 0,function*(){let[a]=s,d=!a[a.length-1].includes(e),c=d?n:t,o=K(d,i);return R(c,d&&r?e:"",o,s)})}}k.keyValue=fe;function ge({separator:e="=",delimiter:n=",",keys:t=[],values:i=[],cache:r=!1,insertSeparator:s=!0,insertDelimiter:a=!1,allowRepeatedKeys:l=!1,allowRepeatedValues:d=!0}){return{trigger:(c,o)=>{let u=N(c,e,n),h=N(o,e,n);return u!==h},getQueryTerm:c=>{let o=N(c,e,n);return c.slice(o+1)},custom:(...c)=>D(this,void 0,void 0,function*(){let[o]=c,u=o[o.length-1],h=N(u,e,n),S=h===-1||u.slice(h,h+e.length)!==e,m=S?t:i,g=K(S,r),p=yield R(m,S?s?e:"":a?n:"",g,c);if(S){if(l)return p;let x=u.split(n).map(f=>f.slice(0,f.indexOf(e)));return F(x,p)}if(d)return p;let b=u.split(n).map(x=>x.slice(x.indexOf(e)+e.length));return F(b,p)})}}k.keyValueList=ge});var B=T(A=>{"use strict";var he=A&&A.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(o){try{c(i.next(o))}catch(u){a(u)}}function d(o){try{c(i.throw(o))}catch(u){a(u)}}function c(o){o.done?s(o.value):r(o.value).then(l,d)}c((i=i.apply(e,n||[])).next())})};Object.defineProperty(A,"__esModule",{value:!0});A.ai=void 0;var ve=4097,ye=4,be=.8,we=ve*ye*be;function xe({name:e,prompt:n,message:t,postProcess:i,temperature:r,splitOn:s}){return{scriptTimeout:15e3,custom:(a,l,d)=>he(this,void 0,void 0,function*(){var c,o;let u=yield l({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(u.stdout))return[];let h=typeof n=="function"?yield n({tokens:a,executeCommand:l,generatorContext:d}):n,S=typeof t=="function"?yield t({tokens:a,executeCommand:l,generatorContext:d}):t;if(S===null||S.length===0)return console.warn("No message provided to AI generator"),[];let m=we-((c=h?.length)!==null&&c!==void 0?c:0),g={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...h?[{role:"system",content:h}]:[],{role:"user",content:S.slice(0,m)}],temperature:r},w=JSON.stringify(g),p=yield l({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",w]}),b=JSON.parse(p.stdout);return(o=b?.choices.map(f=>{var O;return(O=f?.message)===null||O===void 0?void 0:O.content}).filter(f=>typeof f=="string").flatMap(f=>s?f.split(s).filter(O=>O.trim().length>0):[f]).map(f=>{if(i)return i(f);let O=f.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:O,insertValue:`'${O}'`,description:"Generated by Fig AI"}}))!==null&&o!==void 0?o:[]})}}A.ai=xe});var X=T(y=>{"use strict";var Se=y&&y.__createBinding||(Object.create?function(e,n,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(n,t);(!r||("get"in r?!n.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,i,r)}:function(e,n,t,i){i===void 0&&(i=t),e[i]=n[t]}),Oe=y&&y.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&Se(n,e,t)};Object.defineProperty(y,"__esModule",{value:!0});y.ai=y.folders=y.filepaths=void 0;var U=$();Object.defineProperty(y,"filepaths",{enumerable:!0,get:function(){return U.filepaths}});Object.defineProperty(y,"folders",{enumerable:!0,get:function(){return U.folders}});Oe(Q(),y);var ke=B();Object.defineProperty(y,"ai",{enumerable:!0,get:function(){return ke.ai}})});var Z=oe(X(),1),_e={name:"node",description:"Run the node interpreter",args:{name:"node script",isScript:!0,generators:(0,Z.filepaths)({extensions:["mjs","js","cjs"],editFileSuggestions:{priority:76}})},options:[{name:["-e","--eval=..."],insertValue:"-e '{cursor}'",description:"Evaluate script",args:{}},{name:"--watch",description:"Watch input files"},{name:"--watch-path",description:"Specify a watch directory or file",args:{name:"path",template:"filepaths"},isRepeatable:!0},{name:"--watch-preserve-output",description:"Disable the clearing of the console when watch mode restarts the process",dependsOn:["--watch","--watch-path"]},{name:"--env-file",description:"Specify a file containing environment variables",args:{name:"path",template:"filepaths"},isRepeatable:!0},{name:["-p","--print"],description:"Evaluate script and print result"},{name:["-c","--check"],description:"Syntax check script without executing"},{name:["-v","--version"],description:"Print Node.js version"},{name:["-i","--interactive"],description:"Always enter the REPL even if stdin does not appear to be a terminal"},{name:["-h","--help"],description:"Print node command line options (currently set)"},{name:"--inspect",requiresSeparator:!0,args:{name:"[host:]port",isOptional:!0},description:"Activate inspector on host:port (default: 127.0.0.1:9229)"},{name:"--preserve-symlinks",description:"Follows symlinks to directories when examining source code and templates for translation strings"}],generateSpec:async(e,n)=>{let t="test -f .adonisrc.json";if((await n({command:"bash",args:["-c","isAdonisJsonPresentCommand"]})).status===0)return{name:"node",subcommands:[{name:"ace",description:"Run AdonisJS command-line",options:[{name:["-h","--help"],description:"Display AdonisJS Ace help"},{name:["-v","--version"],description:"Display AdonisJS version"}],subcommands:[{name:"build",description:"Compile project from Typescript to Javascript. Also compiles the frontend assets if using webpack encore",options:[{name:["-prod","--production"],description:"Build for production"},{name:"--assets",description:"Build frontend assets when webpack encore is installed"},{name:"--no-assets",description:"Disable building assets"},{name:"--ignore-ts-errors",description:"Ignore typescript errors and complete the build process"},{name:"--tsconfig",description:"Path to the TypeScript project configuration file",args:{name:"path",description:"Path to tsconfig.json"}},{name:"--encore-args",requiresSeparator:!0,insertValue:"--encore-args='{cursor}'",description:"CLI options to pass to the encore command line"},{name:"--client",args:{name:"name"},description:"Select the package manager to decide which lock file to copy to the build folder"}]},{name:["configure","invoke"],description:"Configure a given AdonisJS package",args:{name:"name",description:"Name of the package you want to configure"},subcommands:[{name:"@adonisjs/auth",description:"Trigger auto configuring auth package"},{name:"@adonisjs/shield",description:"Trigger auto configuring shield package"},{name:"@adonisjs/redis",description:"Trigger auto configuring redis package"},{name:"@adonisjs/mail",description:"Trigger auto configuring mail package"}]},{name:"repl",description:"Start a new REPL session"},{name:"serve",description:"Start the AdonisJS HTTP server, along with the file watcher. Also starts the webpack dev server when webpack encore is installed",options:[{name:"--assets",description:"Start webpack dev server when encore is installed"},{name:"--no-assets",description:"Disable webpack dev server"},{name:["-w","--watch"],description:"Watch for file changes and re-start the HTTP server on change"},{name:["-p","--poll"],description:"Detect file changes by polling files instead of listening to filesystem events"},{name:"--node-args",requiresSeparator:!0,insertValue:"--node-args='{cursor}'",description:"CLI options to pass to the node command line"},{name:"--encore-args",requiresSeparator:!0,insertValue:"--encore-args='{cursor}'",description:"CLI options to pass to the encore command line"}]},{name:"db:seed",description:"Execute database seeder files",options:[{name:["-c","--connection"],description:"Define a custom database connection for the seeders",args:{name:"name"}},{name:["-i","--interactive"],description:"Run seeders in interactive mode"},{name:["-f","--files"],args:{name:"file",isVariadic:!0,template:"filepaths"},description:"Define a custom set of seeders files names to run"}]},{name:"dump:rcfile",description:"Dump contents of .adonisrc.json file along with defaults"},{name:"generate:key",description:"Generate a new APP_KEY secret"},{name:"generate:manifest",description:"Generate ace commands manifest file. Manifest file speeds up commands lookup"},{name:"list:routes",description:"List application routes"},{name:"make:command",description:"Make a new ace command"},{name:"make:controller",description:"Make a new HTTP controller",args:{name:"name",description:"Name of the controller class"},options:[{name:["-r","--resource"],description:"Add resourceful methods to the controller class"},{name:["-e","--exact"],description:"Create the controller with the exact name as provided"}]},{name:"make:exception",description:"Make a new custom exception class"},{name:"make:listener",description:"Make a new event listener class"},{name:"make:mailer",description:"Make a new mailer class",args:{name:"name",description:"Mailer class name"}},{name:"make:middleware",description:"Make a new middleware",args:{name:"name",description:"Middleware class name"}},{name:"make:migration",description:"Make a new migration file",args:{name:"name",description:"Name of the migration file"},options:[{name:"--connection",description:"The connection flag is used to lookup the directory for the migration file",args:{name:"name"}},{name:"--folder",description:"Pre-select a migration directory",args:{name:"name",template:"filepaths"}},{name:"--create",description:"Define the table name for creating a new table",args:{name:"name"}},{name:"--table",description:"Define the table name for altering an existing table",args:{name:"name"}}]},{name:"make:model",description:"Make a new Lucid model",args:{name:"name",description:"Name of the model class"},options:[{name:["-m","--migration"],description:"Generate the migration for the model"},{name:["-c","--controller"],description:"Generate the controller for the model"}]},{name:"make:prldfile",description:"Make a new preload file",subcommands:[{name:"events",description:"Make events preload file"}]},{name:"make:provider",description:"Make a new provider class"},{name:"make:seeder",description:"Make a new Seeder file",args:{name:"name",description:"Name of the seeder class"}},{name:"make:validator",description:"Make a new validator",args:{name:"name",description:"Name of the validator class"},options:[{name:["-e","--exact"],description:"Create the validator with the exact name as provided"}]},{name:"make:view",description:"Make a new view template",args:{name:"name",description:"Name of the view"},options:[{name:["-e","--exact"],description:"Create the template file with the exact name as provided"}]},{name:"migration:rollback",description:"Rollback migrations to a given batch number",options:[{name:["-c","--connection"],description:"Define a custom database connection",args:{name:"name"}},{name:"--force",description:"Explicitly force to run migrations in production",isDangerous:!0},{name:"--dry-run",description:"Print SQL queries, instead of running the migrations"},{name:"--batch",args:{name:"number",description:"Use 0 to rollback to initial state"},description:"Define custom batch number for rollback"}]},{name:"migration:run",description:"Run pending migrations",options:[{name:["-c","--connection"],description:"Define a custom database connection",args:{name:"name"}},{name:"--force",description:"Explicitly force to run migrations in production",isDangerous:!0},{name:"--dry-run",description:"Print SQL queries, instead of running the migrations"}]},{name:"migration:status",description:"Check migrations current status"}]}]}}},P=_e;var _={name:"version",suggestions:[{name:["latest","current"],description:"Newest official release"},{name:"lts",description:"Newest Long Term Support official release"},{name:"auto",description:"Read version from file: .n-node-version, .node-version, .nvmrc, or package.json"},{name:"engine",description:"Read version from package.json"}],generators:{script:["n","lsr","--all"],postProcess:function(e){let n=new Set,t=e.split(`
`).slice(1);for(let i of t){n.add(i);let r=i.split(".");n.add(r[0]+"."+r[1]),n.add(r[0])}return Array.from(n).map(i=>({name:[i,`v${i}`],description:`Node.js ${i}`}))}},isOptional:!1},je={..._,isOptional:!0},Ae={..._,isVariadic:!0},Te={name:"n",description:"Node version management",subcommands:[{name:["i","install"],description:"Install a Node.js version",args:_},{name:["rm","\u2013"],description:"Remove a Node.js version",args:Ae},{name:"prune",description:"Remove all cached Node.js versions except the installed version"},{name:"doctor",description:"Display diagnostics to help resolve problems"},{name:"uninstall",description:"Remove the installed Node.js"},{name:["ls","list"],description:"Output downloaded versions"},{name:["lsr","ls-remote","list-remote"],description:"Output matching versions available for download",args:_,options:[{name:"--all",description:"Ls-remote displays all matches instead of last 20"}]},{name:["which","bin"],description:"Output path for downloaded node version",args:_},{name:["run","use","as"],description:"Execute downloaded Node.js version with args",args:[_,...[P.args].flat()],subcommands:P.subcommands,options:P.options},{name:"exec",description:"Execute command with modified PATH, so downloaded node version and npm first",args:[_,{name:"cmd",isCommand:!0},{name:"args",isVariadic:!0}]}],args:je,options:[{name:["-V","--version"],description:"Output version of n"},{name:["-h","--help"],description:"Display help information"},{name:["-p","--preserve"],description:"Preserve npm and npx during install of Node.js"},{name:"--no-preserve",description:"Do not preserve npm and npx during install of Node.js"},{name:["-q","--quiet"],description:'Disable curl output. Disable log messages processing "auto" and "engine" labels'},{name:["-d","--download"],description:"Download only"},{name:["-a","--arch"],description:"Override system architecture",args:{name:"Architecture",suggestions:[{name:["x64","x86_64"]},{name:["arm64","aarch64","armv8l"]},{name:["x86","i386","i686"]},{name:["armv6l","armv7l"]}]}},{name:"--insecure",description:"Turn off certificate checking for https requests (may be needed from behind a proxy server)",isDangerous:!0},{name:"--use-xz",description:"Override automatic detection of xz support and enable use of xz compressed node downloads",exclusiveOn:["--no-use-xz"]},{name:"--no-use-xz",description:"Override automatic detection of xz support and disable use of xz compressed node downloads",exclusiveOn:["--use-xz"]}]},Fe=Te;export{Fe as default};
