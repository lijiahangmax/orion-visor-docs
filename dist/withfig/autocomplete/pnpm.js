function P(e){return{name:e,description:"Uninstall a package",args:{name:"package",generators:E,filterStrategy:"fuzzy",isVariadic:!0},options:B}}var F=e=>(e.match(/@/g)||[]).length,Y=e=>async(n,t,i)=>{let a=n[n.length-1];if(a==="")return[];let r=e?.length>0?`+keywords:${e.join(",")}`:"",d=["-s","-H","Accept: application/json",r?`https://api.npms.io/v2/search?size=20&q=${a}${r}`:`https://api.npms.io/v2/search/suggestions?q=${a}&size=20`],l=["-s","-H","Accept: application/vnd.npm.install-v1+json",`https://registry.npmjs.org/${a.slice(0,-1)}`],w=h=>t({command:"curl",args:h[h.length-1]==="@"?l:d}),u=a.startsWith("@")?F(a)>1:a.includes("@");try{let h=JSON.parse((await w(a)).stdout);if(u){let O=Object.entries(h["dist-tags"]||{}).map(([A,q])=>({name:A,description:q}));return O.push(...Object.keys(h.versions).map(A=>({name:A})).reverse()),O}return(r?h.results:h).map(O=>({name:O.package.name,description:O.package.description}))}catch(h){return console.error({error:h}),[]}},y={trigger:(e,n)=>n.startsWith("@")?!(F(n)>1&&F(e)>1):!(n.includes("@")&&e.includes("@")),getQueryTerm:"@",cache:{ttl:1e3*60*60*24*2},custom:Y()},J={custom:async(e,n)=>{let{stdout:t}=await n({command:"npm",args:["prefix"]}),{stdout:i}=await n({command:"cat",args:[`${t}/package.json`]}),a=[];try{if(i.trim()=="")return a;let s=JSON.parse(i).workspaces;if(s)for(let d of s)a.push({name:d,description:"Workspaces"})}catch(r){console.log(r)}return a}},E={trigger:e=>e==="-g"||e==="--global",custom:async function(e,n){if(!e.includes("-g")&&!e.includes("--global")){let{stdout:t}=await n({command:"npm",args:["prefix"]}),{stdout:i}=await n({command:"cat",args:[`${t}/package.json`]}),a=JSON.parse(i),r=a.dependencies??{},s=a.devDependencies,d=a.optionalDependencies??{};return Object.assign(r,s,d),Object.keys(r).filter(l=>!e.some(u=>u===l)).map(l=>({name:l,icon:"\u{1F4E6}",description:r[l]?"dependency":d[l]?"optionalDependency":"devDependency"}))}else{let{stdout:t}=await n({command:"bash",args:["-c","ls -1 `npm root -g`"]});return t.split(`
`).map(i=>({name:i,icon:"\u{1F4E6}",description:"Global dependency"}))}}},D={cache:{strategy:"stale-while-revalidate",cacheByDirectory:!0},script:["bash","-c","until [[ -f package.json ]] || [[ $PWD = '/' ]]; do cd ..; done; cat package.json"],postProcess:function(e,[n]){if(e.trim()=="")return[];try{let t=JSON.parse(e),i=t.scripts,a=t.fig||{};if(i)return Object.entries(i).map(([r,s])=>{let d=n==="yarn"?"fig://icon?type=yarn":"fig://icon?type=npm",l=a[r];return{name:r,icon:d,description:s,priority:51,...l}})}catch(t){console.error(t)}return[]}},I={name:["-g","--global"],description:"Operates in 'global' mode, so that packages are installed into the prefix folder instead of the current working directory"},g={name:"--json",description:"Show output in json format"},j={name:"--omit",description:"Dependency types to omit from the installation tree on disk",args:{name:"Package type",default:"dev",suggestions:["dev","optional","peer"]},isRepeatable:3},v={name:["-p","--parseable"],description:"Output parseable results from commands that write to standard output"},T={name:["-l","--long"],description:"Show extended information"},c=[{name:["-w","--workspace"],description:"Enable running a command in the context of the configured workspaces of the current project",args:{name:"workspace",generators:J,isVariadic:!0}},{name:["-ws","--workspaces"],description:"Enable running a command in the context of all the configured workspaces"}],B=[{name:["-S","--save"],description:"Package will be removed from your dependencies"},{name:["-D","--save-dev"],description:"Package will appear in your `devDependencies`"},{name:["-O","--save-optional"],description:"Package will appear in your `optionalDependencies`"},{name:"--no-save",description:"Prevents saving to `dependencies`"},{name:"-g",description:"Uninstall global package"},...c],$=[{name:["-a","-all"],description:"Show all outdated or installed packages"},g,T,v,{name:"--depth",description:"The depth to go when recursing packages",args:{name:"depth"}},{name:"--link",description:"Limits output to only those packages that are linked"},{name:"--package-lock-only",description:"Current operation will only use the package-lock.json, ignoring node_modules"},{name:"--no-unicode",description:"Uses unicode characters in the tree output"},I,j,...c],o={name:"--registry",description:"The base URL of the npm registry",args:{name:"registry"}},z={name:"--verbose",description:"Show extra information",args:{name:"verbose"}},m={name:"--otp",description:"One-time password from a two-factor authenticator",args:{name:"otp"}},b={name:"--ignore-scripts",description:"If true, npm does not run scripts specified in package.json files"},x={name:"--script-shell",description:"The shell to use for scripts run with the npm exec, npm run and npm init <pkg> commands",args:{name:"script-shell"}},S={name:"--dry-run",description:"Indicates that you don't want npm to make any changes and that it should only report what it would have done"},re={name:"npm",parserDirectives:{flagsArePosixNoncompliant:!0},description:"Node package manager",subcommands:[{name:["install","i","add"],description:"Install a package and its dependencies",args:{name:"package",isOptional:!0,generators:y,debounce:!0,isVariadic:!0},options:[{name:["-P","--save-prod"],description:"Package will appear in your `dependencies`. This is the default unless `-D` or `-O` are present"},{name:["-D","--save-dev"],description:"Package will appear in your `devDependencies`"},{name:["-O","--save-optional"],description:"Package will appear in your `optionalDependencies`"},{name:"--no-save",description:"Prevents saving to `dependencies`"},{name:["-E","--save-exact"],description:"Saved dependencies will be configured with an exact version rather than using npm's default semver range operator"},{name:["-B","--save-bundle"],description:"Saved dependencies will also be added to your bundleDependencies list"},I,{name:"--global-style",description:"Causes npm to install the package into your local node_modules folder with the same layout it uses with the global node_modules folder"},{name:"--legacy-bundling",description:"Causes npm to install the package such that versions of npm prior to 1.4, such as the one included with node 0.8, can install the package"},{name:"--legacy-peer-deps",description:"Bypass peerDependency auto-installation. Emulate install behavior of NPM v4 through v6"},{name:"--strict-peer-deps",description:"If set to true, and --legacy-peer-deps is not set, then any conflicting peerDependencies will be treated as an install failure"},{name:"--no-package-lock",description:"Ignores package-lock.json files when installing"},o,z,j,b,{name:"--no-audit",description:"Submit audit reports alongside the current npm command to the default registry and all registries configured for scopes"},{name:"--no-bin-links",description:"Tells npm to not create symlinks (or .cmd shims on Windows) for package executables"},{name:"--no-fund",description:"Hides the message at the end of each npm install acknowledging the number of dependencies looking for funding"},S,...c]},{name:["run","run-script"],description:"Run arbitrary package scripts",options:[...c,{name:"--if-present",description:"Npm will not exit with an error code when run-script is invoked for a script that isn't defined in the scripts section of package.json"},{name:"--silent",description:""},b,x,{name:"--",args:{name:"args",isVariadic:!0}}],args:{name:"script",description:"Script to run from your package.json",filterStrategy:"fuzzy",generators:D}},{name:"init",description:"Trigger the initialization",options:[{name:["-y","--yes"],description:"Automatically answer 'yes' to any prompts that npm might print on the command line"},{name:"-w",description:"Create the folders and boilerplate expected while also adding a reference to your project workspaces property",args:{name:"dir"}}]},{name:"access",description:"Set access controls on private packages"},{name:["adduser","login"],description:"Add a registry user account",options:[o,{name:"--scope",description:"Associate an operation with a scope for a scoped registry",args:{name:"scope",description:"Scope name"}}]},{name:"audit",description:"Run a security audit",subcommands:[{name:"fix",description:"If the fix argument is provided, then remediations will be applied to the package tree",options:[S,{name:["-f","--force"],description:"Removes various protections against unfortunate side effects, common mistakes, unnecessary performance degradation, and malicious input",isDangerous:!0},...c]}],options:[...c,{name:"--audit-level",description:"The minimum level of vulnerability for npm audit to exit with a non-zero exit code",args:{name:"audit",suggestions:["info","low","moderate","high","critical","none"]}},{name:"--package-lock-only",description:"Current operation will only use the package-lock.json, ignoring node_modules"},g,j]},{name:"bin",description:"Print the folder where npm will install executables",options:[I]},{name:["bugs","issues"],description:"Report bugs for a package in a web browser",args:{name:"package",isOptional:!0,generators:y,debounce:!0,isVariadic:!0},options:[{name:"--no-browser",description:"Display in command line instead of browser",exclusiveOn:["--browser"]},{name:"--browser",description:"The browser that is called by the npm bugs command to open websites",args:{name:"browser"},exclusiveOn:["--no-browser"]},o]},{name:"cache",description:"Manipulates packages cache",subcommands:[{name:"add",description:"Add the specified packages to the local cache"},{name:"clean",description:"Delete all data out of the cache folder"},{name:"verify",description:"Verify the contents of the cache folder, garbage collecting any unneeded data, and verifying the integrity of the cache index and all cached data"}],options:[{name:"--cache",args:{name:"cache"},description:"The location of npm's cache directory"}]},{name:["ci","clean-install","install-clean"],description:"Install a project with a clean slate",options:[{name:"--audit",description:'When "true" submit audit reports alongside the current npm command to the default registry and all registries configured for scopes',args:{name:"audit",suggestions:["true","false"]},exclusiveOn:["--no-audit"]},{name:"--no-audit",description:"Do not submit audit reports alongside the current npm command",exclusiveOn:["--audit"]},b,x,z,o]},{name:"cit",description:"Install a project with a clean slate and run tests"},{name:"clean-install-test",description:"Install a project with a clean slate and run tests"},{name:"completion",description:"Tab completion for npm"},{name:["config","c"],description:"Manage the npm configuration files",subcommands:[{name:"set",description:"Sets the config key to the value",args:[{name:"key"},{name:"value"}],options:[{name:["-g","--global"],description:"Sets it globally"}]},{name:"get",description:"Echo the config value to stdout",args:{name:"key"}},{name:"list",description:"Show all the config settings",options:[{name:"-g",description:"Lists globally installed packages"},{name:"-l",description:"Also shows defaults"},g]},{name:"delete",description:"Deletes the key from all configuration files",args:{name:"key"}},{name:"edit",description:"Opens the config file in an editor",options:[{name:"--global",description:"Edits the global config"}]}]},{name:"create",description:"Create a package.json file"},{name:["dedupe","ddp"],description:"Reduce duplication in the package tree"},{name:"deprecate",description:"Deprecate a version of a package",options:[o]},{name:"dist-tag",description:"Modify package distribution tags"},{name:["docs","home"],description:"Open documentation for a package in a web browser",args:{name:"package",isOptional:!0,generators:y,debounce:!0,isVariadic:!0},options:[...c,o,{name:"--no-browser",description:"Display in command line instead of browser",exclusiveOn:["--browser"]},{name:"--browser",description:"The browser that is called by the npm docs command to open websites",args:{name:"browser"},exclusiveOn:["--no-browser"]}]},{name:"doctor",description:"Check your npm environment",options:[o]},{name:"edit",description:"Edit an installed package",options:[{name:"--editor",description:"The command to run for npm edit or npm config edit"}]},{name:"explore",description:"Browse an installed package",args:{name:"package",filterStrategy:"fuzzy",generators:E}},{name:"fund",description:"Retrieve funding information"},{name:"get",description:"Echo the config value to stdout"},{name:"help",description:"Get help on npm",args:{name:"term",isVariadic:!0,description:"Terms to search for"},options:[{name:"--viewer",description:"The program to use to view help content",args:{name:"viewer"}}]},{name:"help-search",description:"Search npm help documentation",args:{name:"text",description:"Text to search for"},options:[T]},{name:"hook",description:"Manage registry hooks"},{name:"install-ci-test",description:"Install a project with a clean slate and run tests"},{name:"install-test",description:"Install package(s) and run tests"},{name:"it",description:"Install package(s) and run tests"},{name:"link",description:"Symlink a package folder",args:{name:"path",template:"filepaths"}},{name:"ln",description:"Symlink a package folder"},{name:"logout",description:"Log out of the registry",options:[o,{name:"--scope",description:"Associate an operation with a scope for a scoped registry",args:{name:"scope",description:"Scope name"}}]},{name:["ls","list"],description:"List installed packages",options:$,args:{name:"[@scope]/pkg",isVariadic:!0}},{name:"org",description:"Manage orgs",subcommands:[{name:"set",description:"Add a user to an org or manage roles",args:[{name:"orgname",description:"Organization name"},{name:"username",description:"User name"},{name:"role",isOptional:!0,suggestions:["developer","admin","owner"]}],options:[o,m]},{name:"rm",description:"Remove a user from an org",args:[{name:"orgname",description:"Organization name"},{name:"username",description:"User name"}],options:[o,m]},{name:"ls",description:"List users in an org or see what roles a particular user has in an org",args:[{name:"orgname",description:"Organization name"},{name:"username",description:"User name",isOptional:!0}],options:[o,m,g,v]}]},{name:"outdated",description:"Check for outdated packages",args:{name:"[<@scope>/]<pkg>",isVariadic:!0,isOptional:!0},options:[{name:["-a","-all"],description:"Show all outdated or installed packages"},g,T,v,{name:"-g",description:"Checks globally"},...c]},{name:["owner","author"],description:"Manage package owners",subcommands:[{name:"ls",description:"List all the users who have access to modify a package and push new versions. Handy when you need to know who to bug for help",args:{name:"[@scope/]pkg"},options:[o]},{name:"add",description:"Add a new user as a maintainer of a package. This user is enabled to modify metadata, publish new versions, and add other owners",args:[{name:"user"},{name:"[@scope/]pkg"}],options:[o,m]},{name:"rm",description:"Remove a user from the package owner list. This immediately revokes their privileges",args:[{name:"user"},{name:"[@scope/]pkg"}],options:[o,m]}]},{name:"pack",description:"Create a tarball from a package",args:{name:"[<@scope>/]<pkg>"},options:[g,S,...c,{name:"--pack-destination",description:"Directory in which npm pack will save tarballs",args:{name:"pack-destination",template:["folders"]}}]},{name:"ping",description:"Ping npm registry",options:[o]},{name:"pkg",description:"Manages your package.json",subcommands:[{name:"get",description:"Retrieves a value key, defined in your package.json file. It is possible to get multiple values and values for child fields",args:{name:"field",description:"Name of the field to get. You can view child fields by separating them with a period",isVariadic:!0},options:[g,...c]},{name:"set",description:"Sets a value in your package.json based on the field value. It is possible to set multiple values and values for child fields",args:{name:"field",description:"Name of the field to set. You can set child fields by separating them with a period",isVariadic:!0},options:[g,...c,{name:["-f","--force"],description:"Removes various protections against unfortunate side effects, common mistakes, unnecessary performance degradation, and malicious input. Allow clobbering existing values in npm pkg",isDangerous:!0}]},{name:"delete",description:"Deletes a key from your package.json",args:{name:"key",description:"Name of the key to delete. You can delete child fields by separating them with a period",isVariadic:!0},options:[...c,{name:["-f","--force"],description:"Removes various protections against unfortunate side effects, common mistakes, unnecessary performance degradation, and malicious input. Allow clobbering existing values in npm pkg",isDangerous:!0}]}]},{name:"prefix",description:"Display prefix",options:[{name:["-g","--global"],description:"Print the global prefix to standard out"}]},{name:"profile",description:"Change settings on your registry profile",subcommands:[{name:"get",description:"Display all of the properties of your profile, or one or more specific properties",args:{name:"property",isOptional:!0,description:"Property name"},options:[o,g,v,m]},{name:"set",description:"Set the value of a profile property",args:[{name:"property",description:"Property name",suggestions:["email","fullname","homepage","freenode","twitter","github"]},{name:"value",description:"Property value"}],options:[o,g,v,m],subcommands:[{name:"password",description:"Change your password. This is interactive, you'll be prompted for your current password and a new password"}]},{name:"enable-2fa",description:"Enables two-factor authentication",args:{name:"mode",description:"Mode for two-factor authentication. Defaults to auth-and-writes mode",isOptional:!0,suggestions:[{name:"auth-only",description:"Require an OTP when logging in or making changes to your account's authentication"},{name:"auth-and-writes",description:"Requires an OTP at all the times auth-only does, and also requires one when publishing a module, setting the latest dist-tag, or changing access via npm access and npm owner"}]},options:[o,m]},{name:"disable-2fa",description:"Disables two-factor authentication",options:[o,m]}]},{name:"prune",description:"Remove extraneous packages",args:{name:"[<@scope>/]<pkg>",isOptional:!0},options:[j,S,g,{name:"--production",description:"Remove the packages specified in your devDependencies"},...c]},{name:"publish",description:"Publish a package",args:{name:"tarball|folder",isOptional:!0,description:"A url or file path to a gzipped tar archive containing a single folder with a package.json file inside | A folder containing a package.json file",template:["folders"]},options:[{name:"--tag",description:"Registers the published package with the given tag",args:{name:"tag"}},...c,{name:"--access",description:"Sets scoped package to be publicly viewable if set to 'public'",args:{default:"restricted",suggestions:["restricted","public"]}},S,m]},{name:["rebuild","rb"],description:"Rebuild a package",args:{name:"[<@scope>/]<pkg>[@<version>]"},options:[I,...c,b,{name:"--no-bin-links",description:"Tells npm to not create symlinks (or .cmd shims on Windows) for package executables"}]},{name:"repo",description:"Open package repository page in the browser",args:{name:"package",isOptional:!0,generators:y,debounce:!0,isVariadic:!0},options:[...c,{name:"--no-browser",description:"Display in command line instead of browser",exclusiveOn:["--browser"]},{name:"--browser",description:"The browser that is called by the npm repo command to open websites",args:{name:"browser"},exclusiveOn:["--no-browser"]}]},{name:"restart",description:"Restart a package",options:[b,x,{name:"--",args:{name:"arg",description:"Arguments to be passed to the restart script"}}]},{name:"root",description:"Display npm root",options:[{name:["-g","--global"],description:"Print the effective global node_modules folder to standard out"}]},{name:["search","s","se","find"],description:"Search for packages",args:{name:"search terms",isVariadic:!0},options:[T,g,{name:"--color",description:"Show colors",args:{name:"always",suggestions:["always"],description:"Always show colors"},exclusiveOn:["--no-color"]},{name:"--no-color",description:"Do not show colors",exclusiveOn:["--color"]},v,{name:"--no-description",description:"Do not show descriptions"},{name:"--searchopts",description:"Space-separated options that are always passed to search",args:{name:"searchopts"}},{name:"--searchexclude",description:"Space-separated options that limit the results from search",args:{name:"searchexclude"}},o,{name:"--prefer-online",description:"If true, staleness checks for cached data will be forced, making the CLI look for updates immediately even for fresh package data",exclusiveOn:["--prefer-offline","--offline"]},{name:"--prefer-offline",description:"If true, staleness checks for cached data will be bypassed, but missing data will be requested from the server",exclusiveOn:["--prefer-online","--offline"]},{name:"--offline",description:"Force offline mode: no network requests will be done during install",exclusiveOn:["--prefer-online","--prefer-offline"]}]},{name:"set",description:"Sets the config key to the value"},{name:"set-script",description:"Set tasks in the scripts section of package.json",args:[{name:"script",description:"Name of the task to be added to the scripts section of package.json"},{name:"command",description:"Command to run when script is called"}],options:c},{name:"shrinkwrap",description:"Lock down dependency versions for publication"},{name:"star",description:"Mark your favorite packages",args:{name:"pkg",description:"Package to mark as favorite"},options:[o,{name:"--no-unicode",description:"Do not use unicode characters in the tree output"}]},{name:"stars",description:"View packages marked as favorites",args:{name:"user",isOptional:!0,description:"View packages marked as favorites by <user>"},options:[o]},{name:"start",description:"Start a package",options:[b,x,{name:"--",args:{name:"arg",description:"Arguments to be passed to the start script"}}]},{name:"stop",description:"Stop a package",options:[b,x,{name:"--",args:{name:"arg",description:"Arguments to be passed to the stop script"}}]},{name:"team",description:"Manage organization teams and team memberships",subcommands:[{name:"create",args:{name:"scope:team"},options:[o,m]},{name:"destroy",args:{name:"scope:team"},options:[o,m]},{name:"add",args:[{name:"scope:team"},{name:"user"}],options:[o,m]},{name:"rm",args:[{name:"scope:team"},{name:"user"}],options:[o,m]},{name:"ls",args:{name:"scope|scope:team"},options:[o,g,v]}]},{name:["test","tst","t"],description:"Test a package",options:[b,x]},{name:"token",description:"Manage your authentication tokens",subcommands:[{name:"list",description:"Shows a table of all active authentication tokens",options:[g,v]},{name:"create",description:"Create a new authentication token",options:[{name:"--read-only",description:"This is used to mark a token as unable to publish when configuring limited access tokens with the npm token create command"},{name:"--cidr",description:"This is a list of CIDR address to be used when configuring limited access tokens with the npm token create command",isRepeatable:!0,args:{name:"cidr"}}]},{name:"revoke",description:"Immediately removes an authentication token from the registry. You will no longer be able to use it",args:{name:"idtoken"}}],options:[o,m]},P("uninstall"),P(["r","rm"]),P("un"),P("remove"),P("unlink"),{name:"unpublish",description:"Remove a package from the registry",args:{name:"[<@scope>/]<pkg>[@<version>]"},options:[S,{name:["-f","--force"],description:"Allow unpublishing all versions of a published package. Removes various protections against unfortunate side effects, common mistakes, unnecessary performance degradation, and malicious input",isDangerous:!0},...c]},{name:"unstar",description:"Remove an item from your favorite packages",args:{name:"pkg",description:"Package to unmark as favorite"},options:[o,m,{name:"--no-unicode",description:"Do not use unicode characters in the tree output"}]},{name:["update","upgrade","up"],description:"Update a package",options:[{name:"-g",description:"Update global package"},{name:"--global-style",description:"Causes npm to install the package into your local node_modules folder with the same layout it uses with the global node_modules folder"},{name:"--legacy-bundling",description:"Causes npm to install the package such that versions of npm prior to 1.4, such as the one included with node 0.8, can install the package"},{name:"--strict-peer-deps",description:"If set to true, and --legacy-peer-deps is not set, then any conflicting peerDependencies will be treated as an install failure"},{name:"--no-package-lock",description:"Ignores package-lock.json files when installing"},j,b,{name:"--no-audit",description:"Submit audit reports alongside the current npm command to the default registry and all registries configured for scopes"},{name:"--no-bin-links",description:"Tells npm to not create symlinks (or .cmd shims on Windows) for package executables"},{name:"--no-fund",description:"Hides the message at the end of each npm install acknowledging the number of dependencies looking for funding"},{name:"--save",description:"Update the semver values of direct dependencies in your project package.json"},S,...c]},{name:"version",description:"Bump a package version",options:[...c,g,{name:"--allow-same-version",description:"Prevents throwing an error when npm version is used to set the new version to the same value as the current version"},{name:"--no-commit-hooks",description:"Do not run git commit hooks when using the npm version command"},{name:"--no-git-tag-version",description:"Do not tag the commit when using the npm version command"},{name:"--preid",description:'The "prerelease identifier" to use as a prefix for the "prerelease" part of a semver. Like the rc in 1.2.0-rc.8',args:{name:"prerelease-id"}},{name:"--sign-git-tag",description:"If set to true, then the npm version command will tag the version using -s to add a signature"}]},{name:["view","v","info","show"],description:"View registry info",options:[...c,g]},{name:"whoami",description:"Display npm username",options:[o]}]};var U={alias:async(e,n)=>{let t=await n({command:"npm",args:["prefix"]});if(t.status!==0)throw new Error("npm prefix command failed");let i=await n({command:"cat",args:[`${t.stdout.trim()}/package.json`]}),a=JSON.parse(i.stdout).scripts?.[e];if(!a)throw new Error(`Script not found: '${e}'`);return a}},R=new Set(["vue","vite","nuxt","react-native","degit","expo","jest","next","electron","prisma","eslint","prettier","tsc","typeorm","babel","remotion","autocomplete-tools","redwood","rw","create-completion-spec","publish-spec-to-team","capacitor","cap"]),H={custom:async(e,n,t)=>{let{stdout:i}=await n({command:"yarn",args:["global","dir"]}),{stdout:a}=await n({command:"cat",args:[`${i.trim()}/package.json`]});if(a.trim()=="")return[];try{let r=JSON.parse(a),s=r.dependencies||{},d=r.devDependencies||{};return[...Object.keys(s),...Object.keys(d)].filter(u=>!e.includes(u)).map(u=>({name:u,icon:"\u{1F4E6}"}))}catch{}return[]}},X={script:["yarn","list","--depth=0","--json"],postProcess:e=>{if(e.trim()=="")return[];try{return JSON.parse(e).data.trees.map(i=>({name:i.name.split("@")[0],icon:"\u{1F4E6}"}))}catch{}return[]}},L={script:["yarn","config","list"],postProcess:function(e){if(e.trim()=="")return[];try{let n=e.indexOf("{"),t=e.indexOf("}"),i=e.substring(n,t+1);i=i.replace(/\'/gi,'"').replace("lastUpdateCheck",'"lastUpdateCheck"').replace("registry",'"lastUpdateCheck"');let a=JSON.parse(i);if(a)return Object.keys(a).map(r=>({name:r}))}catch{}return[]}},f={script:["bash","-c","until [[ -f package.json ]] || [[ $PWD = '/' ]]; do cd ..; done; cat package.json"],postProcess:function(e,n=[]){if(e.trim()==="")return[];try{let t=JSON.parse(e),i=t.dependencies??{},a=t.devDependencies,r=t.optionalDependencies??{};return Object.assign(i,a,r),Object.keys(i).filter(s=>!n.some(l=>l===s)).map(s=>({name:s,icon:"\u{1F4E6}",description:i[s]?"dependency":r[s]?"optionalDependency":"devDependency"}))}catch(t){return console.error(t),[]}}},p=[{name:["-s","--silent"],description:"Skip Yarn console logs"},{name:"--no-default-rc",description:"Prevent Yarn from automatically detecting yarnrc and npmrc files"},{name:"--use-yarnrc",description:"Specifies a yarnrc file that Yarn should use (.yarnrc only, not .npmrc) (default: )",args:{name:"path",template:"filepaths"}},{name:"--verbose",description:"Output verbose messages on internal operations"},{name:"--offline",description:"Trigger an error if any required dependencies are not available in local cache"},{name:"--prefer-offline",description:"Use network only if dependencies are not available in local cache"},{name:["--enable-pnp","--pnp"],description:"Enable the Plug'n'Play installation"},{name:"--json",description:"Format Yarn log messages as lines of JSON"},{name:"--ignore-scripts",description:"Don't run lifecycle scripts"},{name:"--har",description:"Save HAR output of network traffic"},{name:"--ignore-platform",description:"Ignore platform checks"},{name:"--ignore-engines",description:"Ignore engines check"},{name:"--ignore-optional",description:"Ignore optional dependencies"},{name:"--force",description:"Install and build packages even if they were built before, overwrite lockfile"},{name:"--skip-integrity-check",description:"Run install without checking if node_modules is installed"},{name:"--check-files",description:"Install will verify file tree of packages for consistency"},{name:"--no-bin-links",description:"Don't generate bin links when setting up packages"},{name:"--flat",description:"Only allow one version of a package"},{name:["--prod","--production"],description:"Instruct Yarn to ignore NODE_ENV and take its production-or-not status from this flag instead"},{name:"--no-lockfile",description:"Don't read or generate a lockfile"},{name:"--pure-lockfile",description:"Don't generate a lockfile"},{name:"--frozen-lockfile",description:"Don't generate a lockfile and fail if an update is needed"},{name:"--update-checksums",description:"Update package checksums from current repository"},{name:"--link-duplicates",description:"Create hardlinks to the repeated modules in node_modules"},{name:"--link-folder",description:"Specify a custom folder to store global links",args:{name:"path",template:"folders"}},{name:"--global-folder",description:"Specify a custom folder to store global packages",args:{name:"path",template:"folders"}},{name:"--modules-folder",description:"Rather than installing modules into the node_modules folder relative to the cwd, output them here",args:{name:"path",template:"folders"}},{name:"--preferred-cache-folder",description:"Specify a custom folder to store the yarn cache if possible",args:{name:"path",template:"folders"}},{name:"--cache-folder",description:"Specify a custom folder that must be used to store the yarn cache",args:{name:"path",template:"folders"}},{name:"--mutex",description:"Use a mutex to ensure only one yarn instance is executing",args:{name:"type[:specifier]"}},{name:"--emoji",description:"Enables emoji in output",args:{default:"true",suggestions:["true","false"]}},{name:"--cwd",description:"Working directory to use",args:{name:"cwd",template:"folders"}},{name:["--proxy","--https-proxy"],description:"",args:{name:"host"}},{name:"--registry",description:"Override configuration registry",args:{name:"url"}},{name:"--no-progress",description:"Disable progress bar"},{name:"--network-concurrency",description:"Maximum number of concurrent network requests",args:{name:"number"}},{name:"--network-timeout",description:"TCP timeout for network requests",args:{name:"milliseconds"}},{name:"--non-interactive",description:"Do not show interactive prompts"},{name:"--scripts-prepend-node-path",description:"Prepend the node executable dir to the PATH in scripts"},{name:"--no-node-version-check",description:"Do not warn when using a potentially unsupported Node version"},{name:"--focus",description:"Focus on a single workspace by installing remote copies of its sibling workspaces"},{name:"--otp",description:"One-time password for two factor authentication",args:{name:"otpcode"}}],K={script:function(e){return e[e.length-1]===""?void 0:["curl","-s","-H","Accept: application/json",`https://api.npms.io/v2/search?q=${"create-"+e[e.length-1]}&size=20`]},cache:{ttl:100*24*60*60*3},postProcess:function(e){try{return JSON.parse(e).results.map(n=>({name:n.package.name.substring(7),description:n.package.description}))}catch{return[]}}},de={name:"yarn",description:"Manage packages and run scripts",generateSpec:async(e,n)=>({name:"yarn",subcommands:(await n({command:"bash",args:["-c","until [[ -d node_modules/ ]] || [[ $PWD = '/' ]]; do cd ..; done; ls -1 node_modules/.bin/"]})).stdout.split(`
`).filter(a=>R.has(a)).map(a=>({name:a,loadSpec:a==="rw"?"redwood":a,icon:"fig://icon?type=package"}))}),args:{generators:D,filterStrategy:"fuzzy",parserDirectives:U,isOptional:!0,isCommand:!0},options:[{name:"--disable-pnp",description:"Disable the Plug'n'Play installation"},{name:"--emoji",description:"Enable emoji in output (default: true)",args:{name:"bool",suggestions:[{name:"true"},{name:"false"}]}},{name:["--enable-pnp","--pnp"],description:"Enable the Plug'n'Play installation"},{name:"--flat",description:"Only allow one version of a package"},{name:"--focus",description:"Focus on a single workspace by installing remote copies of its sibling workspaces"},{name:"--force",description:"Install and build packages even if they were built before, overwrite lockfile"},{name:"--frozen-lockfile",description:"Don't generate a lockfile and fail if an update is needed"},{name:"--global-folder",description:"Specify a custom folder to store global packages",args:{template:"folders"}},{name:"--har",description:"Save HAR output of network traffic"},{name:"--https-proxy",description:"",args:{name:"path",suggestions:[{name:"https://"}]}},{name:"--ignore-engines",description:"Ignore engines check"},{name:"--ignore-optional",description:"Ignore optional dependencies"},{name:"--ignore-platform",description:"Ignore platform checks"},{name:"--ignore-scripts",description:"Don't run lifecycle scripts"},{name:"--json",description:"Format Yarn log messages as lines of JSON (see jsonlines.org)"},{name:"--link-duplicates",description:"Create hardlinks to the repeated modules in node_modules"},{name:"--link-folder",description:"Specify a custom folder to store global links",args:{template:"folders"}},{name:"--modules-folder",description:"Rather than installing modules into the node_modules folder relative to the cwd, output them here",args:{template:"folders"}},{name:"--mutex",description:"Use a mutex to ensure only one yarn instance is executing",args:[{name:"type",suggestions:[{name:":"}]},{name:"specifier",suggestions:[{name:":"}]}]},{name:"--network-concurrency",description:"Maximum number of concurrent network requests",args:{name:"number"}},{name:"--network-timeout",description:"TCP timeout for network requests",args:{name:"milliseconds"}},{name:"--no-bin-links",description:"Don't generate bin links when setting up packages"},{name:"--no-default-rc",description:"Prevent Yarn from automatically detecting yarnrc and npmrc files"},{name:"--no-lockfile",description:"Don't read or generate a lockfile"},{name:"--non-interactive",description:"Do not show interactive prompts"},{name:"--no-node-version-check",description:"Do not warn when using a potentially unsupported Node version"},{name:"--no-progress",description:"Disable progress bar"},{name:"--offline",description:"Trigger an error if any required dependencies are not available in local cache"},{name:"--otp",description:"One-time password for two factor authentication",args:{name:"otpcode"}},{name:"--prefer-offline",description:"Use network only if dependencies are not available in local cache"},{name:"--preferred-cache-folder",description:"Specify a custom folder to store the yarn cache if possible",args:{template:"folders"}},{name:["--prod","--production"],description:"",args:{}},{name:"--proxy",description:"",args:{name:"host"}},{name:"--pure-lockfile",description:"Don't generate a lockfile"},{name:"--registry",description:"Override configuration registry",args:{name:"url"}},{name:["-s","--silent"],description:"Skip Yarn console logs, other types of logs (script output) will be printed"},{name:"--scripts-prepend-node-path",description:"Prepend the node executable dir to the PATH in scripts",args:{suggestions:[{name:"true"},{name:"false"}]}},{name:"--skip-integrity-check",description:"Run install without checking if node_modules is installed"},{name:"--strict-semver",description:""},...p,{name:["-v","--version"],description:"Output the version number"},{name:["-h","--help"],description:"Output usage information"}],subcommands:[{name:"add",description:"Installs a package and any packages that it depends on",args:{name:"package",generators:y,debounce:!0,isVariadic:!0},options:[...p,{name:["-W","--ignore-workspace-root-check"],description:"Required to run yarn add inside a workspace root"},{name:["-D","--dev"],description:"Save package to your `devDependencies`"},{name:["-P","--peer"],description:"Save package to your `peerDependencies`"},{name:["-O","--optional"],description:"Save package to your `optionalDependencies`"},{name:["-E","--exact"],description:"Install exact version",dependsOn:["--latest"]},{name:["-T","--tilde"],description:"Install most recent release with the same minor version"},{name:["-A","--audit"],description:"Run vulnerability audit on installed packages"},{name:["-h","--help"],description:"Output usage information"}]},{name:"audit",description:"Perform a vulnerability audit against the installed packages",options:[{name:"--summary",description:"Only print the summary"},{name:"--groups",description:"Only audit dependencies from listed groups. Default: devDependencies, dependencies, optionalDependencies",args:{name:"group_name",isVariadic:!0}},{name:"--level",description:"Only print advisories with severity greater than or equal to one of the following: info|low|moderate|high|critical. Default: info",args:{name:"severity",suggestions:[{name:"info"},{name:"low"},{name:"moderate"},{name:"high"},{name:"critical"}]}},{name:["-h","--help"],description:"Output usage information"}]},{name:"autoclean",description:"Cleans and removes unnecessary files from package dependencies",options:[{name:["-h","--help"],description:"Output usage information"},{name:["-i","--init"],description:"Creates the .yarnclean file if it does not exist, and adds the default entries"},{name:["-f","--force"],description:"If a .yarnclean file exists, run the clean process"}]},{name:"bin",description:"Displays the location of the yarn bin folder",options:[{name:["-h","--help"],description:"Output usage information"}]},{name:"cache",description:"Yarn cache list will print out every cached package",options:[...p,{name:["-h","--help"],description:"Output usage information"}],subcommands:[{name:"clean",description:"Clear global cache"},{name:"dir",description:"Print yarn\u2019s global cache path"},{name:"list",description:"Print out every cached package",options:[{name:"--pattern",description:"Filter cached packages by pattern",args:{name:"pattern"}}]}]},{name:"config",description:"Configure yarn",options:[{name:["-h","--help"],description:"Output usage information"}],subcommands:[{name:"set",description:"Sets the config key to a certain value",options:[{name:["-g","--global"],description:"Set global config"}]},{name:"get",description:"Print the value for a given key",args:{generators:L}},{name:"delete",description:"Deletes a given key from the config",args:{generators:L}},{name:"list",description:"Displays the current configuration"}]},{name:"create",description:"Creates new projects from any create-* starter kits",args:{name:"cli",generators:K,loadSpec:async e=>({name:"create-"+e,type:"global"}),isCommand:!0},options:[...p,{name:["-h","--help"],description:"Output usage information"}]},{name:"exec",description:"",options:[{name:["-h","--help"],description:"Output usage information"}]},{name:"generate-lock-entry",description:"Generates a lock file entry",options:[{name:"--use-manifest",description:"Specify which manifest file to use for generating lock entry",args:{template:"filepaths"}},{name:"--resolved",description:"Generate from <*.tgz>#<hash>",args:{template:"filepaths"}},{name:["-h","--help"],description:"Output usage information"}]},{name:"global",description:"Manage yarn globally",subcommands:[{name:"add",description:"Install globally packages on your operating system",args:{name:"package",generators:y,debounce:!0,isVariadic:!0}},{name:"bin",description:"Displays the location of the yarn global bin folder"},{name:"dir",description:"Displays the location of the global installation folder"},{name:"ls",description:"List globally installed packages (deprecated)"},{name:"list",description:"List globally installed packages"},{name:"remove",description:"Remove globally installed packages",args:{name:"package",filterStrategy:"fuzzy",generators:H,isVariadic:!0},options:[...p,{name:["-W","--ignore-workspace-root-check"],description:"Required to run yarn remove inside a workspace root"},{name:["-h","--help"],description:"Output usage information"}]},{name:"upgrade",description:"Upgrade globally installed packages",options:[...p,{name:["-S","--scope"],description:"Upgrade packages under the specified scope",args:{name:"scope"}},{name:["-L","--latest"],description:"List the latest version of packages"},{name:["-E","--exact"],description:"Install exact version. Only used when --latest is specified",dependsOn:["--latest"]},{name:["-P","--pattern"],description:"Upgrade packages that match pattern",args:{name:"pattern"}},{name:["-T","--tilde"],description:"Install most recent release with the same minor version. Only used when --latest is specified"},{name:["-C","--caret"],description:"Install most recent release with the same major version. Only used when --latest is specified",dependsOn:["--latest"]},{name:["-A","--audit"],description:"Run vulnerability audit on installed packages"},{name:["-h","--help"],description:"Output usage information"}]},{name:"upgrade-interactive",description:"Display the outdated packages before performing any upgrade",options:[{name:"--latest",description:"Use the version tagged latest in the registry"}]}],options:[...p,{name:"--prefix",description:"Bin prefix to use to install binaries",args:{name:"prefix"}},{name:"--latest",description:"Bin prefix to use to install binaries"},{name:["-h","--help"],description:"Output usage information"}]},{name:"help",description:"Output usage information"},{name:"import",description:"Generates yarn.lock from an npm package-lock.json file"},{name:"info",description:"Show information about a package"},{name:"init",description:"Interactively creates or updates a package.json file",options:[...p,{name:["-y","--yes"],description:"Use default options"},{name:["-p","--private"],description:"Use default options and private true"},{name:["-i","--install"],description:"Install a specific Yarn release",args:{name:"version"}},{name:"-2",description:"Generates the project using Yarn 2"},{name:["-h","--help"],description:"Output usage information"}]},{name:"install",description:"Install all the dependencies listed within package.json",options:[...p,{name:["-A","--audit"],description:"Run vulnerability audit on installed packages"},{name:["-h","--help"],description:"Output usage information"}]},{name:"licenses",description:"",subcommands:[{name:"list",description:"List licenses for installed packages"},{name:"generate-disclaimer",description:"List of licenses from all the packages"}]},{name:"link",description:"Symlink a package folder during development",args:{isOptional:!0,name:"package"},options:[...p,{name:["-h","--help"],description:"Output usage information"}]},{name:"list",description:"Lists all dependencies for the current working directory",options:[{name:"--depth",description:"Restrict the depth of the dependencies"},{name:"--pattern",description:"Filter the list of dependencies by the pattern"}]},{name:"login",description:"Store registry username and email"},{name:"logout",description:"Clear registry username and email"},{name:"node",description:""},{name:"outdated",description:"Checks for outdated package dependencies",options:[...p,{name:["-h","--help"],description:"Output usage information"}]},{name:"owner",description:"Manage package owners",subcommands:[{name:"list",description:"Lists all of the owners of a package",args:{name:"package"}},{name:"add",description:"Adds the user as an owner of the package",args:{name:"package"}},{name:"remove",description:"Removes the user as an owner of the package",args:[{name:"user"},{name:"package"}]}]},{name:"pack",description:"Creates a compressed gzip archive of package dependencies",options:[{name:"--filename",description:"Creates a compressed gzip archive of package dependencies and names the file filename"}]},{name:"policies",description:"Defines project-wide policies for your project",subcommands:[{name:"set-version",description:"Will download the latest stable release",options:[{name:"--rc",description:"Download the latest rc release"}]}]},{name:"publish",description:"Publishes a package to the npm registry",args:{name:"Tarball or Folder",template:"folders"},options:[...p,{name:["-h","--help"],description:"Output usage information"},{name:"--major",description:"Auto-increment major version number"},{name:"--minor",description:"Auto-increment minor version number"},{name:"--patch",description:"Auto-increment patch version number"},{name:"--premajor",description:"Auto-increment premajor version number"},{name:"--preminor",description:"Auto-increment preminor version number"},{name:"--prepatch",description:"Auto-increment prepatch version number"},{name:"--prerelease",description:"Auto-increment prerelease version number"},{name:"--preid",description:"Add a custom identifier to the prerelease",args:{name:"preid"}},{name:"--message",description:"Message",args:{name:"message"}},{name:"--no-git-tag-version",description:"No git tag version"},{name:"--no-commit-hooks",description:"Bypass git hooks when committing new version"},{name:"--access",description:"Access",args:{name:"access"}},{name:"--tag",description:"Tag",args:{name:"tag"}}]},{name:"remove",description:"Remove installed package",args:{filterStrategy:"fuzzy",generators:f,isVariadic:!0},options:[...p,{name:["-W","--ignore-workspace-root-check"],description:"Required to run yarn remove inside a workspace root"},{name:["-h","--help"],description:"Output usage information"}]},{name:"run",description:"Runs a defined package script",options:[...p,{name:["-h","--help"],description:"Output usage information"}],args:[{name:"script",description:"Script to run from your package.json",generators:D,filterStrategy:"fuzzy",parserDirectives:U,isCommand:!0},{name:"env",suggestions:["env"],description:"Lists environment variables available to scripts",isOptional:!0}]},{name:"tag",description:"Add, remove, or list tags on a package"},{name:"team",description:"Maintain team memberships",subcommands:[{name:"create",description:"Create a new team",args:{name:"<scope:team>"}},{name:"destroy",description:"Destroys an existing team",args:{name:"<scope:team>"}},{name:"add",description:"Add a user to an existing team",args:[{name:"<scope:team>"},{name:"<user>"}]},{name:"remove",description:"Remove a user from a team they belong to",args:{name:"<scope:team> <user>"}},{name:"list",description:"If performed on an organization name, will return a list of existing teams under that organization. If performed on a team, it will instead return a list of all users belonging to that particular team",args:{name:"<scope>|<scope:team>"}}]},{name:"unlink",description:"Unlink a previously created symlink for a package"},{name:"unplug",description:""},{name:"upgrade",description:"Upgrades packages to their latest version based on the specified range",args:{name:"package",generators:f,filterStrategy:"fuzzy",isVariadic:!0,isOptional:!0},options:[...p,{name:["-S","--scope"],description:"Upgrade packages under the specified scope",args:{name:"scope"}},{name:["-L","--latest"],description:"List the latest version of packages"},{name:["-E","--exact"],description:"Install exact version. Only used when --latest is specified",dependsOn:["--latest"]},{name:["-P","--pattern"],description:"Upgrade packages that match pattern",args:{name:"pattern"}},{name:["-T","--tilde"],description:"Install most recent release with the same minor version. Only used when --latest is specified"},{name:["-C","--caret"],description:"Install most recent release with the same major version. Only used when --latest is specified",dependsOn:["--latest"]},{name:["-A","--audit"],description:"Run vulnerability audit on installed packages"},{name:["-h","--help"],description:"Output usage information"}]},{name:"upgrade-interactive",description:"Upgrades packages in interactive mode",options:[{name:"--latest",description:"Use the version tagged latest in the registry"}]},{name:"version",description:"Update version of your package",options:[...p,{name:["-h","--help"],description:"Output usage information"},{name:"--new-version",description:"New version",args:{name:"version"}},{name:"--major",description:"Auto-increment major version number"},{name:"--minor",description:"Auto-increment minor version number"},{name:"--patch",description:"Auto-increment patch version number"},{name:"--premajor",description:"Auto-increment premajor version number"},{name:"--preminor",description:"Auto-increment preminor version number"},{name:"--prepatch",description:"Auto-increment prepatch version number"},{name:"--prerelease",description:"Auto-increment prerelease version number"},{name:"--preid",description:"Add a custom identifier to the prerelease",args:{name:"preid"}},{name:"--message",description:"Message",args:{name:"message"}},{name:"--no-git-tag-version",description:"No git tag version"},{name:"--no-commit-hooks",description:"Bypass git hooks when committing new version"},{name:"--access",description:"Access",args:{name:"access"}},{name:"--tag",description:"Tag",args:{name:"tag"}}]},{name:"versions",description:"Displays version information of the currently installed Yarn, Node.js, and its dependencies"},{name:"why",description:"Show information about why a package is installed",args:{name:"package",filterStrategy:"fuzzy",generators:X},options:[...p,{name:["-h","--help"],description:"Output usage information"},{name:"--peers",description:"Print the peer dependencies that match the specified name"},{name:["-R","--recursive"],description:"List, for each workspace, what are all the paths that lead to the dependency"}]},{name:"workspace",description:"Manage workspace",filterStrategy:"fuzzy",generateSpec:async(e,n)=>{let i=(await n({command:"yarn",args:["--version"]})).stdout.startsWith("1."),a=async()=>{let{stdout:s}=await n({command:"yarn",args:["workspaces","info"]}),d=s.indexOf("{"),l=s.lastIndexOf("}");return Object.entries(JSON.parse(s.slice(d,l+1))).map(([w,{location:u}])=>({name:w,location:u}))},r=async()=>(await n({command:"yarn",args:["workspaces","list","--json"]})).stdout.split(`
`).map(d=>JSON.parse(d.trim()));try{return{name:"workspace",subcommands:(i?await a():await r()).map(({name:l,location:w})=>({name:l,description:"Workspaces",args:{name:"script",generators:{cache:{strategy:"stale-while-revalidate",ttl:6e4},script:["cat",`${w}/package.json`],postProcess:function(u){if(u.trim()=="")return[];try{let C=JSON.parse(u).scripts;if(C)return Object.keys(C).map(O=>({name:O}))}catch{}return[]}}}}))}}catch(s){console.error(s)}return{name:"workspaces"}}},{name:"workspaces",description:"Show information about your workspaces",options:[{name:"subcommand",description:"",args:{suggestions:[{name:"info"},{name:"run"}]}},{name:"flags",description:""}]},{name:"set",description:"Set global Yarn options",subcommands:[{name:"resolution",description:"Enforce a package resolution",args:[{name:"descriptor",description:"A descriptor for the package, in the form of 'lodash@npm:^1.2.3'"},{name:"resolution",description:"The version of the package to resolve"}],options:[{name:["-s","--save"],description:"Persist the resolution inside the top-level manifest"}]},{name:"version",description:"Lock the Yarn version used by the project",args:{name:"version",description:"Use the specified version, which can also be a Yarn 2 build (e.g 2.0.0-rc.30) or a Yarn 1 build (e.g 1.22.1)",template:"filepaths",suggestions:[{name:"from-sources",insertValue:"from sources"},"latest","canary","classic","self"]},options:[{name:"--only-if-needed",description:"Only lock the Yarn version if it isn't already locked"}]}]}]};var Q=e=>e.startsWith("warning:")||e.startsWith("error:")?e.split(`
`).slice(1).join(`
`):e,Z={script:["git","branch","--no-color"],postProcess:function(e){let n=Q(e);return n.startsWith("fatal:")?[]:n.split(`
`).map(t=>{let i=t.trim(),a=t.match(/\S+/g);if(a.length>1){if(a[0]=="*")return{name:t.replace("*","").trim(),description:"Current branch",icon:"\u2B50\uFE0F"};a[0]=="+"&&(i=t.replace("+","").trim())}return{name:i,description:"Branch",icon:"fig://icon?type=git"}})}},ee={script:["pnpm","ls"],postProcess:function(e){return e.includes("ERR_PNPM")?[]:e.split(`
`).slice(3).filter(t=>!!t&&!t.toLowerCase().includes("dependencies")&&!t.includes("link:")).map(t=>t.replace(/\s/,"@")).map(t=>({name:t,icon:"fig://icon?type=package"}))}},k={name:"--filter",args:{template:"filepaths",name:"Filepath / Package",description:"To only select packages under the specified directory, you may specify any absolute path, typically in POSIX format"},description:`Filtering allows you to restrict commands to specific subsets of packages.
pnpm supports a rich selector syntax for picking packages by name or by relation.
More details: https://pnpm.io/filtering`},N=[{name:"--offline",description:"If true, pnpm will use only packages already available in the store. If a package won't be found locally, the installation will fail"},{name:"--prefer-offline",description:"If true, staleness checks for cached data will be bypassed, but missing data will be requested from the server. To force full offline mode, use --offline"},{name:"--ignore-scripts",description:"Do not execute any scripts defined in the project package.json and its dependencies"},{name:"--reporter",description:"Allows you to choose the reporter that will log debug info to the terminal about the installation progress",args:{name:"Reporter Type",suggestions:["silent","default","append-only","ndjson"]}}],V=[{name:["-P","--save-prod"],description:`Pnpm will not install any package listed in devDependencies if the NODE_ENV environment variable is set to production.
Use this flag to instruct pnpm to ignore NODE_ENV and take its production status from this flag instead`},{name:["-D","--save-dev"],description:"Only devDependencies are installed regardless of the NODE_ENV"},{name:"--no-optional",description:"OptionalDependencies are not installed"},{name:"--lockfile-only",description:"When used, only updates pnpm-lock.yaml and package.json instead of checking node_modules and downloading dependencies"},{name:"--frozen-lockfile",description:"If true, pnpm doesn't generate a lockfile and fails to install if the lockfile is out of sync with the manifest / an update is needed or no lockfile is present"},{name:"--use-store-server",description:"Starts a store server in the background. The store server will keep running after installation is done. To stop the store server, run pnpm server stop"},{name:"--shamefully-hoist",description:"Creates a flat node_modules structure, similar to that of npm or yarn. WARNING: This is highly discouraged"}],_=[{name:["-P","--save-prod"],description:"Install the specified packages as regular dependencies"},{name:["-D","--save-dev"],description:"Install the specified packages as devDependencies"},{name:["-O","--save-optional"],description:"Install the specified packages as optionalDependencies"},{name:"--no-save",description:"Prevents saving to `dependencies`"},{name:["-E","--save-exact"],description:"Saved dependencies will be configured with an exact version rather than using pnpm's default semver range operator"},{name:"--save-peer",description:"Using --save-peer will add one or more packages to peerDependencies and install them as dev dependencies"},{name:["--ignore-workspace-root-check","-W#"],description:`Adding a new dependency to the root workspace package fails, unless the --ignore-workspace-root-check or -W flag is used.
For instance, pnpm add debug -W`},{name:["--global","-g"],description:"Install a package globally"},{name:"--workspace",description:"Only adds the new dependency if it is found in the workspace"},k],ne=[{name:"add",description:"Installs a package and any packages that it depends on. By default, any new package is installed as a production dependency",args:{name:"package",generators:y,debounce:!0,isVariadic:!0},options:[...N,..._]},{name:["install","i"],description:`Pnpm install is used to install all dependencies for a project.
In a CI environment, installation fails if a lockfile is present but needs an update.
Inside a workspace, pnpm install installs all dependencies in all the projects.
If you want to disable this behavior, set the recursive-install setting to false`,async generateSpec(e){let n=e.filter(t=>t.trim()!==""&&!t.startsWith("-")).length>2;return{name:"install",options:[...N,...n?_:V]}},args:{name:"package",isOptional:!0,generators:y,debounce:!0,isVariadic:!0}},{name:["install-test","it"],description:"Runs pnpm install followed immediately by pnpm test. It takes exactly the same arguments as pnpm install",options:[...N,...V]},{name:["update","upgrade","up"],description:`Pnpm update updates packages to their latest version based on the specified range.
When used without arguments, updates all dependencies. You can use patterns to update specific dependencies`,args:{name:"Package",isOptional:!0,filterStrategy:"fuzzy",generators:f,isVariadic:!0},options:[{name:["--recursive","-r"],description:"Concurrently runs update in all subdirectories with a package.json (excluding node_modules)"},{name:["--latest","-L"],description:"Ignores the version range specified in package.json. Instead, the version specified by the latest tag will be used (potentially upgrading the packages across major versions)"},{name:"--global",description:"Update global packages"},{name:["-P","--save-prod"],description:"Only update packages in dependencies and optionalDependencies"},{name:["-D","--save-dev"],description:"Only update packages in devDependencies"},{name:"--no-optional",description:"Don't update packages in optionalDependencies"},{name:["--interactive","-i"],description:"Show outdated dependencies and select which ones to update"},{name:"--workspace",description:`Tries to link all packages from the workspace. Versions are updated to match the versions of packages inside the workspace.
If specific packages are updated, the command will fail if any of the updated dependencies are not found inside the workspace. For instance, the following command fails if express is not a workspace package: pnpm up -r --workspace express`},k]},{name:["remove","rm","uninstall","un"],description:"Removes packages from node_modules and from the project's package.json",args:{name:"Package",filterStrategy:"fuzzy",generators:f,isVariadic:!0},options:[{name:["--recursive","-r"],description:`When used inside a workspace, removes a dependency (or dependencies) from every workspace package.
When used not inside a workspace, removes a dependency (or dependencies) from every package found in subdirectories`},{name:"--global",description:"Remove a global package"},{name:["-P","--save-prod"],description:"Only remove the dependency from dependencies"},{name:["-D","--save-dev"],description:"Only remove the dependency from devDependencies"},{name:["--save-optional","-O"],description:"Only remove the dependency from optionalDependencies"},k]},{name:["link","ln"],description:"Makes the current local package accessible system-wide, or in another location",args:[{name:"Package",filterStrategy:"fuzzy",generators:f,isVariadic:!0},{template:"filepaths"}],options:[{name:["--dir","-C"],description:"Changes the link location to <dir>"},{name:"--global",description:"Links the specified package (<pkg>) from global node_modules to the node_nodules of package from where this command was executed or specified via --dir option"}]},{name:"unlink",description:`Unlinks a system-wide package (inverse of pnpm link).
If called without arguments, all linked dependencies will be unlinked.
This is similar to yarn unlink, except pnpm re-installs the dependency after removing the external link`,args:[{name:"Package",filterStrategy:"fuzzy",generators:f,isVariadic:!0},{template:"filepaths"}],options:[{name:["--recursive","-r"],description:"Unlink in every package found in subdirectories or in every workspace package, when executed inside a workspace"},k]},{name:"import",description:"Pnpm import generates a pnpm-lock.yaml from an npm package-lock.json (or npm-shrinkwrap.json) file"},{name:["rebuild","rb"],description:"Rebuild a package",args:[{name:"Package",filterStrategy:"fuzzy",generators:f,isVariadic:!0},{template:"filepaths"}],options:[{name:["--recursive","-r"],description:"This command runs the pnpm rebuild command in every package of the monorepo"},k]},{name:"prune",description:"Removes unnecessary packages",options:[{name:"--prod",description:"Remove the packages specified in devDependencies"},{name:"--no-optional",description:"Remove the packages specified in optionalDependencies"}]},{name:"fetch",description:"EXPERIMENTAL FEATURE: Fetch packages from a lockfile into virtual store, package manifest is ignored: https://pnpm.io/cli/fetch",options:[{name:"--prod",description:"Development packages will not be fetched"},{name:"--dev",description:"Only development packages will be fetched"}]},{name:"patch",description:"This command will cause a package to be extracted in a temporary directory intended to be editable at will",args:{name:"package",generators:ee},options:[{name:"--edit-dir",description:"The package that needs to be patched will be extracted to this directory"}]},{name:"patch-commit",args:{name:"dir"},description:"Generate a patch out of a directory"},{name:"patch-remove",args:{name:"package",isVariadic:!0}}],te=[{name:["run","run-script"],description:"Runs a script defined in the package's manifest file",args:{name:"Scripts",filterStrategy:"fuzzy",generators:D,isVariadic:!0},options:[{name:["-r","--recursive"],description:`This runs an arbitrary command from each package's "scripts" object. If a package doesn't have the command, it is skipped. If none of the packages have the command, the command fails`},{name:"--if-present",description:"You can use the --if-present flag to avoid exiting with a non-zero exit code when the script is undefined. This lets you run potentially undefined scripts without breaking the execution chain"},{name:"--parallel",description:"Completely disregard concurrency and topological sorting, running a given script immediately in all matching packages with prefixed streaming output. This is the preferred flag for long-running processes over many packages, for instance, a lengthy build process"},{name:"--stream",description:"Stream output from child processes immediately, prefixed with the originating package directory. This allows output from different packages to be interleaved"},k]},{name:"exec",description:`Execute a shell command in scope of a project.
node_modules/.bin is added to the PATH, so pnpm exec allows executing commands of dependencies`,args:{name:"Scripts",filterStrategy:"fuzzy",generators:f,isVariadic:!0},options:[{name:["-r","--recursive"],description:`Execute the shell command in every project of the workspace.
The name of the current package is available through the environment variable PNPM_PACKAGE_NAME (supported from pnpm v2.22.0 onwards)`},{name:"--parallel",description:"Completely disregard concurrency and topological sorting, running a given script immediately in all matching packages with prefixed streaming output. This is the preferred flag for long-running processes over many packages, for instance, a lengthy build process"},k]},{name:["test","t","tst"],description:`Runs an arbitrary command specified in the package's test property of its scripts object.
The intended usage of the property is to specify a command that runs unit or integration testing for your program`},{name:"start",description:`Runs an arbitrary command specified in the package's start property of its scripts object. If no start property is specified on the scripts object, it will attempt to run node server.js as a default, failing if neither are present.
The intended usage of the property is to specify a command that starts your program`}],ae=[{name:"audit",description:`Checks for known security issues with the installed packages.
If security issues are found, try to update your dependencies via pnpm update.
If a simple update does not fix all the issues, use overrides to force versions that are not vulnerable.
For instance, if lodash@<2.1.0 is vulnerable, use overrides to force lodash@^2.1.0.
Details at: https://pnpm.io/cli/audit`,options:[{name:"--audit-level",description:"Only print advisories with severity greater than or equal to <severity>",args:{name:"Audit Level",default:"low",suggestions:["low","moderate","high","critical"]}},{name:"--fix",description:"Add overrides to the package.json file in order to force non-vulnerable versions of the dependencies"},{name:"--json",description:"Output audit report in JSON format"},{name:["--dev","-D"],description:"Only audit dev dependencies"},{name:["--prod","-P"],description:"Only audit production dependencies"},{name:"--no-optional",description:"Don't audit optionalDependencies"},{name:"--ignore-registry-errors",description:"If the registry responds with a non-200 status code, the process should exit with 0. So the process will fail only if the registry actually successfully responds with found vulnerabilities"}]},{name:["list","ls"],description:`This command will output all the versions of packages that are installed, as well as their dependencies, in a tree-structure.
Positional arguments are name-pattern@version-range identifiers, which will limit the results to only the packages named. For example, pnpm list "babel-*" "eslint-*" semver@5`,options:[{name:["--recursive","-r"],description:"Perform command on every package in subdirectories or on every workspace package, when executed inside a workspace"},{name:"--json",description:"Log output in JSON format"},{name:"--long",description:"Show extended information"},{name:"--parseable",description:"Outputs package directories in a parseable format instead of their tree view"},{name:"--global",description:"List packages in the global install directory instead of in the current project"},{name:"--depth",description:`Max display depth of the dependency tree.
pnpm ls --depth 0 will list direct dependencies only. pnpm ls --depth -1 will list projects only. Useful inside a workspace when used with the -r option`,args:{name:"number"}},{name:["--dev","-D"],description:"Only list dev dependencies"},{name:["--prod","-P"],description:"Only list production dependencies"},{name:"--no-optional",description:"Don't list optionalDependencies"},k]},{name:"outdated",description:"Checks for outdated packages. The check can be limited to a subset of the installed packages by providing arguments (patterns are supported)",options:[{name:["--recursive","-r"],description:"Check for outdated dependencies in every package found in subdirectories, or in every workspace package when executed inside a workspace"},{name:"--long",description:"Print details"},{name:"--global",description:"List outdated global packages"},{name:"--no-table",description:"Prints the outdated dependencies in a list format instead of the default table. Good for small consoles"},{name:"--compatible",description:"Prints only versions that satisfy specifications in package.json"},{name:["--dev","-D"],description:"Only list dev dependencies"},{name:["--prod","-P"],description:"Only list production dependencies"},{name:"--no-optional",description:"Doesn't check optionalDependencies"}]},{name:"why",description:"Shows all packages that depend on the specified package",args:{name:"Scripts",filterStrategy:"fuzzy",generators:f,isVariadic:!0},options:[{name:["--recursive","-r"],description:"Show the dependency tree for the specified package on every package in subdirectories or on every workspace package when executed inside a workspace"},{name:"--json",description:"Log output in JSON format"},{name:"--long",description:"Show verbose output"},{name:"--parseable",description:"Show parseable output instead of tree view"},{name:"--global",description:"List packages in the global install directory instead of in the current project"},{name:["--dev","-D"],description:"Only display the dependency tree for packages in devDependencies"},{name:["--prod","-P"],description:"Only display the dependency tree for packages in dependencies"},k]}],G=[{name:"publish",description:`Publishes a package to the registry.
When publishing a package inside a workspace, the LICENSE file from the root of the workspace is packed with the package (unless the package has a license of its own).
You may override some fields before publish, using the publishConfig field in package.json. You also can use the publishConfig.directory to customize the published subdirectory (usually using third party build tools).
When running this command recursively (pnpm -r publish), pnpm will publish all the packages that have versions not yet published to the registry`,args:{name:"Branch",generators:Z},options:[{name:"--tag",description:"Publishes the package with the given tag. By default, pnpm publish updates the latest tag",args:{name:"<tag>"}},{name:"--dry-run",description:"Does everything a publish would do except actually publishing to the registry"},{name:"--ignore-scripts",description:"Ignores any publish related lifecycle scripts (prepublishOnly, postpublish, and the like)"},{name:"--no-git-checks",description:"Don't check if current branch is your publish branch, clean, and up-to-date"},{name:"--access",description:"Tells the registry whether the published package should be public or restricted",args:{name:"Type",suggestions:["public","private"]}},{name:"--force",description:"Try to publish packages even if their current version is already found in the registry"},{name:"--report-summary",description:"Save the list of published packages to pnpm-publish-summary.json. Useful when some other tooling is used to report the list of published packages"},k]},{name:["recursive","m","multi","-r"],description:"Runs a pnpm command recursively on all subdirectories in the package or every available workspace",options:[{name:"--link-workspace-packages",description:`Link locally available packages in workspaces of a monorepo into node_modules instead of re-downloading them from the registry. This emulates functionality similar to yarn workspaces.
When this is set to deep, local packages can also be linked to subdependencies.
Be advised that it is encouraged instead to use npmrc for this setting, to enforce the same behaviour in all environments. This option exists solely so you may override that if necessary`,args:{name:"bool or `deep`",suggestions:["dee["]}},{name:"--workspace-concurrency",description:"Set the maximum number of tasks to run simultaneously. For unlimited concurrency use Infinity",args:{name:"<number>"}},{name:"--bail",description:"Stops when a task throws an error"},{name:"--no-bail",description:"Don't stop when a task throws an error"},{name:"--sort",description:"Packages are sorted topologically (dependencies before dependents)"},{name:"--no-sort",description:"Disable packages sorting"},{name:"--reverse",description:"The order of packages is reversed"},k]},{name:"server",description:"Manage a store server",subcommands:[{name:"start",description:"Starts a server that performs all interactions with the store. Other commands will delegate any store-related tasks to this server",options:[{name:"--background",description:"Runs the server in the background, similar to daemonizing on UNIX systems"},{name:"--network-concurrency",description:"The maximum number of network requests to process simultaneously",args:{name:"number"}},{name:"--protocol",description:"The communication protocol used by the server. When this is set to auto, IPC is used on all systems except for Windows, which uses TCP",args:{name:"Type",suggestions:["auto","tcp","ipc"]}},{name:"--port",description:"The port number to use when TCP is used for communication. If a port is specified and the protocol is set to auto, regardless of system type, the protocol is automatically set to use TCP",args:{name:"port number"}},{name:"--store-dir",description:"The directory to use for the content addressable store",args:{name:"Path",template:"filepaths"}},{name:"--lock",description:"Set to make the package store immutable to external processes while the server is running or not"},{name:"--no-lock",description:"Set to make the package store mutable to external processes while the server is running or not"},{name:"--ignore-stop-requests",description:"Prevents you from stopping the server using pnpm server stop"},{name:"--ignore-upload-requests",description:"Prevents creating a new side effect cache during install"}]},{name:"stop",description:"Stops the store server"},{name:"status",description:"Prints information about the running server"}]},{name:"store",description:"Managing the package store",subcommands:[{name:"status",description:`Checks for modified packages in the store.
Returns exit code 0 if the content of the package is the same as it was at the time of unpacking`},{name:"add",description:`Functionally equivalent to pnpm add,
except this adds new packages to the store directly without modifying any projects or files outside of the store`},{name:"prune",description:`Removes orphan packages from the store.
Pruning the store will save disk space, however may slow down future installations involving pruned packages.
Ultimately, it is a safe operation, however not recommended if you have orphaned packages from a package you intend to reinstall.
Please read the FAQ for more information on unreferenced packages and best practices.
Please note that this is prohibited when a store server is running`},{name:"path",description:"Returns the path to the active store directory"}]},{name:"init",description:"Creates a basic package.json file in the current directory, if it doesn't exist already"},{name:"doctor",description:"Checks for known common issues with pnpm configuration"}],W=[...ne,...ae,...te,...G],M=["add","exec","install","list","outdated","publish","rebuild","remove","run","test","unlink","update","why"],ie=W.filter(e=>Array.isArray(e.name)?e.name.some(n=>M.includes(n)):M.includes(e.name));G[1].subcommands=ie;var se=[{name:["-C","--dir"],args:{name:"path",template:"folders"},isPersistent:!0,description:"Run as if pnpm was started in <path> instead of the current working directory"},{name:["-w","--workspace-root"],args:{name:"workspace"},isPersistent:!0,description:"Run as if pnpm was started in the root of the <workspace> instead of the current working directory"},{name:["-h","--help"],isPersistent:!0,description:"Output usage information"},{name:["-v","--version"],description:"Show pnpm's version"}],oe={name:"pnpm",description:"Fast, disk space efficient package manager",args:{name:"Scripts",filterStrategy:"fuzzy",generators:D,isVariadic:!0},filterStrategy:"fuzzy",generateSpec:async(e,n)=>{let{script:t,postProcess:i}=f;return{name:"pnpm",subcommands:i((await n({command:t[0],args:t.slice(1)})).stdout,e).map(({name:s})=>s).filter(s=>R.has(s)).map(s=>({name:s,loadSpec:s,icon:"fig://icon?type=package"}))}},subcommands:W,options:se},ue=oe;export{ue as default};
