var Z=Object.create;var k=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var j=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ee(t))!ne.call(e,s)&&s!==n&&k(e,s,{get:()=>t[s],enumerable:!(i=Y(t,s))||i.enumerable});return e};var se=(e,t,n)=>(n=e!=null?Z(te(e)):{},ie(t||!e||!e.__esModule?k(n,"default",{value:e,enumerable:!0}):n,e));var z=j(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.shellExpand=I.ensureTrailingSlash=void 0;var re=e=>e.endsWith("/")?e:`${e}/`;I.ensureTrailingSlash=re;var ae=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,oe=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,s=>{var r;let o=s.slice(1);return(r=t[o])!==null&&r!==void 0?r:s}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(s,r,o)=>{var l,u;return(u=(l=t[r])!==null&&l!==void 0?l:o)!==null&&u!==void 0?u:s}),ce=(e,t)=>{var n;let{environmentVariables:i}=t;return oe(ae(e,(n=i?.HOME)!==null&&n!==void 0?n:"~"),i)};I.shellExpand=ce});var $=j(y=>{"use strict";var le=y&&y.__awaiter||function(e,t,n,i){function s(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(a){try{c(i.next(a))}catch(d){o(d)}}function u(a){try{c(i.throw(a))}catch(d){o(d)}}function c(a){a.done?r(a.value):s(a.value).then(l,u)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.filepaths=y.folders=y.getCurrentInsertedDirectory=y.sortFilesAlphabetically=void 0;var L=z();function N(e,t=[]){let n=t.map(s=>s.toLowerCase()),i=e.filter(s=>!n.includes(s.toLowerCase()));return[...i.filter(s=>!s.startsWith(".")).sort((s,r)=>s.localeCompare(r)),...i.filter(s=>s.startsWith(".")).sort((s,r)=>s.localeCompare(r)),"../"]}y.sortFilesAlphabetically=N;var ue=(e,t,n)=>{if(e===null)return"/";let i=(0,L.shellExpand)(t,n),s=i.slice(0,i.lastIndexOf("/")+1);return s===""?(0,L.ensureTrailingSlash)(e):s.startsWith("/")?s:`${(0,L.ensureTrailingSlash)(e)}${s}`};y.getCurrentInsertedDirectory=ue;function V(e={}){let{extensions:t=[],equals:n=[],matches:i,filterFolders:s=!1,editFileSuggestions:r,editFolderSuggestions:o,rootDirectory:l,showFolders:u="always"}=e,c=new Set(t),a=new Set(n),d=()=>t.length>0||n.length>0||i,m=(h=[])=>d()?h.filter(({name:p="",type:_})=>{if(!s&&_==="folder"||a.has(p)||i&&p.match(i))return!0;let[,...f]=p.split(".");if(f.length>=1){let b=f.length-1,O=f[b];do{if(c.has(O))return!0;b-=1,O=[f[b],O].join(".")}while(b>=0)}return!1}):h,w=(h=[])=>!r&&!o?h:h.map(p=>Object.assign(Object.assign({},p),(p.type==="file"?r:o)||{}));return{trigger:(h,p)=>{let _=h.lastIndexOf("/"),f=p.lastIndexOf("/");return _!==f?!0:_===-1&&f===-1?!1:h.slice(0,_)!==p.slice(0,f)},getQueryTerm:h=>h.slice(h.lastIndexOf("/")+1),custom:(h,p,_)=>le(this,void 0,void 0,function*(){var f;let{isDangerous:b,currentWorkingDirectory:O,searchTerm:g}=_,x=(f=(0,y.getCurrentInsertedDirectory)(l??O,g,_))!==null&&f!==void 0?f:"/";try{let P=yield p({command:"ls",args:["-1ApL"],cwd:x}),X=N(P.stdout.split(`
`),[".DS_Store"]),R=[];for(let q of X)if(q){let A=q.endsWith("/")?"folders":"filepaths";(A==="filepaths"&&u!=="only"||A==="folders"&&u!=="never")&&R.push({type:A==="filepaths"?"file":"folder",name:q,insertValue:q,isDangerous:b,context:{templateType:A}})}return w(m(R))}catch{return[]}})}}y.folders=Object.assign(()=>V({showFolders:"only"}),Object.freeze(V({showFolders:"only"})));y.filepaths=Object.assign(V,Object.freeze(V()))});var B=j(S=>{"use strict";var D=S&&S.__awaiter||function(e,t,n,i){function s(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(a){try{c(i.next(a))}catch(d){o(d)}}function u(a){try{c(i.throw(a))}catch(d){o(d)}}function c(a){a.done?r(a.value):s(a.value).then(l,u)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(S,"__esModule",{value:!0});S.keyValueList=S.keyValue=S.valueList=void 0;var K=new Map;function M(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function J(e,t,n){return D(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...n);return M(t,i)}if(typeof e[0]=="string"){let i=e.map(s=>({name:s}));return M(t,i)}return M(t,e)})}function E(e,t,n,i){return D(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let s=K.get(e);return s===void 0&&(s=yield J(e,t,i),K.set(e,s)),s}return J(e,t,i)})}function Q(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function W(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function C(e,t){let n=new Set(e);return t.filter(i=>{var s;return typeof i.name=="string"?!n.has(i.name):!(!((s=i.name)===null||s===void 0)&&s.some(r=>n.has(r)))})}function de({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:i=!1,allowRepeatedValues:s=!1}){return{trigger:(r,o)=>r.lastIndexOf(e)!==o.lastIndexOf(e),getQueryTerm:r=>r.slice(r.lastIndexOf(e)+e.length),custom:(...r)=>D(this,void 0,void 0,function*(){var o;let l=yield E(t,i?e:"",n,r);if(s)return l;let[u]=r,c=(o=u[u.length-1])===null||o===void 0?void 0:o.split(e);return C(c,l)})}}S.valueList=de;function fe({separator:e="=",keys:t=[],values:n=[],cache:i=!1,insertSeparator:s=!0}){return{trigger:(r,o)=>r.indexOf(e)!==o.indexOf(e),getQueryTerm:r=>r.slice(r.indexOf(e)+1),custom:(...r)=>D(this,void 0,void 0,function*(){let[o]=r,u=!o[o.length-1].includes(e),c=u?t:n,a=Q(u,i);return E(c,u&&s?e:"",a,r)})}}S.keyValue=fe;function he({separator:e="=",delimiter:t=",",keys:n=[],values:i=[],cache:s=!1,insertSeparator:r=!0,insertDelimiter:o=!1,allowRepeatedKeys:l=!1,allowRepeatedValues:u=!0}){return{trigger:(c,a)=>{let d=W(c,e,t),m=W(a,e,t);return d!==m},getQueryTerm:c=>{let a=W(c,e,t);return c.slice(a+1)},custom:(...c)=>D(this,void 0,void 0,function*(){let[a]=c,d=a[a.length-1],m=W(d,e,t),w=m===-1||d.slice(m,m+e.length)!==e,h=w?n:i,p=Q(w,s),f=yield E(h,w?r?e:"":o?t:"",p,c);if(w){if(l)return f;let O=d.split(t).map(g=>g.slice(0,g.indexOf(e)));return C(O,f)}if(u)return f;let b=d.split(t).map(O=>O.slice(O.indexOf(e)+e.length));return C(b,f)})}}S.keyValueList=he});var H=j(T=>{"use strict";var ge=T&&T.__awaiter||function(e,t,n,i){function s(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(a){try{c(i.next(a))}catch(d){o(d)}}function u(a){try{c(i.throw(a))}catch(d){o(d)}}function c(a){a.done?r(a.value):s(a.value).then(l,u)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.ai=void 0;var pe=4097,me=4,ye=.8,ve=pe*me*ye;function be({name:e,prompt:t,message:n,postProcess:i,temperature:s,splitOn:r}){return{scriptTimeout:15e3,custom:(o,l,u)=>ge(this,void 0,void 0,function*(){var c,a;let d=yield l({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let m=typeof t=="function"?yield t({tokens:o,executeCommand:l,generatorContext:u}):t,w=typeof n=="function"?yield n({tokens:o,executeCommand:l,generatorContext:u}):n;if(w===null||w.length===0)return console.warn("No message provided to AI generator"),[];let h=ve-((c=m?.length)!==null&&c!==void 0?c:0),p={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...m?[{role:"system",content:m}]:[],{role:"user",content:w.slice(0,h)}],temperature:s},_=JSON.stringify(p),f=yield l({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",_]}),b=JSON.parse(f.stdout);return(a=b?.choices.map(g=>{var x;return(x=g?.message)===null||x===void 0?void 0:x.content}).filter(g=>typeof g=="string").flatMap(g=>r?g.split(r).filter(x=>x.trim().length>0):[g]).map(g=>{if(i)return i(g);let x=g.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:x,insertValue:`'${x}'`,description:"Generated by Fig AI"}}))!==null&&a!==void 0?a:[]})}}T.ai=be});var U=j(v=>{"use strict";var _e=v&&v.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Oe=v&&v.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_e(t,e,n)};Object.defineProperty(v,"__esModule",{value:!0});v.ai=v.folders=v.filepaths=void 0;var G=$();Object.defineProperty(v,"filepaths",{enumerable:!0,get:function(){return G.filepaths}});Object.defineProperty(v,"folders",{enumerable:!0,get:function(){return G.folders}});Oe(B(),v);var we=H();Object.defineProperty(v,"ai",{enumerable:!0,get:function(){return we.ai}})});var F=se(U(),1),xe={name:"codesign",description:"Create and manipulate code signatures",options:[{name:"--all-architectures",description:"When verifying a code signature on code that has a universal ('fat') Mach-O binary, separately verify each architecture contained. This is the default unless overridden with the -a (--architecture) option"},{name:["-a","--architecture"],description:"When verifying or displaying signatures, explicitly select the Mach-O architecture given",args:{name:"architecture"}},{name:"--bundle-version",description:"When handling versioned bundles such as frameworks, explicitly specify the version to operate on",args:{name:"version-string"}},{name:["-d","--display"],description:"Display information about the code at the path(s) given"},{name:["-D","--detached"],description:"When signing, designates that a detached signature should be written to the specified file",args:{name:"file",template:"filepaths"}},{name:"--deep",description:"When signing a bundle, specifies that nested code content such as helpers, frameworks, and plug-ins, should be recursively signed in turn. Beware that all signing options you specify will apply, in turn, to such nested content"},{name:"--detached-database",description:"When signing, specifies that a detached signature should be generated as with the --detached option, but that the resulting signature should be written into a system database, from where it is made automatically available whenever apparently unsigned code is validated on the system"},{name:["-f","--force"],description:"When signing, causes codesign to replace any existing signature on the path(s) given"},{name:["-h","--hosting"],description:"Constructs and prints the hosting chain of a running program"},{name:["-i","--identifier"],description:"During signing, explicitly specify the unique identifier string that is embedded in code signatures",args:{name:"identifier"}},{name:["-o","--options"],description:"During signing, specifies a set of option flags to be embedded in the code signature",args:{name:"version-string",generators:(0,F.valueList)({})}},{name:["-P","--pagesize"],description:"Indicates the granularity of code signing. Pagesize must be a power of two",args:{name:"size"}},{name:["-r","--requirements"],description:"During signing, indicates that internal requirements should be embedded in the code path(s) as specified",args:{name:"requirements"}},{name:["-R","--test-requirement"],description:"During verification, indicates that the path(s) given should be verified against the code requirement specified",args:{name:"requirement"}},{name:["-s","--sign"],description:"Sign the code at the path(s) given using this identity",args:{name:"identity"}},{name:["-v","--verify"],description:"Requests verification of code signatures"},{name:"--continue",description:"Instructs codesign to continue processing path arguments even if processing one fails"},{name:"--dryrun",description:"During signing, performs almost all signing operations, but does not actually write the result anywhere"},{name:"--entitlements",description:"When signing, take the file at the given path and embed its contents in the signature as entitlement data",args:{name:"path"}},{name:"--extract-certificates",description:"When displaying a signature, extract the certificates in the embedded certificate chain and write them to individual files",args:{name:"prefix"}},{name:"--file-list",description:"When signing or displaying a signature, codesign writes to the given path a list of files that may have been modified as part of the signing process",args:{name:"file",template:"filepaths",isVariadic:!0}},{name:"--ignore-resources",description:"During static validation, do not validate the contents of the code's resources"},{name:"--keychain",description:"During signing, only search for the signing identity in the keychain file specified",args:{name:"filename"}},{name:"--prefix",description:"If no explicit unique identifier is specified (using the -i option), and if the implicitly generated identifier does not contain any dot (.) characters, then the given string is prefixed to the identifier before use",args:{name:"prefix"}},{name:"--preserve-metadata=list",description:"When re-signing code that is already signed, reuse some information from the old signature"},{name:"--resource-rules",args:{name:"file",generators:(0,F.filepaths)({extensions:["plist"]})},description:"During signing, this option overrides the default rules for identifying and collecting bundle resources and nested code to be sealed into the signature"},{name:"--timestamp",description:"During signing, requests that a timestamp authority server be contacted to authenticate the time of signing",requiresSeparator:!0,args:{name:"URL",isOptional:!0}}]},Ae=xe;export{Ae as default};
