var Z=Object.create;var R=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty;var j=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var ie=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of ee(n))!te.call(e,r)&&r!==t&&R(e,r,{get:()=>n[r],enumerable:!(i=Y(n,r))||i.enumerable});return e};var re=(e,n,t)=>(t=e!=null?Z(ne(e)):{},ie(n||!e||!e.__esModule?R(t,"default",{value:e,enumerable:!0}):t,e));var q=j(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.shellExpand=x.ensureTrailingSlash=void 0;var se=e=>e.endsWith("/")?e:`${e}/`;x.ensureTrailingSlash=se;var ae=(e,n)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",n):e,oe=(e,n)=>e.replace(/\$([A-Za-z0-9_]+)/g,r=>{var s;let o=r.slice(1);return(s=n[o])!==null&&s!==void 0?s:r}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(r,s,o)=>{var l,d;return(d=(l=n[s])!==null&&l!==void 0?l:o)!==null&&d!==void 0?d:r}),ce=(e,n)=>{var t;let{environmentVariables:i}=n;return oe(ae(e,(t=i?.HOME)!==null&&t!==void 0?t:"~"),i)};x.shellExpand=ce});var W=j(v=>{"use strict";var le=v&&v.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(a){try{c(i.next(a))}catch(u){o(u)}}function d(a){try{c(i.throw(a))}catch(u){o(u)}}function c(a){a.done?s(a.value):r(a.value).then(l,d)}c((i=i.apply(e,n||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.filepaths=v.folders=v.getCurrentInsertedDirectory=v.sortFilesAlphabetically=void 0;var C=q();function J(e,n=[]){let t=n.map(r=>r.toLowerCase()),i=e.filter(r=>!t.includes(r.toLowerCase()));return[...i.filter(r=>!r.startsWith(".")).sort((r,s)=>r.localeCompare(s)),...i.filter(r=>r.startsWith(".")).sort((r,s)=>r.localeCompare(s)),"../"]}v.sortFilesAlphabetically=J;var de=(e,n,t)=>{if(e===null)return"/";let i=(0,C.shellExpand)(n,t),r=i.slice(0,i.lastIndexOf("/")+1);return r===""?(0,C.ensureTrailingSlash)(e):r.startsWith("/")?r:`${(0,C.ensureTrailingSlash)(e)}${r}`};v.getCurrentInsertedDirectory=de;function D(e={}){let{extensions:n=[],equals:t=[],matches:i,filterFolders:r=!1,editFileSuggestions:s,editFolderSuggestions:o,rootDirectory:l,showFolders:d="always"}=e,c=new Set(n),a=new Set(t),u=()=>n.length>0||t.length>0||i,g=(m=[])=>u()?m.filter(({name:h="",type:w})=>{if(!r&&w==="folder"||a.has(h)||i&&h.match(i))return!0;let[,...p]=h.split(".");if(p.length>=1){let b=p.length-1,S=p[b];do{if(c.has(S))return!0;b-=1,S=[p[b],S].join(".")}while(b>=0)}return!1}):m,k=(m=[])=>!s&&!o?m:m.map(h=>Object.assign(Object.assign({},h),(h.type==="file"?s:o)||{}));return{trigger:(m,h)=>{let w=m.lastIndexOf("/"),p=h.lastIndexOf("/");return w!==p?!0:w===-1&&p===-1?!1:m.slice(0,w)!==h.slice(0,p)},getQueryTerm:m=>m.slice(m.lastIndexOf("/")+1),custom:(m,h,w)=>le(this,void 0,void 0,function*(){var p;let{isDangerous:b,currentWorkingDirectory:S,searchTerm:f}=w,_=(p=(0,v.getCurrentInsertedDirectory)(l??S,f,w))!==null&&p!==void 0?p:"/";try{let F=yield h({command:"ls",args:["-1ApL"],cwd:_}),X=J(F.stdout.split(`
`),[".DS_Store"]),N=[];for(let M of X)if(M){let I=M.endsWith("/")?"folders":"filepaths";(I==="filepaths"&&d!=="only"||I==="folders"&&d!=="never")&&N.push({type:I==="filepaths"?"file":"folder",name:M,insertValue:M,isDangerous:b,context:{templateType:I}})}return k(g(N))}catch{return[]}})}}v.folders=Object.assign(()=>D({showFolders:"only"}),Object.freeze(D({showFolders:"only"})));v.filepaths=Object.assign(D,Object.freeze(D()))});var Q=j(O=>{"use strict";var A=O&&O.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(a){try{c(i.next(a))}catch(u){o(u)}}function d(a){try{c(i.throw(a))}catch(u){o(u)}}function c(a){a.done?s(a.value):r(a.value).then(l,d)}c((i=i.apply(e,n||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.keyValueList=O.keyValue=O.valueList=void 0;var G=new Map;function L(e,n){return e.length===0?n:n.map(t=>t.insertValue?t:Object.assign(Object.assign({},t),{insertValue:t.name+e}))}function H(e,n,t){return A(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...t);return L(n,i)}if(typeof e[0]=="string"){let i=e.map(r=>({name:r}));return L(n,i)}return L(n,e)})}function E(e,n,t,i){return A(this,void 0,void 0,function*(){if(t||Array.isArray(e)){let r=G.get(e);return r===void 0&&(r=yield H(e,n,i),G.set(e,r)),r}return H(e,n,i)})}function K(e,n){return typeof n=="string"?e&&n==="keys"||!e&&n==="values":n}function P(e,...n){return Math.max(...n.map(t=>e.lastIndexOf(t)))}function V(e,n){let t=new Set(e);return n.filter(i=>{var r;return typeof i.name=="string"?!t.has(i.name):!(!((r=i.name)===null||r===void 0)&&r.some(s=>t.has(s)))})}function ue({delimiter:e=",",values:n=[],cache:t=!1,insertDelimiter:i=!1,allowRepeatedValues:r=!1}){return{trigger:(s,o)=>s.lastIndexOf(e)!==o.lastIndexOf(e),getQueryTerm:s=>s.slice(s.lastIndexOf(e)+e.length),custom:(...s)=>A(this,void 0,void 0,function*(){var o;let l=yield E(n,i?e:"",t,s);if(r)return l;let[d]=s,c=(o=d[d.length-1])===null||o===void 0?void 0:o.split(e);return V(c,l)})}}O.valueList=ue;function pe({separator:e="=",keys:n=[],values:t=[],cache:i=!1,insertSeparator:r=!0}){return{trigger:(s,o)=>s.indexOf(e)!==o.indexOf(e),getQueryTerm:s=>s.slice(s.indexOf(e)+1),custom:(...s)=>A(this,void 0,void 0,function*(){let[o]=s,d=!o[o.length-1].includes(e),c=d?n:t,a=K(d,i);return E(c,d&&r?e:"",a,s)})}}O.keyValue=pe;function me({separator:e="=",delimiter:n=",",keys:t=[],values:i=[],cache:r=!1,insertSeparator:s=!0,insertDelimiter:o=!1,allowRepeatedKeys:l=!1,allowRepeatedValues:d=!0}){return{trigger:(c,a)=>{let u=P(c,e,n),g=P(a,e,n);return u!==g},getQueryTerm:c=>{let a=P(c,e,n);return c.slice(a+1)},custom:(...c)=>A(this,void 0,void 0,function*(){let[a]=c,u=a[a.length-1],g=P(u,e,n),k=g===-1||u.slice(g,g+e.length)!==e,m=k?t:i,h=K(k,r),p=yield E(m,k?s?e:"":o?n:"",h,c);if(k){if(l)return p;let S=u.split(n).map(f=>f.slice(0,f.indexOf(e)));return V(S,p)}if(d)return p;let b=u.split(n).map(S=>S.slice(S.indexOf(e)+e.length));return V(b,p)})}}O.keyValueList=me});var $=j(T=>{"use strict";var fe=T&&T.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(a){try{c(i.next(a))}catch(u){o(u)}}function d(a){try{c(i.throw(a))}catch(u){o(u)}}function c(a){a.done?s(a.value):r(a.value).then(l,d)}c((i=i.apply(e,n||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.ai=void 0;var he=4097,ge=4,ve=.8,ye=he*ge*ve;function be({name:e,prompt:n,message:t,postProcess:i,temperature:r,splitOn:s}){return{scriptTimeout:15e3,custom:(o,l,d)=>fe(this,void 0,void 0,function*(){var c,a;let u=yield l({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(u.stdout))return[];let g=typeof n=="function"?yield n({tokens:o,executeCommand:l,generatorContext:d}):n,k=typeof t=="function"?yield t({tokens:o,executeCommand:l,generatorContext:d}):t;if(k===null||k.length===0)return console.warn("No message provided to AI generator"),[];let m=ye-((c=g?.length)!==null&&c!==void 0?c:0),h={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...g?[{role:"system",content:g}]:[],{role:"user",content:k.slice(0,m)}],temperature:r},w=JSON.stringify(h),p=yield l({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",w]}),b=JSON.parse(p.stdout);return(a=b?.choices.map(f=>{var _;return(_=f?.message)===null||_===void 0?void 0:_.content}).filter(f=>typeof f=="string").flatMap(f=>s?f.split(s).filter(_=>_.trim().length>0):[f]).map(f=>{if(i)return i(f);let _=f.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:_,insertValue:`'${_}'`,description:"Generated by Fig AI"}}))!==null&&a!==void 0?a:[]})}}T.ai=be});var B=j(y=>{"use strict";var we=y&&y.__createBinding||(Object.create?function(e,n,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(n,t);(!r||("get"in r?!n.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,i,r)}:function(e,n,t,i){i===void 0&&(i=t),e[i]=n[t]}),Se=y&&y.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&we(n,e,t)};Object.defineProperty(y,"__esModule",{value:!0});y.ai=y.folders=y.filepaths=void 0;var z=W();Object.defineProperty(y,"filepaths",{enumerable:!0,get:function(){return z.filepaths}});Object.defineProperty(y,"folders",{enumerable:!0,get:function(){return z.folders}});Se(Q(),y);var ke=$();Object.defineProperty(y,"ai",{enumerable:!0,get:function(){return ke.ai}})});var U=re(B(),1),_e={name:"node",description:"Run the node interpreter",args:{name:"node script",isScript:!0,generators:(0,U.filepaths)({extensions:["mjs","js","cjs"],editFileSuggestions:{priority:76}})},options:[{name:["-e","--eval=..."],insertValue:"-e '{cursor}'",description:"Evaluate script",args:{}},{name:"--watch",description:"Watch input files"},{name:"--watch-path",description:"Specify a watch directory or file",args:{name:"path",template:"filepaths"},isRepeatable:!0},{name:"--watch-preserve-output",description:"Disable the clearing of the console when watch mode restarts the process",dependsOn:["--watch","--watch-path"]},{name:"--env-file",description:"Specify a file containing environment variables",args:{name:"path",template:"filepaths"},isRepeatable:!0},{name:["-p","--print"],description:"Evaluate script and print result"},{name:["-c","--check"],description:"Syntax check script without executing"},{name:["-v","--version"],description:"Print Node.js version"},{name:["-i","--interactive"],description:"Always enter the REPL even if stdin does not appear to be a terminal"},{name:["-h","--help"],description:"Print node command line options (currently set)"},{name:"--inspect",requiresSeparator:!0,args:{name:"[host:]port",isOptional:!0},description:"Activate inspector on host:port (default: 127.0.0.1:9229)"},{name:"--preserve-symlinks",description:"Follows symlinks to directories when examining source code and templates for translation strings"}],generateSpec:async(e,n)=>{let t="test -f .adonisrc.json";if((await n({command:"bash",args:["-c","isAdonisJsonPresentCommand"]})).status===0)return{name:"node",subcommands:[{name:"ace",description:"Run AdonisJS command-line",options:[{name:["-h","--help"],description:"Display AdonisJS Ace help"},{name:["-v","--version"],description:"Display AdonisJS version"}],subcommands:[{name:"build",description:"Compile project from Typescript to Javascript. Also compiles the frontend assets if using webpack encore",options:[{name:["-prod","--production"],description:"Build for production"},{name:"--assets",description:"Build frontend assets when webpack encore is installed"},{name:"--no-assets",description:"Disable building assets"},{name:"--ignore-ts-errors",description:"Ignore typescript errors and complete the build process"},{name:"--tsconfig",description:"Path to the TypeScript project configuration file",args:{name:"path",description:"Path to tsconfig.json"}},{name:"--encore-args",requiresSeparator:!0,insertValue:"--encore-args='{cursor}'",description:"CLI options to pass to the encore command line"},{name:"--client",args:{name:"name"},description:"Select the package manager to decide which lock file to copy to the build folder"}]},{name:["configure","invoke"],description:"Configure a given AdonisJS package",args:{name:"name",description:"Name of the package you want to configure"},subcommands:[{name:"@adonisjs/auth",description:"Trigger auto configuring auth package"},{name:"@adonisjs/shield",description:"Trigger auto configuring shield package"},{name:"@adonisjs/redis",description:"Trigger auto configuring redis package"},{name:"@adonisjs/mail",description:"Trigger auto configuring mail package"}]},{name:"repl",description:"Start a new REPL session"},{name:"serve",description:"Start the AdonisJS HTTP server, along with the file watcher. Also starts the webpack dev server when webpack encore is installed",options:[{name:"--assets",description:"Start webpack dev server when encore is installed"},{name:"--no-assets",description:"Disable webpack dev server"},{name:["-w","--watch"],description:"Watch for file changes and re-start the HTTP server on change"},{name:["-p","--poll"],description:"Detect file changes by polling files instead of listening to filesystem events"},{name:"--node-args",requiresSeparator:!0,insertValue:"--node-args='{cursor}'",description:"CLI options to pass to the node command line"},{name:"--encore-args",requiresSeparator:!0,insertValue:"--encore-args='{cursor}'",description:"CLI options to pass to the encore command line"}]},{name:"db:seed",description:"Execute database seeder files",options:[{name:["-c","--connection"],description:"Define a custom database connection for the seeders",args:{name:"name"}},{name:["-i","--interactive"],description:"Run seeders in interactive mode"},{name:["-f","--files"],args:{name:"file",isVariadic:!0,template:"filepaths"},description:"Define a custom set of seeders files names to run"}]},{name:"dump:rcfile",description:"Dump contents of .adonisrc.json file along with defaults"},{name:"generate:key",description:"Generate a new APP_KEY secret"},{name:"generate:manifest",description:"Generate ace commands manifest file. Manifest file speeds up commands lookup"},{name:"list:routes",description:"List application routes"},{name:"make:command",description:"Make a new ace command"},{name:"make:controller",description:"Make a new HTTP controller",args:{name:"name",description:"Name of the controller class"},options:[{name:["-r","--resource"],description:"Add resourceful methods to the controller class"},{name:["-e","--exact"],description:"Create the controller with the exact name as provided"}]},{name:"make:exception",description:"Make a new custom exception class"},{name:"make:listener",description:"Make a new event listener class"},{name:"make:mailer",description:"Make a new mailer class",args:{name:"name",description:"Mailer class name"}},{name:"make:middleware",description:"Make a new middleware",args:{name:"name",description:"Middleware class name"}},{name:"make:migration",description:"Make a new migration file",args:{name:"name",description:"Name of the migration file"},options:[{name:"--connection",description:"The connection flag is used to lookup the directory for the migration file",args:{name:"name"}},{name:"--folder",description:"Pre-select a migration directory",args:{name:"name",template:"filepaths"}},{name:"--create",description:"Define the table name for creating a new table",args:{name:"name"}},{name:"--table",description:"Define the table name for altering an existing table",args:{name:"name"}}]},{name:"make:model",description:"Make a new Lucid model",args:{name:"name",description:"Name of the model class"},options:[{name:["-m","--migration"],description:"Generate the migration for the model"},{name:["-c","--controller"],description:"Generate the controller for the model"}]},{name:"make:prldfile",description:"Make a new preload file",subcommands:[{name:"events",description:"Make events preload file"}]},{name:"make:provider",description:"Make a new provider class"},{name:"make:seeder",description:"Make a new Seeder file",args:{name:"name",description:"Name of the seeder class"}},{name:"make:validator",description:"Make a new validator",args:{name:"name",description:"Name of the validator class"},options:[{name:["-e","--exact"],description:"Create the validator with the exact name as provided"}]},{name:"make:view",description:"Make a new view template",args:{name:"name",description:"Name of the view"},options:[{name:["-e","--exact"],description:"Create the template file with the exact name as provided"}]},{name:"migration:rollback",description:"Rollback migrations to a given batch number",options:[{name:["-c","--connection"],description:"Define a custom database connection",args:{name:"name"}},{name:"--force",description:"Explicitly force to run migrations in production",isDangerous:!0},{name:"--dry-run",description:"Print SQL queries, instead of running the migrations"},{name:"--batch",args:{name:"number",description:"Use 0 to rollback to initial state"},description:"Define custom batch number for rollback"}]},{name:"migration:run",description:"Run pending migrations",options:[{name:["-c","--connection"],description:"Define a custom database connection",args:{name:"name"}},{name:"--force",description:"Explicitly force to run migrations in production",isDangerous:!0},{name:"--dry-run",description:"Print SQL queries, instead of running the migrations"}]},{name:"migration:status",description:"Check migrations current status"}]}]}}},Ie=_e;export{Ie as default};
