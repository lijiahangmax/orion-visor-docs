var h=/(?:[a-zA-Z0-9-]+\.)+[a-zA-Z0-9]+/,g=(t,n,s)=>t.startsWith("/")||t.startsWith("~/")||t==="~"?t.replace("~",s):n.startsWith("/")||n.startsWith("~/")||n==="~"?n.replace("~",s)+(n.replace("~",s).endsWith("/")?"":"/")+t:n+(n.endsWith("/")?"":"/")+t,d=async(t,n,s,r)=>{let o=g(t,r,s),{stdout:a}=await n({command:"cat",args:[o]}),c=a.split(`
`).map(i=>i.trim()),l=c.filter(i=>i.toLowerCase().startsWith("include ")).map(i=>i.split(" ")[1]),u=await Promise.all(l.map(i=>d(i,n,s,r)));return[...c,...u.flat()]},f={custom:async(t,n,s)=>{let{stdout:r}=await n({command:"cat",args:[`${s.environmentVariables.HOME}/.ssh/known_hosts`]});return r.split(`
`).map(o=>{let a=h.exec(o);if(a)return String(a)}).filter((o,a,c)=>o&&c.indexOf(o)===a).map(o=>({name:(t[1].endsWith("@")?t[1]:"")+o,description:"SSH host"}))},trigger:"@"},v={custom:async(t,n,s)=>(await d("config",n,s.environmentVariables.HOME,"~/.ssh")).filter(o=>o.trim().toLowerCase().startsWith("host ")&&!o.includes("*")).map(o=>({name:o.split(" ")[1],description:"SSH host",priority:90}))},S={name:"ssh",description:"Log into a remote machine",args:{name:"user@hostname",description:"Address of remote machine to log into",generators:[f,v,{template:"history"}]},options:[{name:"-1",description:"Forces ssh to try protocol version 1 only"},{name:"-2",description:"Forces ssh to try protocol version 2 only"},{name:"-4",description:"Forces ssh to use IPv4 addresses only"},{name:"-6",description:"Forces ssh to use IPv6 addresses only"},{name:"-A",description:"Enables forwarding of the authentication agent connection"},{name:"-a",description:"Disables forwarding of the authentication agent connection"},{name:"-b",description:"Use bind_address on the local machine as the source address of the connection",args:{name:"bind address",description:"Source address of the connection"}},{name:"-C",description:"Requests compression of all data (including stdin, stdout, stderr, and data for forwarded X11 and TCP connections)"},{name:"-c",description:"Selects the cipher specification for encrypting the session",args:{name:"cipher spec",description:"The selected cipher specification"}},{name:"-D",description:"Specifies a local 'dynamic' application-level port forwarding",args:{name:"port",description:"Port of the bind address"}},{name:"-e",description:"Sets the escape character for sessions with a pty (default: '~')",args:{name:"escape char",description:"Specified escape character"}},{name:"-F",description:"Specifies an alternative per-user configuration file",args:{name:"configfile",description:"Path to alternative config file",template:"filepaths"}},{name:"-f",description:"Requests ssh to go to background just before command execution"},{name:"-g",description:"Allows remote hosts to connect to local forwarded ports"},{name:"-I",description:"Specify the PKCS#11 shared library ssh should use to communicate with a PKCS#11 token providing the user's private RSA key",args:{name:"pkcs11"}},{name:"-i",description:"Selects a file from which the identity (private key) for public key authentication is read",isRepeatable:!0,args:{name:"identity file",description:"Path to identity (private key)",template:"filepaths"}},{name:"-K",description:"Enables GSSAPI-based authentication and forwarding (delegation) of GSSAPI credentials to the server"},{name:"-k",description:"Disables forwarding (delegation) of GSSAPI credentials to the server"},{name:"-L",description:"Specifies that the given port on the local (client) host is to be forwarded to the given host and port on the remote side",args:{name:"port:host:hostport",description:"Local port, followed by host and host port to forward to"}},{name:"-l",description:"Specifies the user to log in as on the remote machine",args:{name:"login name",description:"Name of user logging into remote machine"}},{name:"-M",description:"Places the ssh client into ``master'' mode for connection sharing",isRepeatable:!0},{name:"-m",description:"Additionally, for protocol version 2 a comma-separated list of MAC (message authentication code) algorithms can be specified in order of preference",args:{name:"mac spec"}},{name:"-N",description:"Do not execute a remote command"},{name:"-n",description:"Redirects stdin from /dev/null (actually, prevents reading from stdin)"},{name:"-O",description:"Control an active connection multiplexing master process",args:{name:"ctl cmd",description:"Command that's passed to the master process"}},{name:"-o",description:"Can be used to give options in the format used in the configuration file",isRepeatable:!0,args:{name:"option",description:"Options that can be specified in the format of the config file",suggestions:[{name:"AddressFamily"},{name:"BatchMode"},{name:"BindAddress"},{name:"ChallengeResponseAuthentication"},{name:"CheckHostIP"},{name:"Cipher"},{name:"Ciphers"},{name:"ClearAllForwardings"},{name:"Compression"},{name:"CompressionLevel"},{name:"ConnectionAttempts"},{name:"ConnectTimeout"},{name:"ControlMaster"},{name:"ControlPath"},{name:"ControlPersist"},{name:"DynamicForward"},{name:"EscapeChar"},{name:"ExitOnForwardFailure"},{name:"ForwardAgent"},{name:"ForwardX11"},{name:"ForwardX11Timeout"},{name:"ForwardX11Trusted"},{name:"GatewayPorts"},{name:"GlobalKnownHostsFile"},{name:"GSSAPIAuthentication"},{name:"GSSAPIDelegateCredentials"},{name:"HashKnownHosts"},{name:"Host"},{name:"HostbasedAuthentication"},{name:"HostKeyAlgorithms"},{name:"HostKeyAlias"},{name:"HostName"},{name:"IdentityFile"},{name:"IdentitiesOnly"},{name:"IPQoS"},{name:"KbdInteractiveAuthentication"},{name:"KbdInteractiveDevices"},{name:"KexAlgorithms"},{name:"LocalCommand"},{name:"LocalForward"},{name:"LogLevel"},{name:"MACs"},{name:"NoHostAuthenticationForLocalhost"},{name:"NumberOfPasswordPrompts"},{name:"PasswordAuthentication"},{name:"PermitLocalCommand"},{name:"PKCS11Provider"},{name:"Port"},{name:"PreferredAuthentications"},{name:"Protocol"},{name:"ProxyCommand"},{name:"PubkeyAuthentication"},{name:"RekeyLimit"},{name:"RequestTTY"},{name:"RhostsRSAAuthentication"},{name:"RSAAuthentication"},{name:"SendEnv"},{name:"ServerAliveInterval"},{name:"ServerAliveCountMax"},{name:"StrictHostKeyChecking"},{name:"TCPKeepAlive"},{name:"Tunnel"},{name:"TunnelDevice"},{name:"UsePrivilegedPort"},{name:"User"},{name:"UserKnownHostsFile"},{name:"VerifyHostKeyDNS"},{name:"VisualHostKey"},{name:"XAuthLocation"}]}},{name:"-p",description:"Port to connect to on the remote host",args:{name:"port",description:"Port to connect to"}},{name:"-q",description:"Quiet mode.  Causes most warning and diagnostic messages to be suppressed"},{name:"-R",description:"Specifies that the given port on the remote (server) host is to be forwarded to the given host and port on the local side",args:{name:"port:host:hostport",description:"Local port, followed by host and host port to forward to"}},{name:"-S",description:"Specifies the location of a control socket for connection sharing, or the string 'none' to disable connection sharing",args:{name:"ctl_path",description:"Location of the control socket",template:"filepaths"}},{name:"-s",description:"May be used to request invocation of a subsystem on the remote system"},{name:"-T",description:"Disable pseudo-tty allocation"},{name:"-t",description:"Force pseudo-tty allocation",isRepeatable:!0},{name:"-V",description:"Display the version number and exit"},{name:"-v",description:"Verbose mode.  Causes ssh to print debugging messages about its progress",isRepeatable:3},{name:"-W",description:"Requests that standard input and output on the client be forwarded to host on port over the secure channel",args:{name:"host:port",description:"Host and port to forward to"}},{name:"-w",description:"Requests tunnel device forwarding with the specified tun(4) devices between the client (local_tun) and the server (remote_tun)",args:{name:"local tun",description:"Local device to forward to"}},{name:"-X",description:"Enables X11 forwarding"},{name:"-x",description:"Disables X11 forwarding"},{name:"-Y",description:"Enables trusted X11 forwarding"},{name:"-y",description:"Send log information using the syslog(3) system module"}]},m=S;var p=[{name:["-l","--login"],description:"Remote host login"},{name:"--proxy",description:"SSH proxy address",args:{name:"Teleport proxy address",generators:{script:["tsh","clusters","--format=json"],postProcess:t=>JSON.parse(t).map(n=>n.cluster_name)}}},{name:"--user",description:"SSH proxy user",args:{name:"user",generators:{script:["tsh","status","--format","json"],postProcess:t=>[JSON.parse(t).active.username]}}},{name:"--ttl",description:"Minutes to live for a SSH session",args:{name:"time"}},{name:["-i","--identity"],description:"Identity file",args:{name:"file",template:"filepaths"}},{name:"--cert-format",description:"SSH certificate format",args:{}},{name:"--insecure",description:"Do not verify server's certificate and host name. Use only in test environments"},{name:"--auth",description:"Specify the name of authentication connector to use",args:{}},{name:"--skip-version-check",description:"Skip version checking between server and client"},{name:["-d","--debug"],description:"Verbose logging to stdout"},{name:["-k","--add-keys-to-agent"],description:"Controls how keys are handled. Valid values are [auto no yes only]"},{name:"--enable-escape-sequences",description:"Enable support for SSH escape sequences. Type '~?' during an SSH session to list supported sequences. Default is enabled"},{name:"--bind-addr",description:"Override host:port used when opening a browser for cluster logins"},{name:["-J","--jumphost"],description:"SSH jumphost"}],e=[...p,{name:["-f","--format"],description:"Format output",args:{name:"format",suggestions:["text","json","yaml"]}},{name:["-q","--quiet"],description:"Quiet mode"}],b={name:"tsh",description:"TSH: Teleport Authentication Gateway Client",subcommands:[{name:"version",description:"Print the version"},{name:"ssh",description:"Run shell or execute a command on a remote SSH node",args:{name:"user@hostname",description:"Address of remote machine to log into",generators:{script:["tsh","ls","--format=json"],postProcess:t=>JSON.parse(t).map(n=>({name:n.spec.hostname,description:`Access expires: ${n.metadata.expires}`}))}},options:m.options},{name:"aws",description:"Access AWS API",options:e},{name:"apps",description:"View and control proxied applications",options:e,subcommands:[{name:"ls",description:"List available applications",options:e},{name:"login",options:e,description:"Retrieve short-lived certificate for an app"},{name:"logout",description:"Remove app certificate",options:e},{name:"config",description:"Print app connection information",options:e}]},{name:"proxy",options:e,description:"Run local TLS proxy allowing connecting to Teleport in single-port mode",subcommands:[{name:"ssh",options:e,description:"Start local TLS proxy for ssh connections when using Teleport in single-port mode"},{name:"db",options:e,description:"Start local TLS proxy for database connections when using Teleport in single-port mode"}]},{name:"db",options:e,description:"View and control proxied databases",subcommands:[{name:"ls",description:"List all available databases",options:e},{name:"login",description:"Retrieve credentials for a database",options:e},{name:"logout",description:"Remove database credentials",options:e},{name:"env",options:e,description:"Print environment variables for the configured database"},{name:"config",options:e,description:"Print database connection information. Useful when configuring GUI clients"},{name:"connect",description:"Connect   Connect to a database",options:e}]},{name:"join",description:"Join the active SSH session",options:e},{name:"play",description:"Replay the recorded SSH session",options:e},{name:"scp",description:"Secure file copy",options:e},{name:"ls",description:"List remote SSH nodes",options:e},{name:"clusters",description:"List available Teleport clusters",options:e},{name:"login",description:"Log in to a cluster and retrieve the session certificate",options:e},{name:"logout",description:"Delete a cluster certificate",options:e},{name:"status",description:"Display the list of proxy servers and retrieved certificates",options:e},{name:"env",description:"Print commands to set Teleport session environment variables",options:e},{name:"request",description:"Manage access requests",subcommands:[{name:"ls",description:"List access requests",options:e},{name:"show",description:"Show request details",options:e},{name:"new",description:"Create a new access request",options:e},{name:"review",description:"Review an access request",options:e}],options:e},{name:"kube",description:"Manage available kubernetes clusters",subcommands:[{name:"ls",description:"Get a list of kubernetes clusters",options:e},{name:"login",description:"Login to a kubernetes cluster",options:e},{name:"sessions",description:"Get a list of active kubernetes sessions",options:e},{name:"exec",description:"Execute a command in a kubernetes pod",options:e},{name:"join",description:"Join an active Kubernetes session",options:e}],options:e},{name:"mfa",description:"Manage multi-factor authentication (MFA) devices",subcommands:[{name:"ls",description:"Get a list of registered MFA devices",options:e},{name:"add",description:"Add a new MFA device",options:e},{name:"rm",description:"Remove a MFA device",options:e}],options:e},{name:"config",description:"Print OpenSSH configuration details",options:e}],options:p},A=b;export{A as default};
