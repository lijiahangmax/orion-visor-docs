var l={strategy:"max-age",ttl:86400,cacheByDirectory:!0},m=[],f,x=new Map,g=new Map,u=new Map,h=new Map,j=n=>{if(!g.has(n.name)){let t=[];for(let i in n.targets){t.push(i);let o=[];for(let s in n.targets[i].configurations)o.push(s);u.set(`${n.name}:${i}`,o)}g.set(n.name,t);for(let i of t){let o=h.get(i)||[];o.push(n.name),h.set(i,o)}}},d=async n=>{if(!m.length)try{let{appsDir:t,libsDir:i}={appsDir:"apps",libsDir:"libs",...JSON.parse((await n({command:"cat",args:["nx.json"]})).stdout).workspaceLayout};m=(await n({command:"find",args:[...t===i?[t]:[t,i],"-name","project.json"]})).stdout.split(`
`).filter(s=>!!s)}catch(t){console.log(t)}for(let t of m){let i=x.get(t);if(!i)try{i=JSON.parse((await n({command:"cat",args:[t]})).stdout),x.set(t,i)}catch(o){console.log(o)}i&&j(i)}if(!m.length)try{f=JSON.parse((await n({command:"cat",args:["workspace.json"]})).stdout);for(let t in f?.projects||{})j({...f.projects[t],name:t})}catch(t){console.log(t)}},y=n=>({cache:l,trigger:(t,i)=>t.split(",").length!==i.split(",").length,getQueryTerm:t=>t.split(",").pop(),custom:async(t,i,o)=>{let s=[],r=t[t.length-1].split(",");await d(i);for(let p of n.keys())r.includes(p)||s.push({name:p,insertValue:`${p},`});return s}}),c={configuration:{cache:l,custom:async(n,t)=>{let i=[],o=[];n.join(" ").startsWith("nx run")?o.push(...n[2].split(":")):o.push(n[2],n[1]);let[r,p]=o;await d(t);for(let a of u.get(`${r}:${p}`))i.push({name:a});return i}},generate:{script:n=>{let t=n.slice(-1)[0];return t.indexOf(":")>-1?["nx","list",t.split(":")[0]]:["nx","list"]},trigger:(n,t)=>n.split(":").length!==t.split(":").length,getQueryTerm:n=>n.split(":").pop(),cache:l,postProcess:n=>{if(n.indexOf("Installed plugins")>-1){let t=n.split(">"),i=t[1].split(`
`).filter(Boolean);i.shift();let o=t[2].split(`
`).filter(Boolean);return o.shift(),[...i,...o].map(s=>{let r=s.trim().split(" ")[0];return{name:r,insertValue:`${r}:`}})}else if(n.indexOf("Capabilities")>-1)return n.split(`
`).filter(i=>i.trim().indexOf(" : ")>-1).map(i=>({name:i.trim().split(" : ")[0]}))}},list:{script:["nx","list"],cache:l,postProcess:n=>{if(n.indexOf("Installed plugins")>-1){let t=n.split(">"),i=t[1].split(`
`).filter(Boolean);i.shift();let o=t[2].split(`
`).filter(Boolean);return o.shift(),[...i,...o].map(s=>({name:s.trim().split(" ")[0]}))}}},project:{cache:l,custom:async(n,t)=>{let i=[];await d(t);for(let o of g.keys())i.push({name:o});return i}},projects:y(g),run:{cache:l,trigger:(n,t)=>n.split(":").length!==t.split(":").length,getQueryTerm:n=>n.split(":").pop(),custom:async(n,t,i)=>{let o=[],s=n[n.length-1].split(":"),r=s.length>1?s[0]:"",p=s.length>2?s[1]:"";if(await d(t),r)if(p)for(let a of u.get(`${r}:${p}`))o.push({name:a});else for(let a of g.get(r))u.get(`${r}:${a}`)?o.push({name:a,insertValue:`${a}:`}):o.push({name:a});else for(let a of g.keys())o.push({name:a,insertValue:`${a}:`});return o}},targets:y(h),workspaceGenerator:{script:["bash","-c","ls -d tools/generators/*/"],cache:l,postProcess:n=>n.replace("tools/generators/","").replace("/","").split(`
`).map(t=>t.split(" ").pop()).map(t=>({name:t}))}},e={all:{name:"--all",description:"All projects"},base:{name:"--base",description:"Base of the current branch (usually main)",args:{}},commitPrefix:{name:"--commitPrefix",description:"Commit prefix to apply to the commit for each migration, when --create-commits is enabled",args:{}},configuration:{name:["--configuration","-c"],description:'A named builder configuration, defined in the "configurations" section of the workspace configuration file. The builder uses the named configuration to run the given target',args:{name:"configuration",generators:c.configuration}},createCommits:{name:"--createCommits",description:"Automatically create a git commit after each migration runs"},defaults:{name:"--defaults",description:"When true, disables interactive input prompts for options with a default"},dryRun:{name:"--dryRun",description:"When true, preview the changes without updating files"},exclude:{name:"--exclude",description:"Exclude certain projects from being processed",args:{name:"projects",generators:c.projects}},excludeAppliedMigrations:{name:"--excludeAppliedMigrations",description:"Exclude migrations that should have been applied on previous updates. To be used with --from"},file:{name:"--file",description:"Output file (e.g. --file=output.json or --file=dep-graph.html)",args:{}},files:{name:"--files",description:"Change the way Nx is calculating the affected command by providing directly changed files, list of files delimited by commas or spaces",args:{}},focus:{name:"--focus",description:"Use to show the project graph for a particular project and every node that is either an ancestor or a descendant",args:{name:"project",generators:c.project}},force:{name:"--force",description:"When true, forces overwriting of existing files"},from:{name:"--from",description:'Use the provided versions for packages instead of the ones installed in node_modules (e.g., --from="@nrwl/react@12.0.0,@nrwl/js@12.0.0")',args:{}},graph:{name:"--graph",description:"Show the task graph of the command"},groupByFolder:{name:"--groupByFolder",description:"Group projects by folder in the project graph"},head:{name:"--head",description:"Latest commit of the current branch (usually HEAD)",args:{}},help:{name:"--help",description:"Show help"},host:{name:"--host",description:"Bind the project graph server to a specific ip address",args:{}},ifExists:{name:"--ifExists",description:"Run migrations only if the migrations file exists, if not continues successfully"},includeDependentProjects:{name:"--includeDependentProjects",description:"When watching selected projects, include dependent projects as well"},interactive:{name:"--interactive",description:"Enable/disable prompts"},libsAndApps:{name:"--libs-and-apps",description:"Format only libraries and applications files"},listGenerators:{name:"--list-generators",description:"List the available workspace-generators"},nxBail:{name:"--nx-bail",description:"Stop command execution after the first failed task"},nxIgnoreCycles:{name:"--nx-ignore-cycles",description:"Ignore cycles in the task graph"},open:{name:"--open",description:"Open the project graph in the browser"},outputStyle:{name:"--output-style",description:"Defines how Nx emits outputs tasks logs",args:{suggestions:[{name:"dynamic"},{name:"static"},{name:"stream"},{name:"stream-without-prefixes"},{name:"compact"}]}},parallel:{name:"--parallel",description:"Max number of parallel processes [default is 3]",args:{}},port:{name:"--port",description:"Bind the project graph server to a specific port",args:{}},project:{name:"--project",description:"Target project",args:{name:"project",generators:c.project}},projects:{name:"--projects",description:"Projects (comma/space delimited)",args:{name:"projects",generators:c.projects}},runMigrations:{name:"--runMigrations",description:"Execute migrations from a file (when the file isn't provided, execute migrations from migrations.json)",args:{}},runner:{name:"--runner",description:"This is the name of the tasks runner configured in nx.json",args:{}},select:{name:"--select",description:"Select the subset of the returned json document (e.g., --select=projects)",args:{}},skipNxCache:{name:"--skip-nx-cache",description:"Rerun the tasks even when the results are available in the cache"},start:{name:"--start"},stop:{name:"--stop"},targets:{name:"--targets",description:"Targets (comma/space delimited)",args:{name:"targets",generators:c.targets}},to:{name:"--to",description:'Use the provided versions for packages instead of the ones calculated by the migrator (e.g., --to="@nrwl/react@12.0.0,@nrwl/js@12.0.0")',args:{}},type:{name:"--type",description:"Select the type of projects to be returned (e.g., --type=app)",args:{suggestions:[{name:"app"},{name:"lib"}]}},uncommitted:{name:"--uncommitted",description:"Uncommitted changes"},untracked:{name:"--untracked",description:"Untracked changes"},verbose:{name:"--verbose",description:"Prints additional information about the commands (e.g., stack traces)"},version:{name:"--version",description:"Show version number"},view:{name:"--view",description:"Choose whether to view the projects or task graph",args:{suggestions:[{name:"projects"},{name:"tasks"}],default:"projects"}},watch:{name:"--watch",description:"Watch for changes to project graph and update in-browser"}},F=["build","e2e","lint","serve","test"],w=["build","serve"],v=async(n,t)=>{let i=[];await d(t);for(let[o,s]of h)i.push({name:o,description:`${o} target`,icon:F.includes(o)?"fig://icon?type=command":"fig://icon?type=asterisk",args:{name:"project",suggestions:s.map(r=>({name:r}))},options:w.includes(o)?[e.configuration,e.help,e.version]:[e.help,e.version]});return{name:"nx",subcommands:i}},b={name:"nx",description:"Fig completions for Nx by Nrwl",generateSpec:v,subcommands:[{name:"init",description:"Adds nx.json file and installs nx if not installed already",options:[e.help,e.version]},{name:"generate",description:"Runs a generator that creates and/or modifies files based on a generator from a collection",args:{name:"collection:generator",generators:c.generate},options:[e.defaults,e.dryRun,e.force,e.help,e.interactive,e.version]},{name:"run",description:"Runs an Architect target with an optional custom builder configuration defined in your project",args:{name:"project:target[:configuration]",generators:c.run},options:[e.configuration,e.help,e.version]},{name:"daemon",description:"Prints information about the Nx Daemon process or starts a daemon process",options:[e.help,e.start,e.stop,e.version]},{name:"graph",description:"Graph dependencies within workspace",options:[e.exclude,e.file,e.focus,e.groupByFolder,e.help,e.host,e.open,e.port,e.targets,e.version,e.view,e.watch]},{name:"run-many",description:"Run target for multiple listed projects",options:[e.all,e.configuration,e.exclude,e.graph,e.help,e.nxBail,e.nxIgnoreCycles,e.outputStyle,e.parallel,e.projects,e.runner,e.skipNxCache,e.targets,e.verbose,e.version]},{name:"affected",description:"Run target for affected projects",options:[e.all,e.base,e.configuration,e.exclude,e.files,e.graph,e.head,e.help,e.nxBail,e.nxIgnoreCycles,e.outputStyle,e.parallel,e.runner,e.skipNxCache,e.targets,e.uncommitted,e.untracked,e.verbose,e.version]},{name:"affected:graph",description:"Graph dependencies affected by changes",options:[e.all,e.base,e.exclude,e.file,e.files,e.focus,e.groupByFolder,e.head,e.help,e.host,e.open,e.port,e.targets,e.uncommitted,e.untracked,e.version,e.view,e.watch]},{name:"print-affected",description:"Prints information about the projects and targets affected by changes",options:[e.all,e.base,e.configuration,e.exclude,e.files,e.head,e.help,e.select,e.targets,e.type,e.uncommitted,e.untracked,e.version]},{name:"format:check",description:"Check for un-formatted files",options:[e.all,e.base,e.exclude,e.files,e.head,e.help,e.libsAndApps,e.projects,e.uncommitted,e.untracked,e.version]},{name:"format:write",description:"Overwrite un-formatted files",options:[e.all,e.base,e.exclude,e.files,e.head,e.help,e.libsAndApps,e.projects,e.uncommitted,e.untracked,e.version]},{name:"migrate",description:"Creates a migrations file or runs migrations from the migrations file",args:{name:"packageAndVersion",description:"The target package and version (e.g, @nrwl/workspace@13.0.0)",suggestions:[{name:"latest"}],isOptional:!0},options:[e.commitPrefix,e.createCommits,e.excludeAppliedMigrations,e.from,e.help,e.ifExists,e.interactive,e.runMigrations,e.to,e.version]},{name:"report",description:"Reports useful version numbers to copy into the Nx issue template",options:[e.help,e.version]},{name:"list",args:{name:"plugin",description:"The name of an installed plugin to query",generators:c.list},options:[e.help,e.version]},{name:"workspace-generator",description:"Runs a workspace generator from the tools/generators directory",args:{name:"name",description:"The name of your generator",generators:c.workspaceGenerator},options:[e.help,e.listGenerators,e.version]},{name:"connect",description:"Connect workspace to Nx Cloud",options:[e.help,e.version]},{name:"reset",description:"Clears all the cached Nx artifacts and metadata about the workspace and shuts down the Nx Daemon",options:[e.help,e.version]},{name:"repair",description:"Repair any configuration that is no longer supported by Nx",options:[e.help,e.verbose,e.version]},{name:"exec",description:"Executes any command as if it was a target on the project",options:[e.configuration,e.exclude,e.graph,e.help,e.nxBail,e.nxIgnoreCycles,e.outputStyle,e.parallel,e.project,e.runner,e.skipNxCache,e.verbose,e.version]},{name:"watch",description:"Watch for changes within projects, and execute commands",options:[e.all,e.help,e.includeDependentProjects,e.projects,e.verbose,e.version]},{name:"show",description:"Show information about the workspace (e.g., list of projects)",args:{name:"object",description:"What to show (e.g., projects)",suggestions:[{name:"projects"}],default:"projects"},options:[e.help,e.version]},{name:"view-logs",description:"Enables you to view and interact with the logs via the advanced analytic UI from Nx Cloud to help you debug your issue. To do this, Nx needs to connect your workspace to Nx Cloud and upload the most recent run details. Only the metrics are uploaded, not the artefacts",options:[e.help,e.version]}]},O=b;export{O as default};
