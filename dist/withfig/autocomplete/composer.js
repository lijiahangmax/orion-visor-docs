var m="https://getcomposer.org/img/logo-composer-transparent5.png",g=new RegExp("^.*/.*$"),f={script:function(s){return s[s.length-1]===""?void 0:["curl","-s","-H","Accept: application/json",`https://packagist.org/search.json?q=${s[s.length-1]}&per_page=20`]},postProcess:function(s){try{return JSON.parse(s).results.map(e=>({name:e.name,description:e.description,icon:"\u{1F4E6}"}))}catch{return[]}}},y={script:["cat","composer.json"],postProcess:function(s){if(s.trim()=="")return[];try{let e=JSON.parse(s),t=e.require||{},a=e["require-dev"]||{};return h(Object.assign(t,a)).map(i=>({name:i,icon:"\u{1F4E6}"}))}catch(e){console.log(e)}return[]}};function h(s){return Object.keys(s).filter(e=>e.match(g))}var v={name:"composer",description:"Composer Command",generateSpec:async(s,e)=>{let[t,a]=await Promise.all([e({command:"composer",args:["list","--format=json"]}),e({command:"ls",args:["symfony.lock"]})]),i=[];try{let c=JSON.parse(t.stdout),l=["update","remove"];for(let o of c.commands)i.push({name:o.name,description:o.description,icon:m,args:Object.keys(o.definition.arguments).map(p=>{let n=o.definition.arguments[p],r=n.default?Array.isArray(n.default)?n.default[0]:n.default:void 0;return{name:n.name,description:n.description,isOptional:!n.is_required,default:r,isVariadic:n.is_array,generators:o.name==="require"?f:l.includes(o.name)?y:[]}}),options:Object.keys(o.definition.options).map(p=>{let n=o.definition.options[p],r=[n.name],u=n.shortcut;return u.trim().length>0&&r.push(u),{name:r,description:n.description,isRequired:n.is_value_required,args:n.accept_value?{}:void 0}})});let d=[{name:["-h","--help"],description:"Display this help message"},{name:["-q","--quiet"],description:"Do not output any message"},{name:["-V","--version"],description:"Display this application version"},{name:"--ansi",description:"Force ANSI output",exclusiveOn:["--no-ansi"]},{name:"--no-ansi",description:"Disable ANSI output",exclusiveOn:["--ansi"]},{name:["-n","--no-interaction"],description:"Do not ask any interactive question"},{name:"--profile",description:"Display timing and memory usage information"},{name:"--no-plugins",description:"Whether to disable plugins"},{name:["-d","--working-dir"],description:"If specified, use the given directory as working directory",args:{name:"dir",template:"folders"}},{name:"--no-cache",description:"Prevent use of the cache"},{name:["-v","--verbose"],description:"Verbosity of messages: 1 for normal output"},{name:"-vv",description:"Verbosity of messages: 2 for more verbose output"},{name:"-vvv",description:"Verbosity of messages: 3 for debug"}];a.status===0&&(i.push({name:["recipes","symfony:recipes"],description:"Shows information about all available recipes",icon:m,args:{name:"package",description:"Package to inspect, if not provided all packages are",isOptional:!0},options:[{name:["-o","--outdated"],description:"Show only recipes that are outdated"},...d]}),i.push({name:["recipes:install","symfony:recipes:install","symfony:sync-recipes","sync-recipes","fix-recipes"],description:"Installs or reinstalls recipes for already installed packages",icon:m,args:{name:"packages",description:"Recipes that should be installed",isVariadic:!0},options:[{name:"--force",description:"Overwrite existing files when a new version of a recipe is available",isDangerous:!0},...d]}))}catch(c){console.error(c)}return{name:"composer",subcommands:i}}},k=v;export{k as default};
