function g(s){let n=[],a=s.replace(/ +/g," ").replace(/\u001b\[[0-9;]*[A-Za-z]/g,"").split(`
`);if(a.length>4&&a[1].startsWith("NAME"))for(let e=2;e<a.length-2;e++){let t=a[e].split(" ");n.push({name:t.shift(),status:t.shift().includes("SUCCESS")?"SUCCESS":"ERROR",created:`${t.shift()} ${t.shift()} ${t.shift()}`,size:`${t.shift()}${t.shift()}`,src:t.shift().includes("\u2601\uFE0F")?"CLOUD":"LOCAL"})}return n}function f(s){let n=[],a=s.replace(/ +/g," ").replace(/\u001b\[[0-9;]*[A-Za-z]/g,"").split(`
`);if(a.length>2&&a[1].startsWith("NAME"))for(let e=2;e<a.length;e++){let t=a[e].split(" "),i=t.shift(),u=`${t.shift()}${t.shift()}`,b=t.shift();n.push({name:i,size:u,snapshotName:b})}return n}var m={script:["snaplet","snapshot","ls"],postProcess:s=>{let n=[],a=g(s);for(let e of a){let t=e.status==="SUCCESS"?"\u2705":"\u274C",i=e.src==="CLOUD"?"\u2601\uFE0F":"\u{1F4BB}";n.push({name:e.name,description:`${t} ${e.created} ${e.size} ${i}`})}return n}},d={script:["snaplet","snapshot","ls"],postProcess:s=>{let n=[],a=g(s).filter(e=>e.src==="CLOUD"&&e.status==="SUCCESS");for(let e of a)n.push({name:e.name,description:`\u2705 ${e.created} ${e.size} \u2601\uFE0F`});return n}},l={script:["snaplet","database","ls"],postProcess:s=>{let n=[],a=f(s);for(let e of a)n.push({name:e.name,description:`${e.size} (${e.snapshotName})`});return n}},S=[{name:["--help","-h"],description:"Show help for snaplet",isPersistent:!0},{name:["--version","-v"],description:"Show version number",isPersistent:!0}],C={name:"auth",description:"Manage auth state",subcommands:[{name:["login","setup"],description:"Login with an access token",args:{name:"access-token",isOptional:!0}}]},r={name:["--type","-t"],args:{suggestions:["typedefs","transform","keys","seed"]}},h={name:"--yes",description:"Automatically accept any prompt, useful for scripts"},v={name:"config",description:"Manage configuration",subcommands:[{name:"generate",options:[{name:"--dry-run"},r],description:"Generate transform files"},{name:["list","ls"],description:"List config variables"},{name:"pull",options:[r],description:"Pull cloud project config to local"},{name:"push",options:[r],description:"Push local project config to cloud"},{name:"setup",options:[{name:"--generate"},{name:"--no-generate"},h],description:"Setup local project configuration",args:{name:"targetDatabaseUrl",isOptional:!0}}]},o={name:"--tags",description:"Filter snapshots by tags",args:{name:"tags-list",description:"Tag1,tag2,tag3"}},c={name:"--latest",description:"Restore the latest snapshot"},p={name:"--git",description:"Infer the database name from the current git branch"},w={name:["database","db"],description:"Manage preview database",subcommands:[{name:["cache","ca"],description:"Cache a snapshot into the preview database server",args:{name:"snapshot",isOptional:!0,generators:d},options:[o,{name:"--latest",description:"Select the latest snapshot captured to cache in the preview database server"},{name:"--clear",description:"Remove the snapshot from the preview database server cache"}]},{name:["create","c"],description:"Create a preview database from a snapshot",args:[{name:"database-name"},{name:"snapshot",isOptional:!0,generators:d}],options:[o,c,p,{name:"--no-snapshot",description:"Create an empty database not based on a snapshot"},{name:"--force",description:"Force the database creation, it will drop and recreate the existing database if present"}]},{name:["drop","delete","d"],description:"Drop a preview database",args:{name:"database-name",isOptional:!0,generators:l},options:[p]},{name:["url","u"],description:"Show a preview database url",args:{name:"database-name",isOptional:!0,generators:l},options:[p]},{name:["destroy","ds"],description:"Destroy the database server",options:[h]},{name:["setup","s"],description:"Create a preview database server",options:[{name:"--region",description:"Fly.io region where the preview database server should be created",args:{suggestions:[{name:"ams",description:"Amsterdam, Netherlands"},{name:"cdg",description:"Paris, France"},{name:"den",description:"Denver, Colorado (US)"},{name:"dfw",description:"Dallas, Texas (US)"},{name:"ewr",description:"Secaucus, NJ (US)"},{name:"fra",description:"Frankfurt, Germany"},{name:"gru",description:"S\xE3o Paulo"},{name:"hkg",description:"Hong Kong, Hong Kong"},{name:"iad",description:"Ashburn, Virginia (US)"},{name:"jnb",description:"Johannesburg, South Africa"},{name:"lax",description:"Los Angeles, California (US)"},{name:"lhr",description:"London, United Kingdom"},{name:"maa",description:"Chennai (Madras), India"},{name:"mad",description:"Madrid, Spain"},{name:"mia",description:"Miami, Florida (US)"},{name:"nrt",description:"Tokyo, Japan"},{name:"ord",description:"Chicago, Illinois (US)"},{name:"otp",description:"Bucharest, Romania"},{name:"scl",description:"Santiago, Chile"},{name:"sea",description:"Seattle, Washington (US)"},{name:"sin",description:"Singapore"},{name:"sjc",description:"Sunnyvale, California (US)"},{name:"syd",description:"Sydney, Australia"},{name:"waw",description:"Warsaw, Poland"},{name:"yul",description:"Montreal, Canada"},{name:"yyz",description:"Toronto, Canada"}]}}]},{name:["list","ls"],description:"List preview databases"}]},y={name:["discord","chat"],description:"Open the Snaplet Discord chat window in your browser"},O={name:["documentation","docs"],description:"Opens the Snaplet Documentation in your browser"},F={name:["--team","-t"],args:{name:"team-name"}},U={name:"project",description:"Manage project configuration",subcommands:[{name:"create",description:"Create a new project",args:{name:"name"},options:[F]},{name:"invite",description:"Create an invite URL for this project"},{name:"setup",description:"Set up a project",args:{name:"project-id",isOptional:!0}}]},L={name:["proxy","dev"],description:"Start a database proxy"},j={options:[{name:["-i","--interactive"],description:"Show interactive prompts to customise seeding"},{name:["-n","--entriesPerTable"],args:{name:"number",default:"100"}}],name:["seed","gen","generate"],description:"Populates an empty database with generated data"},P={name:["snapshot","ss"],description:"Manage snapshots",subcommands:[{name:["capture","c"],description:"Capture a new snapshot",args:{name:"destination-path",isOptional:!0,template:"folders"},options:[{name:["--env","--environment"],description:"Environment to use when capturing the snapshot",args:{name:"environment-name",suggestions:["cloud","local"],default:"local"}},{name:["-m","--message"],description:"Attach a message to the snapshot",args:{name:"message"}},{name:["--subset-path","--subset"],description:"Path to a subset config file",args:{name:"path",template:"filepaths"}},{...o,description:"Attach tags to the snapshot"},{name:["-t","--transform-mode"],description:"Transformation mode to apply to the snapshot",args:{name:"transformation-mode",suggestions:["strict","unsafe","auto"]}}]},{name:"create",description:"Create a snapshot in cloud",options:[{name:"--json"}]},{name:["list","ls"],description:"List all snapshots",options:[o]},{name:["restore","r"],description:"Restore a snapshot",args:{name:"snapshot-name",isOptional:!0,generators:m},options:[{name:["data","--no-data"],description:"Restore data on the database (skip with --no-data)"},{name:["schema","--no-schema"],description:"Restore schema on the database (skip with --no-schema)"},{name:["reset","--no-reset"],description:"Drop destination database before restoring schemas (skip with --no-reset)"},o,c,{name:["-y","--yes"],description:"Performs a restore without a confirmation message"},{name:"--schema-only",description:"Skip data, only restore schema",deprecated:{description:"Use --no-data"}},{name:"--data-only",description:"Restore data only (keep the current schema and indexes)",deprecated:{description:"Use --no-schema"}}]},{name:["share","upload"],description:"Share a snapshot",args:{name:"snapshot-name",isOptional:!0,generators:m},options:[{name:"--no-encrypt",description:"Disable encryption"},o,{...c,description:"Share the latest snapshot"}]},{name:["sample","s"],description:"Create a sample of a database",args:{name:"destination-path",isOptional:!0,template:"folders"},options:[{name:["--env","--environment"],description:"Environment to use when slicing the snapshot",args:{name:"environment-name",suggestions:["cloud","local"],default:"local"}},{name:["--sample-config-path","--subset-path"],description:"Path to a sample config file",args:{template:"filepaths"}},{name:["-f","--force"],description:"Force overwrite existing sample file",isDangerous:!0}]}]},D={name:["subset","subsetting"],description:"Manage subsetting",subcommands:[{name:["setup","configure","config"],description:"Configure subsetting"}]},E={name:"team",description:"Manage team configuration",subcommands:[{name:"create",description:"Create a new team",args:{name:"team-name"}}]},$={name:"upgrade",description:"Upgrade this binary"},A={name:"completion",description:"Generate completion script"},R={name:"snaplet",description:"Create and share PostgreSQL snapshots with schema, data transformation, and preview databases for collaborative development (see: https://docs.snaplet.dev)",subcommands:[C,v,w,y,O,U,L,j,P,D,E,$,A],options:S},M=R;export{M as default};
