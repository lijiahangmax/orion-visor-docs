var g=()=>t=>t,d=[{name:"-p",description:"Prompt for password"},{name:"-u",description:"Authenticate as user",args:{name:"user",description:"User to authenticate as"}},{name:"-P",description:"Authenticate with password",args:{name:"password",description:"Password to authenticate with"}},{name:"-f",description:"Targeted local node database file path",args:{name:"file",description:"File path"}},{name:"-raw",description:"Don't strip off prefix from DirectoryService API constants"},{name:"-plist",description:"Print out record(s) or attribute(s) in XML plist format"},{name:"-url",description:"Print record attribute values in URL-style encoding"},{name:"-q",description:"Quiet - no interactive prompt"}],f=new Set(d.filter(t=>t.args!==void 0).flatMap(t=>t.name)),y={trigger:"/",getQueryTerm:"/",custom:async(t,s)=>{let r=t[t.length-1];if(r==="")return[];let c=t.indexOf("dscl"),n;for(let i=c+1;i<t.length;i++){let p=t[i];if(p.startsWith("-"))continue;let m=t[i-1];if(!f.has(m)){n=p;break}}let o=r.lastIndexOf("/"),h=r.slice(0,o<0?0:o),{stdout:u}=await s({command:"dscl",args:[n,"-list",h??"/"]});return u.trim().split(`
`).map(i=>({name:i,icon:"\u{1F4C1}",priority:i[i.lastIndexOf("/")+1]==="_"?49:50}))}},e=g()({path:{name:"path",description:"Path to the record",generators:y},key:{name:"key",description:"Directory Service record attribute type"},keys:{name:"keys",description:"Directory Service record attribute type",isVariadic:!0},plistPath:{name:"plist path",description:"Path to the plist file"},valueIndex:{name:"value index",description:"Value index of the key"},val:{name:"val",description:"Value of the key"},vals:{name:"vals",description:"Value of the key",isVariadic:!0},oldVal:{name:"old val",description:"Old value of the key"},newVal:{name:"new val",description:"New value of the key"}}),a=(t,s)=>({...e[t],...s}),l={name:"dscl",subcommands:[{name:["read","-read"],description:"Prints a directory",args:[a("path",{isOptional:!0}),a("keys",{isOptional:!0})]},{name:["readall","-readall"],description:"Prints all the records of a given type",args:[a("path",{isOptional:!0}),a("keys",{isOptional:!0})]},{name:["readpl","-readpl"],description:"Prints the contents of plist_path",args:[e.path,e.key,e.plistPath]},{name:["readpli","-readpli"],description:"Prints the contents of plist_path for the plist at value_index of the key",args:[e.path,e.key,e.valueIndex,e.plistPath]},{name:["list","-list","ls","-ls"],description:"Lists the subdirectories of the given directory",args:[e.path,a("key",{isOptional:!0})]},{name:["search","-search"],description:"Searches for records that match a pattern",args:[e.path,e.key,e.val]},{name:["create","-create","mk","-mk"],description:"Creates a new record",args:[e.path,a("key",{isOptional:!0}),a("vals",{isOptional:!0})]},{name:["createpl","-createpl"],description:"Creates a string, or array of strings at plist_path",args:[e.path,e.key,e.plistPath,e.val,a("vals",{isOptional:!0})]},{name:["createpli","-createpli"],description:"Creates a string, or array of strings at plist_path for the plist at value_index of the key",args:[e.path,e.key,e.valueIndex,e.plistPath,e.val,a("vals",{isOptional:!0})]},{name:["append","-append"],description:"Appends one or more values to a property in a given record",args:[e.path,e.key,e.vals]},{name:["merge","-merge"],description:"Appends one or more values to a property in a given directory if the property does not already have those values",args:[e.path,e.key,e.vals]},{name:["delete","-delete","rm","-rm"],description:"Delete a directory, property, or value",args:[e.path,a("key",{isOptional:!0}),a("vals",{isOptional:!0})]},{name:["deletepl","-deletepl"],description:"Deletes a value in a plist",args:[e.path,e.key,e.plistPath,a("vals",{isOptional:!0})]},{name:["deletepli","-deletepli"],description:"Deletes a value for the plist at value_index of the key",args:[e.path,e.key,e.valueIndex,e.plistPath,a("vals",{isOptional:!0})]},{name:["change","-change"],description:"Replaces the given old value in the list of values of the given key with the new value in the specified record",args:[e.path,e.key,e.oldVal,e.newVal]},{name:["changei","-changei"],description:"Replaces the value at the given index in the list of values of the given key with the new value in the specified record",args:[e.path,e.key,e.valueIndex,e.newVal]},{name:["diff","-diff"],description:"Compares the data from path1 and path2 looking at the specified keys (or all if no keys are specified)",args:[e.path,e.path,a("keys",{isOptional:!0})]},{name:["passwd","-passwd"],description:"Changes the password of a user",args:[e.path,{name:"new password",description:"New password of the user",isOptional:!0}]}]},v={name:"dscl",description:"Directory Service command line utility",subcommands:l.subcommands,options:d,args:{name:"datasource",suggestions:[".","..","localhost","localonly"],isOptional:!0,loadSpec:l}},k=v;export{k as default};
