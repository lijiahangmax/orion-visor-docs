var ie=Object.create;var K=Object.defineProperty;var ae=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var F=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ce=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of re(t))!se.call(e,i)&&i!==n&&K(e,i,{get:()=>t[i],enumerable:!(a=ae(t,i))||a.enumerable});return e};var le=(e,t,n)=>(n=e!=null?ie(oe(e)):{},ce(t||!e||!e.__esModule?K(n,"default",{value:e,enumerable:!0}):n,e));var z=F(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.shellExpand=j.ensureTrailingSlash=void 0;var ue=e=>e.endsWith("/")?e:`${e}/`;j.ensureTrailingSlash=ue;var de=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,pe=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,i=>{var r;let s=i.slice(1);return(r=t[s])!==null&&r!==void 0?r:i}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(i,r,s)=>{var l,u;return(u=(l=t[r])!==null&&l!==void 0?l:s)!==null&&u!==void 0?u:i}),fe=(e,t)=>{var n;let{environmentVariables:a}=t;return pe(de(e,(n=a?.HOME)!==null&&n!==void 0?n:"~"),a)};j.shellExpand=fe});var Q=F(v=>{"use strict";var ge=v&&v.__awaiter||function(e,t,n,a){function i(r){return r instanceof n?r:new n(function(s){s(r)})}return new(n||(n=Promise))(function(r,s){function l(o){try{c(a.next(o))}catch(d){s(d)}}function u(o){try{c(a.throw(o))}catch(d){s(d)}}function c(o){o.done?r(o.value):i(o.value).then(l,u)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.filepaths=v.folders=v.getCurrentInsertedDirectory=v.sortFilesAlphabetically=void 0;var R=z();function J(e,t=[]){let n=t.map(i=>i.toLowerCase()),a=e.filter(i=>!n.includes(i.toLowerCase()));return[...a.filter(i=>!i.startsWith(".")).sort((i,r)=>i.localeCompare(r)),...a.filter(i=>i.startsWith(".")).sort((i,r)=>i.localeCompare(r)),"../"]}v.sortFilesAlphabetically=J;var he=(e,t,n)=>{if(e===null)return"/";let a=(0,R.shellExpand)(t,n),i=a.slice(0,a.lastIndexOf("/")+1);return i===""?(0,R.ensureTrailingSlash)(e):i.startsWith("/")?i:`${(0,R.ensureTrailingSlash)(e)}${i}`};v.getCurrentInsertedDirectory=he;function M(e={}){let{extensions:t=[],equals:n=[],matches:a,filterFolders:i=!1,editFileSuggestions:r,editFolderSuggestions:s,rootDirectory:l,showFolders:u="always"}=e,c=new Set(t),o=new Set(n),d=()=>t.length>0||n.length>0||a,y=(g=[])=>d()?g.filter(({name:m="",type:O})=>{if(!i&&O==="folder"||o.has(m)||a&&m.match(a))return!0;let[,...p]=m.split(".");if(p.length>=1){let k=p.length-1,_=p[k];do{if(c.has(_))return!0;k-=1,_=[p[k],_].join(".")}while(k>=0)}return!1}):g,S=(g=[])=>!r&&!s?g:g.map(m=>Object.assign(Object.assign({},m),(m.type==="file"?r:s)||{}));return{trigger:(g,m)=>{let O=g.lastIndexOf("/"),p=m.lastIndexOf("/");return O!==p?!0:O===-1&&p===-1?!1:g.slice(0,O)!==m.slice(0,p)},getQueryTerm:g=>g.slice(g.lastIndexOf("/")+1),custom:(g,m,O)=>ge(this,void 0,void 0,function*(){var p;let{isDangerous:k,currentWorkingDirectory:_,searchTerm:h}=O,x=(p=(0,v.getCurrentInsertedDirectory)(l??_,h,O))!==null&&p!==void 0?p:"/";try{let $=yield m({command:"ls",args:["-1ApL"],cwd:x}),ne=J($.stdout.split(`
`),[".DS_Store"]),G=[];for(let L of ne)if(L){let D=L.endsWith("/")?"folders":"filepaths";(D==="filepaths"&&u!=="only"||D==="folders"&&u!=="never")&&G.push({type:D==="filepaths"?"file":"folder",name:L,insertValue:L,isDangerous:k,context:{templateType:D}})}return S(y(G))}catch{return[]}})}}v.folders=Object.assign(()=>M({showFolders:"only"}),Object.freeze(M({showFolders:"only"})));v.filepaths=Object.assign(M,Object.freeze(M()))});var X=F(T=>{"use strict";var P=T&&T.__awaiter||function(e,t,n,a){function i(r){return r instanceof n?r:new n(function(s){s(r)})}return new(n||(n=Promise))(function(r,s){function l(o){try{c(a.next(o))}catch(d){s(d)}}function u(o){try{c(a.throw(o))}catch(d){s(d)}}function c(o){o.done?r(o.value):i(o.value).then(l,u)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.keyValueList=T.keyValue=T.valueList=void 0;var H=new Map;function q(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function B(e,t,n){return P(this,void 0,void 0,function*(){if(typeof e=="function"){let a=yield e(...n);return q(t,a)}if(typeof e[0]=="string"){let a=e.map(i=>({name:i}));return q(t,a)}return q(t,e)})}function N(e,t,n,a){return P(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let i=H.get(e);return i===void 0&&(i=yield B(e,t,a),H.set(e,i)),i}return B(e,t,a)})}function U(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function C(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function E(e,t){let n=new Set(e);return t.filter(a=>{var i;return typeof a.name=="string"?!n.has(a.name):!(!((i=a.name)===null||i===void 0)&&i.some(r=>n.has(r)))})}function me({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:a=!1,allowRepeatedValues:i=!1}){return{trigger:(r,s)=>r.lastIndexOf(e)!==s.lastIndexOf(e),getQueryTerm:r=>r.slice(r.lastIndexOf(e)+e.length),custom:(...r)=>P(this,void 0,void 0,function*(){var s;let l=yield N(t,a?e:"",n,r);if(i)return l;let[u]=r,c=(s=u[u.length-1])===null||s===void 0?void 0:s.split(e);return E(c,l)})}}T.valueList=me;function ye({separator:e="=",keys:t=[],values:n=[],cache:a=!1,insertSeparator:i=!0}){return{trigger:(r,s)=>r.indexOf(e)!==s.indexOf(e),getQueryTerm:r=>r.slice(r.indexOf(e)+1),custom:(...r)=>P(this,void 0,void 0,function*(){let[s]=r,u=!s[s.length-1].includes(e),c=u?t:n,o=U(u,a);return N(c,u&&i?e:"",o,r)})}}T.keyValue=ye;function ve({separator:e="=",delimiter:t=",",keys:n=[],values:a=[],cache:i=!1,insertSeparator:r=!0,insertDelimiter:s=!1,allowRepeatedKeys:l=!1,allowRepeatedValues:u=!0}){return{trigger:(c,o)=>{let d=C(c,e,t),y=C(o,e,t);return d!==y},getQueryTerm:c=>{let o=C(c,e,t);return c.slice(o+1)},custom:(...c)=>P(this,void 0,void 0,function*(){let[o]=c,d=o[o.length-1],y=C(d,e,t),S=y===-1||d.slice(y,y+e.length)!==e,g=S?n:a,m=U(S,i),p=yield N(g,S?r?e:"":s?t:"",m,c);if(S){if(l)return p;let _=d.split(t).map(h=>h.slice(0,h.indexOf(e)));return E(_,p)}if(u)return p;let k=d.split(t).map(_=>_.slice(_.indexOf(e)+e.length));return E(k,p)})}}T.keyValueList=ve});var Z=F(A=>{"use strict";var be=A&&A.__awaiter||function(e,t,n,a){function i(r){return r instanceof n?r:new n(function(s){s(r)})}return new(n||(n=Promise))(function(r,s){function l(o){try{c(a.next(o))}catch(d){s(d)}}function u(o){try{c(a.throw(o))}catch(d){s(d)}}function c(o){o.done?r(o.value):i(o.value).then(l,u)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(A,"__esModule",{value:!0});A.ai=void 0;var ke=4097,we=4,Oe=.8,_e=ke*we*Oe;function Se({name:e,prompt:t,message:n,postProcess:a,temperature:i,splitOn:r}){return{scriptTimeout:15e3,custom:(s,l,u)=>be(this,void 0,void 0,function*(){var c,o;let d=yield l({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let y=typeof t=="function"?yield t({tokens:s,executeCommand:l,generatorContext:u}):t,S=typeof n=="function"?yield n({tokens:s,executeCommand:l,generatorContext:u}):n;if(S===null||S.length===0)return console.warn("No message provided to AI generator"),[];let g=_e-((c=y?.length)!==null&&c!==void 0?c:0),m={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...y?[{role:"system",content:y}]:[],{role:"user",content:S.slice(0,g)}],temperature:i},O=JSON.stringify(m),p=yield l({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",O]}),k=JSON.parse(p.stdout);return(o=k?.choices.map(h=>{var x;return(x=h?.message)===null||x===void 0?void 0:x.content}).filter(h=>typeof h=="string").flatMap(h=>r?h.split(r).filter(x=>x.trim().length>0):[h]).map(h=>{if(a)return a(h);let x=h.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:x,insertValue:`'${x}'`,description:"Generated by Fig AI"}}))!==null&&o!==void 0?o:[]})}}A.ai=Se});var ee=F(b=>{"use strict";var xe=b&&b.__createBinding||(Object.create?function(e,t,n,a){a===void 0&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){a===void 0&&(a=n),e[a]=t[n]}),Te=b&&b.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&xe(t,e,n)};Object.defineProperty(b,"__esModule",{value:!0});b.ai=b.folders=b.filepaths=void 0;var Y=Q();Object.defineProperty(b,"filepaths",{enumerable:!0,get:function(){return Y.filepaths}});Object.defineProperty(b,"folders",{enumerable:!0,get:function(){return Y.folders}});Te(X(),b);var Ie=Z();Object.defineProperty(b,"ai",{enumerable:!0,get:function(){return Ie.ai}})});var te=le(ee(),1),V={trigger:(e,t)=>e.length===0||t.length===0&&e.length>0,custom:async(e,t)=>{let n=e[e.length-1];if(n.length===0)return[];let{stdout:a}=await t({command:"apt",args:["list"]});return a.trim().split(`
`).filter(i=>i.startsWith(n)).map(i=>i.replace(/\/.*/,"")).map(i=>({name:i,description:"Package",icon:"\u{1F4E6}",priority:50}))}},W={script:["apt","list","--installed"],postProcess:function(e){return e.trim().split(`
`).map(t=>({name:t.substring(0,t.indexOf("/")),description:"Package",icon:"\u{1F4E6}"}))}},Ve={script:["apt","list","--upgradable"],postProcess:function(e){return e.trim().split(`
`).map(t=>({name:t.substring(0,t.indexOf("/")),description:"Package",icon:"\u{1F4E6}"}))}},f=[{name:"-y",description:"Assume yes to all prompts",exclusiveOn:["--assume-no"]},{name:"--assume-no",description:"Assume no to all prompts",exclusiveOn:["-y"]}],I=[{name:["-d","--download-only"],description:"For any operation that would download packages, download them, but do nothing else"},{name:"--no-download",description:"Do not download packages, attempt to use already downloaded packages"}],w=[{name:["-s","--simulate"],description:"Simulate running this command and show it's output, without actually changing anything"}],je={name:"apt",description:"Package manager for Debian-based Linux distributions",subcommands:[{name:"update",description:"Update the package database",options:[...f]},{name:"upgrade",description:"Install all available upgrades",args:{name:"package",description:"Package(s) to upgrade",isVariadic:!0,isOptional:!0,generators:Ve},options:[...I,...f,...w]},{name:"full-upgrade",description:"Install available upgrades, removing currently installed packages if needed to upgrade the system as a whole",options:[...I,...f,...w]},{name:"install",description:"Install package(s)",args:{name:"package",description:"The package you want to install",isVariadic:!0,generators:[V,(0,te.filepaths)({extensions:["deb"]})]},options:[...I,...f,...w,{name:"--reinstall",description:"Reinstall the package if it is already installed"},{name:["-f","--fix-broken"],description:"Attempt to fix broken packages"}]},{name:"reinstall",description:"Reinstall package(s)",args:{name:"package",description:"The package you want to reinstall",isVariadic:!0,generators:W},options:[...f,...w]},{name:"remove",description:"Remove package(s)",args:{name:"package",description:"The package you want to remove",isVariadic:!0,generators:W},options:[...f,...w,{name:["-f","--fix-broken"],description:"Attempt to fix broken packages"}]},{name:"purge",description:"Remove package(s) and their configuration files",args:{name:"package",description:"The package you want to purge",isVariadic:!0,generators:W},options:[...f,...w]},{name:["autoremove","auto-remove"],description:"Remove unused packages",options:[...f,...w]},{name:"list",description:"List packages",options:[{name:"--installed",description:"List installed packages"},{name:"--upgradable",description:"List upgradable packages"}]},{name:"search",description:"Search for packages",args:{name:"query",description:"The query to search for"},options:[...f]},{name:"show",description:"Show package details",args:{name:"package",description:"The package you want to show",generators:V}},{name:"satisfy",description:"Satisfy package dependencies",args:{name:"package",description:"The package you want to satisfy",isVariadic:!0,generators:V},options:[...I,...f,...w]},{name:"clean",description:"Remove downloaded package files",options:[...f,...w]},{name:"edit-sources",description:"Edit the list of package sources",options:[...f]},{name:"source",description:"Fetch package source files",args:{name:"package",description:"The package you want to get source files for",isVariadic:!0,generators:V},options:[...I,...f,...w,{name:"--compile",description:"Compile the package to a binary using dpkg-buildpackage"},{name:"--only-source"},{name:"--host-architecture",description:"The architecture to build for",args:{name:"architecture",description:"The architecture to build for"}}]},{name:"build-dep",description:"Install/remove packages in an attempt to satisfy the build dependencies for a source package",args:{name:"package",description:"The package you want to build dependencies for",generators:V},options:[...I,...f,...w,{name:"--host-architecture",description:"The architecture to build for",args:{name:"architecture",description:"The architecture to build for"}},{name:"--only-source"}]},{name:"download",description:"Download package binary into the current directory",args:{name:"package",description:"The package you want to download",generators:V},options:[...I,...f]},{name:["autoclean","auto-clean"],description:"Like clean, but only removes package files that can no longer be downloaded",options:[...I,...f,...w]},{name:"changelog",description:"Show the changelog for a package",args:{name:"package",description:"The package you want to show the changelog for",generators:V,isVariadic:!0},options:[...I,...f]}],options:[{name:["-h","--help"],description:"Print help message and exit",isPersistent:!0,priority:40},{name:["-v","--version"],description:"Print version information and exit",isPersistent:!0,priority:40}]},Ce=je;export{Ce as default};
