var Z=Object.create;var q=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var se=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ee(t))!ne.call(e,i)&&i!==n&&q(e,i,{get:()=>t[i],enumerable:!(s=Y(t,i))||s.enumerable});return e};var ie=(e,t,n)=>(n=e!=null?Z(te(e)):{},se(t||!e||!e.__esModule?q(n,"default",{value:e,enumerable:!0}):n,e));var N=T(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.shellExpand=k.ensureTrailingSlash=void 0;var re=e=>e.endsWith("/")?e:`${e}/`;k.ensureTrailingSlash=re;var oe=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,ae=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,i=>{var r;let a=i.slice(1);return(r=t[a])!==null&&r!==void 0?r:i}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(i,r,a)=>{var c,u;return(u=(c=t[r])!==null&&c!==void 0?c:a)!==null&&u!==void 0?u:i}),le=(e,t)=>{var n;let{environmentVariables:s}=t;return ae(oe(e,(n=s?.HOME)!==null&&n!==void 0?n:"~"),s)};k.shellExpand=le});var K=T(v=>{"use strict";var ce=v&&v.__awaiter||function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function c(o){try{l(s.next(o))}catch(d){a(d)}}function u(o){try{l(s.throw(o))}catch(d){a(d)}}function l(o){o.done?r(o.value):i(o.value).then(c,u)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.filepaths=v.folders=v.getCurrentInsertedDirectory=v.sortFilesAlphabetically=void 0;var C=N();function W(e,t=[]){let n=t.map(i=>i.toLowerCase()),s=e.filter(i=>!n.includes(i.toLowerCase()));return[...s.filter(i=>!i.startsWith(".")).sort((i,r)=>i.localeCompare(r)),...s.filter(i=>i.startsWith(".")).sort((i,r)=>i.localeCompare(r)),"../"]}v.sortFilesAlphabetically=W;var ue=(e,t,n)=>{if(e===null)return"/";let s=(0,C.shellExpand)(t,n),i=s.slice(0,s.lastIndexOf("/")+1);return i===""?(0,C.ensureTrailingSlash)(e):i.startsWith("/")?i:`${(0,C.ensureTrailingSlash)(e)}${i}`};v.getCurrentInsertedDirectory=ue;function E(e={}){let{extensions:t=[],equals:n=[],matches:s,filterFolders:i=!1,editFileSuggestions:r,editFolderSuggestions:a,rootDirectory:c,showFolders:u="always"}=e,l=new Set(t),o=new Set(n),d=()=>t.length>0||n.length>0||s,g=(p=[])=>d()?p.filter(({name:m="",type:_})=>{if(!i&&_==="folder"||o.has(m)||s&&m.match(s))return!0;let[,...f]=m.split(".");if(f.length>=1){let b=f.length-1,O=f[b];do{if(l.has(O))return!0;b-=1,O=[f[b],O].join(".")}while(b>=0)}return!1}):p,S=(p=[])=>!r&&!a?p:p.map(m=>Object.assign(Object.assign({},m),(m.type==="file"?r:a)||{}));return{trigger:(p,m)=>{let _=p.lastIndexOf("/"),f=m.lastIndexOf("/");return _!==f?!0:_===-1&&f===-1?!1:p.slice(0,_)!==m.slice(0,f)},getQueryTerm:p=>p.slice(p.lastIndexOf("/")+1),custom:(p,m,_)=>ce(this,void 0,void 0,function*(){var f;let{isDangerous:b,currentWorkingDirectory:O,searchTerm:h}=_,x=(f=(0,v.getCurrentInsertedDirectory)(c??O,h,_))!==null&&f!==void 0?f:"/";try{let D=yield m({command:"ls",args:["-1ApL"],cwd:x}),X=W(D.stdout.split(`
`),[".DS_Store"]),R=[];for(let A of X)if(A){let V=A.endsWith("/")?"folders":"filepaths";(V==="filepaths"&&u!=="only"||V==="folders"&&u!=="never")&&R.push({type:V==="filepaths"?"file":"folder",name:A,insertValue:A,isDangerous:b,context:{templateType:V}})}return S(g(R))}catch{return[]}})}}v.folders=Object.assign(()=>E({showFolders:"only"}),Object.freeze(E({showFolders:"only"})));v.filepaths=Object.assign(E,Object.freeze(E()))});var J=T(w=>{"use strict";var j=w&&w.__awaiter||function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function c(o){try{l(s.next(o))}catch(d){a(d)}}function u(o){try{l(s.throw(o))}catch(d){a(d)}}function l(o){o.done?r(o.value):i(o.value).then(c,u)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.keyValueList=w.keyValue=w.valueList=void 0;var $=new Map;function F(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function z(e,t,n){return j(this,void 0,void 0,function*(){if(typeof e=="function"){let s=yield e(...n);return F(t,s)}if(typeof e[0]=="string"){let s=e.map(i=>({name:i}));return F(t,s)}return F(t,e)})}function P(e,t,n,s){return j(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let i=$.get(e);return i===void 0&&(i=yield z(e,t,s),$.set(e,i)),i}return z(e,t,s)})}function H(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function L(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function M(e,t){let n=new Set(e);return t.filter(s=>{var i;return typeof s.name=="string"?!n.has(s.name):!(!((i=s.name)===null||i===void 0)&&i.some(r=>n.has(r)))})}function de({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:s=!1,allowRepeatedValues:i=!1}){return{trigger:(r,a)=>r.lastIndexOf(e)!==a.lastIndexOf(e),getQueryTerm:r=>r.slice(r.lastIndexOf(e)+e.length),custom:(...r)=>j(this,void 0,void 0,function*(){var a;let c=yield P(t,s?e:"",n,r);if(i)return c;let[u]=r,l=(a=u[u.length-1])===null||a===void 0?void 0:a.split(e);return M(l,c)})}}w.valueList=de;function fe({separator:e="=",keys:t=[],values:n=[],cache:s=!1,insertSeparator:i=!0}){return{trigger:(r,a)=>r.indexOf(e)!==a.indexOf(e),getQueryTerm:r=>r.slice(r.indexOf(e)+1),custom:(...r)=>j(this,void 0,void 0,function*(){let[a]=r,u=!a[a.length-1].includes(e),l=u?t:n,o=H(u,s);return P(l,u&&i?e:"",o,r)})}}w.keyValue=fe;function pe({separator:e="=",delimiter:t=",",keys:n=[],values:s=[],cache:i=!1,insertSeparator:r=!0,insertDelimiter:a=!1,allowRepeatedKeys:c=!1,allowRepeatedValues:u=!0}){return{trigger:(l,o)=>{let d=L(l,e,t),g=L(o,e,t);return d!==g},getQueryTerm:l=>{let o=L(l,e,t);return l.slice(o+1)},custom:(...l)=>j(this,void 0,void 0,function*(){let[o]=l,d=o[o.length-1],g=L(d,e,t),S=g===-1||d.slice(g,g+e.length)!==e,p=S?n:s,m=H(S,i),f=yield P(p,S?r?e:"":a?t:"",m,l);if(S){if(c)return f;let O=d.split(t).map(h=>h.slice(0,h.indexOf(e)));return M(O,f)}if(u)return f;let b=d.split(t).map(O=>O.slice(O.indexOf(e)+e.length));return M(b,f)})}}w.keyValueList=pe});var Q=T(I=>{"use strict";var he=I&&I.__awaiter||function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function c(o){try{l(s.next(o))}catch(d){a(d)}}function u(o){try{l(s.throw(o))}catch(d){a(d)}}function l(o){o.done?r(o.value):i(o.value).then(c,u)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.ai=void 0;var me=4097,ge=4,ve=.8,ye=me*ge*ve;function be({name:e,prompt:t,message:n,postProcess:s,temperature:i,splitOn:r}){return{scriptTimeout:15e3,custom:(a,c,u)=>he(this,void 0,void 0,function*(){var l,o;let d=yield c({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let g=typeof t=="function"?yield t({tokens:a,executeCommand:c,generatorContext:u}):t,S=typeof n=="function"?yield n({tokens:a,executeCommand:c,generatorContext:u}):n;if(S===null||S.length===0)return console.warn("No message provided to AI generator"),[];let p=ye-((l=g?.length)!==null&&l!==void 0?l:0),m={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...g?[{role:"system",content:g}]:[],{role:"user",content:S.slice(0,p)}],temperature:i},_=JSON.stringify(m),f=yield c({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",_]}),b=JSON.parse(f.stdout);return(o=b?.choices.map(h=>{var x;return(x=h?.message)===null||x===void 0?void 0:x.content}).filter(h=>typeof h=="string").flatMap(h=>r?h.split(r).filter(x=>x.trim().length>0):[h]).map(h=>{if(s)return s(h);let x=h.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:x,insertValue:`'${x}'`,description:"Generated by Fig AI"}}))!==null&&o!==void 0?o:[]})}}I.ai=be});var G=T(y=>{"use strict";var _e=y&&y.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),Oe=y&&y.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_e(t,e,n)};Object.defineProperty(y,"__esModule",{value:!0});y.ai=y.folders=y.filepaths=void 0;var B=K();Object.defineProperty(y,"filepaths",{enumerable:!0,get:function(){return B.filepaths}});Object.defineProperty(y,"folders",{enumerable:!0,get:function(){return B.folders}});Oe(J(),y);var Se=Q();Object.defineProperty(y,"ai",{enumerable:!0,get:function(){return Se.ai}})});var U=ie(G(),1),xe={name:"ansible-playbook",description:"Runs Ansible playbooks, executing the defined tasks on the targeted hosts",args:{name:"playbook",description:"Playbook(s)",isVariadic:!0,generators:(0,U.filepaths)({extensions:["yml","yaml"]})},options:[{name:"--ask-vault-pass",description:"Ask for vault password"},{name:"--flush-cache",description:"Clears the fact cache for every host in inventory"},{name:"--force-handlers",description:"Run handlers even if a task fails"},{name:"--list-hosts",description:"Outputs a list of matching hosts; does not execute"},{name:"--list-tags",description:"List all available tags"},{name:"--list-tasks",description:"List all tasks that would be executed"},{name:"--skip-tags",description:"Only run plays and tasks whose tags do not match these values",args:{name:"tags"}},{name:"--start-at-task",description:"Start the playbook at the task matching this name one-step-at-a-time",args:{name:"task name"}},{name:"--step",description:"Execute one-step-at-a-time"},{name:"--syntax-check",description:"Perform a syntax check on the playbook, but do not execute it"},{name:"--vault-id",description:"Specify the vault identity to use",args:{name:"vault ID"}},{name:"--vault-password-file",description:"Specify a vault password file",args:{name:"vault password file",template:["filepaths"]}},{name:"--version",description:"Show program's version number, config file location, configured module search path, module location and executable location"},{name:["--check","-C"],description:"Don't make any changes; instead, try to predict some of the changes that may occur"},{name:["--diff","-D"],description:"When changing (small) files and templates, show the differences in those files"},{name:["--module-path","-M"],description:"Prepend colon-separated path(s) to module library",args:{name:"module path",template:["folders"]}},{name:["--extra-vars","-e"],description:"Set additional variables as key=value or YAML/JSON, if filename prepend with @",args:{name:"extra vars"}},{name:["--forks","-f"],description:"Specify number of parallel processes to use",args:{name:"forks"}},{name:["--help","-h"],description:"Show help for ansible"},{name:["--inventory","-i"],description:"Specify inventory host path or comma separated host list",args:{name:"inventory"}},{name:["--limit","-l"],description:"Limit selected hosts to an additional pattern",args:{name:"subset"}},{name:["--tags","-t"],description:"Only run plays and tasks tagged with these values",args:{name:"tags"}},{name:["--verbose","-v"],description:"Enable verbose mode"},{name:"-vvv",description:"Enable very verbose mode"},{name:"-vvvv",description:"Enable connection debug mode"},{name:"--become-method",description:"Privilege escalation method to use",args:{name:"become method",suggestions:["sudo","su","pbrun","pfexec","doas","dzdo","ksu","runas","machinectl"]}},{name:"--become-user",description:"Privilege escalation user to use",args:{name:"become user"}},{name:["--ask-become-pass","-K"],description:"Prompt for privilege escalation password"},{name:["--become","-b"],description:"Run operations with become"},{name:["--private-key","--key-file"],description:"Use this fole to authenticate the connection",args:{name:"private key",template:["filepaths"]}},{name:"--scp-extra-args",description:"Extra arguments to pass to (only) scp",args:{name:"SCP extra args"}},{name:"--sftp-extra-args",description:"Extra arguments to pass to (only) sftp",args:{name:"SFTP extra args"}},{name:"-ssh-extra-args",description:"Extra arguments to pass to (only) ssh",args:{name:"SSH extra args"}},{name:"--ssh-common-args",description:"Extra arguments to pass to sftp/scp/ssh",args:{name:"SSH common args"}},{name:["--timeout","-T"],description:"Override the connection timeout in seconds",args:{name:"timeout"}},{name:["--connection","-c"],description:"Connection type to use",args:{name:"connection type"}},{name:["--ask-pass","-k"],description:"Ask for connection password"},{name:["--user","-u"],description:"Connect as this user",args:{name:"user"}}]},Ve=xe;export{Ve as default};
