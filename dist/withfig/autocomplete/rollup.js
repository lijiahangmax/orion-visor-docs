var Z=Object.create;var W=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty;var T=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var ie=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of ee(n))!te.call(e,r)&&r!==t&&W(e,r,{get:()=>n[r],enumerable:!(i=Y(n,r))||i.enumerable});return e};var re=(e,n,t)=>(t=e!=null?Z(ne(e)):{},ie(n||!e||!e.__esModule?W(t,"default",{value:e,enumerable:!0}):t,e));var z=T(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.shellExpand=D.ensureTrailingSlash=void 0;var se=e=>e.endsWith("/")?e:`${e}/`;D.ensureTrailingSlash=se;var oe=(e,n)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",n):e,ae=(e,n)=>e.replace(/\$([A-Za-z0-9_]+)/g,r=>{var s;let a=r.slice(1);return(s=n[a])!==null&&s!==void 0?s:r}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(r,s,a)=>{var c,u;return(u=(c=n[s])!==null&&c!==void 0?c:a)!==null&&u!==void 0?u:r}),le=(e,n)=>{var t;let{environmentVariables:i}=n;return ae(oe(e,(t=i?.HOME)!==null&&t!==void 0?t:"~"),i)};D.shellExpand=le});var q=T(y=>{"use strict";var ce=y&&y.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(o){try{l(i.next(o))}catch(d){a(d)}}function u(o){try{l(i.throw(o))}catch(d){a(d)}}function l(o){o.done?s(o.value):r(o.value).then(c,u)}l((i=i.apply(e,n||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.filepaths=y.folders=y.getCurrentInsertedDirectory=y.sortFilesAlphabetically=void 0;var M=z();function R(e,n=[]){let t=n.map(r=>r.toLowerCase()),i=e.filter(r=>!t.includes(r.toLowerCase()));return[...i.filter(r=>!r.startsWith(".")).sort((r,s)=>r.localeCompare(s)),...i.filter(r=>r.startsWith(".")).sort((r,s)=>r.localeCompare(s)),"../"]}y.sortFilesAlphabetically=R;var ue=(e,n,t)=>{if(e===null)return"/";let i=(0,M.shellExpand)(n,t),r=i.slice(0,i.lastIndexOf("/")+1);return r===""?(0,M.ensureTrailingSlash)(e):r.startsWith("/")?r:`${(0,M.ensureTrailingSlash)(e)}${r}`};y.getCurrentInsertedDirectory=ue;function C(e={}){let{extensions:n=[],equals:t=[],matches:i,filterFolders:r=!1,editFileSuggestions:s,editFolderSuggestions:a,rootDirectory:c,showFolders:u="always"}=e,l=new Set(n),o=new Set(t),d=()=>n.length>0||t.length>0||i,g=(p=[])=>d()?p.filter(({name:h="",type:w})=>{if(!r&&w==="folder"||o.has(h)||i&&h.match(i))return!0;let[,...f]=h.split(".");if(f.length>=1){let b=f.length-1,S=f[b];do{if(l.has(S))return!0;b-=1,S=[f[b],S].join(".")}while(b>=0)}return!1}):p,_=(p=[])=>!s&&!a?p:p.map(h=>Object.assign(Object.assign({},h),(h.type==="file"?s:a)||{}));return{trigger:(p,h)=>{let w=p.lastIndexOf("/"),f=h.lastIndexOf("/");return w!==f?!0:w===-1&&f===-1?!1:p.slice(0,w)!==h.slice(0,f)},getQueryTerm:p=>p.slice(p.lastIndexOf("/")+1),custom:(p,h,w)=>ce(this,void 0,void 0,function*(){var f;let{isDangerous:b,currentWorkingDirectory:S,searchTerm:m}=w,x=(f=(0,y.getCurrentInsertedDirectory)(c??S,m,w))!==null&&f!==void 0?f:"/";try{let L=yield h({command:"ls",args:["-1ApL"],cwd:x}),X=R(L.stdout.split(`
`),[".DS_Store"]),P=[];for(let A of X)if(A){let k=A.endsWith("/")?"folders":"filepaths";(k==="filepaths"&&u!=="only"||k==="folders"&&u!=="never")&&P.push({type:k==="filepaths"?"file":"folder",name:A,insertValue:A,isDangerous:b,context:{templateType:k}})}return _(g(P))}catch{return[]}})}}y.folders=Object.assign(()=>C({showFolders:"only"}),Object.freeze(C({showFolders:"only"})));y.filepaths=Object.assign(C,Object.freeze(C()))});var J=T(O=>{"use strict";var j=O&&O.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(o){try{l(i.next(o))}catch(d){a(d)}}function u(o){try{l(i.throw(o))}catch(d){a(d)}}function l(o){o.done?s(o.value):r(o.value).then(c,u)}l((i=i.apply(e,n||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.keyValueList=O.keyValue=O.valueList=void 0;var G=new Map;function E(e,n){return e.length===0?n:n.map(t=>t.insertValue?t:Object.assign(Object.assign({},t),{insertValue:t.name+e}))}function U(e,n,t){return j(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...t);return E(n,i)}if(typeof e[0]=="string"){let i=e.map(r=>({name:r}));return E(n,i)}return E(n,e)})}function N(e,n,t,i){return j(this,void 0,void 0,function*(){if(t||Array.isArray(e)){let r=G.get(e);return r===void 0&&(r=yield U(e,n,i),G.set(e,r)),r}return U(e,n,i)})}function $(e,n){return typeof n=="string"?e&&n==="keys"||!e&&n==="values":n}function F(e,...n){return Math.max(...n.map(t=>e.lastIndexOf(t)))}function V(e,n){let t=new Set(e);return n.filter(i=>{var r;return typeof i.name=="string"?!t.has(i.name):!(!((r=i.name)===null||r===void 0)&&r.some(s=>t.has(s)))})}function de({delimiter:e=",",values:n=[],cache:t=!1,insertDelimiter:i=!1,allowRepeatedValues:r=!1}){return{trigger:(s,a)=>s.lastIndexOf(e)!==a.lastIndexOf(e),getQueryTerm:s=>s.slice(s.lastIndexOf(e)+e.length),custom:(...s)=>j(this,void 0,void 0,function*(){var a;let c=yield N(n,i?e:"",t,s);if(r)return c;let[u]=s,l=(a=u[u.length-1])===null||a===void 0?void 0:a.split(e);return V(l,c)})}}O.valueList=de;function fe({separator:e="=",keys:n=[],values:t=[],cache:i=!1,insertSeparator:r=!0}){return{trigger:(s,a)=>s.indexOf(e)!==a.indexOf(e),getQueryTerm:s=>s.slice(s.indexOf(e)+1),custom:(...s)=>j(this,void 0,void 0,function*(){let[a]=s,u=!a[a.length-1].includes(e),l=u?n:t,o=$(u,i);return N(l,u&&r?e:"",o,s)})}}O.keyValue=fe;function pe({separator:e="=",delimiter:n=",",keys:t=[],values:i=[],cache:r=!1,insertSeparator:s=!0,insertDelimiter:a=!1,allowRepeatedKeys:c=!1,allowRepeatedValues:u=!0}){return{trigger:(l,o)=>{let d=F(l,e,n),g=F(o,e,n);return d!==g},getQueryTerm:l=>{let o=F(l,e,n);return l.slice(o+1)},custom:(...l)=>j(this,void 0,void 0,function*(){let[o]=l,d=o[o.length-1],g=F(d,e,n),_=g===-1||d.slice(g,g+e.length)!==e,p=_?t:i,h=$(_,r),f=yield N(p,_?s?e:"":a?n:"",h,l);if(_){if(c)return f;let S=d.split(n).map(m=>m.slice(0,m.indexOf(e)));return V(S,f)}if(u)return f;let b=d.split(n).map(S=>S.slice(S.indexOf(e)+e.length));return V(b,f)})}}O.keyValueList=pe});var K=T(I=>{"use strict";var me=I&&I.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(o){try{l(i.next(o))}catch(d){a(d)}}function u(o){try{l(i.throw(o))}catch(d){a(d)}}function l(o){o.done?s(o.value):r(o.value).then(c,u)}l((i=i.apply(e,n||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.ai=void 0;var he=4097,ge=4,ye=.8,ve=he*ge*ye;function be({name:e,prompt:n,message:t,postProcess:i,temperature:r,splitOn:s}){return{scriptTimeout:15e3,custom:(a,c,u)=>me(this,void 0,void 0,function*(){var l,o;let d=yield c({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let g=typeof n=="function"?yield n({tokens:a,executeCommand:c,generatorContext:u}):n,_=typeof t=="function"?yield t({tokens:a,executeCommand:c,generatorContext:u}):t;if(_===null||_.length===0)return console.warn("No message provided to AI generator"),[];let p=ve-((l=g?.length)!==null&&l!==void 0?l:0),h={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...g?[{role:"system",content:g}]:[],{role:"user",content:_.slice(0,p)}],temperature:r},w=JSON.stringify(h),f=yield c({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",w]}),b=JSON.parse(f.stdout);return(o=b?.choices.map(m=>{var x;return(x=m?.message)===null||x===void 0?void 0:x.content}).filter(m=>typeof m=="string").flatMap(m=>s?m.split(s).filter(x=>x.trim().length>0):[m]).map(m=>{if(i)return i(m);let x=m.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:x,insertValue:`'${x}'`,description:"Generated by Fig AI"}}))!==null&&o!==void 0?o:[]})}}I.ai=be});var Q=T(v=>{"use strict";var we=v&&v.__createBinding||(Object.create?function(e,n,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(n,t);(!r||("get"in r?!n.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,i,r)}:function(e,n,t,i){i===void 0&&(i=t),e[i]=n[t]}),Se=v&&v.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&we(n,e,t)};Object.defineProperty(v,"__esModule",{value:!0});v.ai=v.folders=v.filepaths=void 0;var B=q();Object.defineProperty(v,"filepaths",{enumerable:!0,get:function(){return B.filepaths}});Object.defineProperty(v,"folders",{enumerable:!0,get:function(){return B.folders}});Se(J(),v);var _e=K();Object.defineProperty(v,"ai",{enumerable:!0,get:function(){return _e.ai}})});var H=re(Q(),1),xe={name:"rollup",description:"Next-generation ES module bundler",options:[{name:["-c","--config"],description:"Use this config file (if argument is used but value is unspecified, defaults to rollup.config.js)",args:{name:"filename",generators:(0,H.filepaths)({extensions:["config.js"]})}},{name:["-d","--dir"],args:{name:"dirname",description:"Directory for chunks (if absent, prints to stdout)",template:"folders"}},{name:["-e","--external"],args:{name:"ids",description:"Comma-separate list of module IDs to exclude"}},{name:["-f","--format"],args:{name:"format",description:"Type of output (amd, cjs, es, iife, umd, system)",suggestions:["amd","cjs","es","iife","umd","system"]}},{name:["-g","--globals"],args:{name:"pairs",description:"Comma-separate list of `moduleID:Global` pairs"}},{name:["-h","--help"],description:"Show help message"},{name:["-i","--input"],args:{name:"filename",description:"Input (alternative to <entry file>)",template:"filepaths"}},{name:["-m","--sourcemap"],description:"Generate sourcemap (`-m inline` for inline map)"},{name:["-n","--name"],args:{name:"name",description:"Name for UMD export"}},{name:["-o","--file"],args:{name:"output",description:"Single output file (if absent, prints to stdout)"}},{name:["-p","--plugin"],args:{name:"plugin",description:"Use the plugin specified (may be repeated)"}},{name:["-v","--version"],description:"Show version number"},{name:["-w","--watch"],description:"Watch files in bundle and rebuild on changes"},{name:"--amd.id",args:{name:"id",description:"ID for AMD module (default is anonymous)"}},{name:"--amd.autoId",description:"Generate the AMD ID based off the chunk name"},{name:"--amd.basePath",args:{name:"prefix",description:"Path to prepend to auto generated AMD ID"}},{name:"--amd.define",args:{name:"name",description:"Function to use in place of 'define'"}},{name:"--assetFileNames",args:{name:"pattern",description:"Name pattern for emitted assets"}},{name:"--banner",args:{name:"text",description:"Code to insert at top of bundle (outside wrapper)"}},{name:"--chunkFileNames",args:{name:"pattern",description:"Name pattern for emitted secondary chunks"}},{name:"--compact",description:"Minify wrapper code"},{name:"--context",args:{name:"variable",description:"Specify top-level 'this' value"}},{name:"--entryFileNames",args:{name:"pattern",description:"Name pattern for emitted entry chunks"}},{name:"--environment",args:{name:"values",description:"Settings passed to config file"}},{name:"--no-esModule",description:"Do not add __esmodule property"},{name:"--exports",args:{name:"mode",description:"Specify export mode (auto, default, named, none)"}},{name:"--extend",description:"Extend global variable defined by --name"},{name:"--no-externalLiveBindings",description:"Do not generate code to support live bindings"},{name:"--failAfterWarnings",description:"Exit with an error if the build produced warnings"},{name:"--footer",args:{name:"text",description:"Code to insert at end of bundle (outside wrapper)"}},{name:"--no-freeze",description:"Do not freeze namespace objects"},{name:"--no-hoistTransistiveImports",description:"Do not hoist transistive imports into entry chunks"},{name:"--no-indent",description:"Don't indent result"},{name:"--no-interop",description:"Do not include interop block"},{name:"--inlineDynamicImports",description:"Create a single bundle when using dynamic imports"},{name:"--intro",args:{name:"text",description:"Code to insert at top of bundle (inside wrapper)"}},{name:"--minifyInternalImports",description:"Force or disable minification of internal imports"},{name:"--namespaceToStringTag",description:"Create proper '.toString' methods for namespaces"},{name:"--noConflict",description:"Generate a noConflict method for UMD globals"},{name:"--outro",args:{name:"text",description:"Code to insert at end of bundle (inside wrapper)"}},{name:"--preferConst",description:"Use 'const' instead of 'var' for exports"},{name:"--no-preserveEntrySignatures",description:"Avoid facade chunks for entry points"},{name:"--preserveModules",description:"Preserve module structure"},{name:"--preserveModulesRoot",description:"Put preserved modules under this path at root level"},{name:"--preserveSymlinks",description:"Do not follow symlinks when resolving files"},{name:"--no-sanitizeFileName",description:"Do not replace invalid characters in file names"},{name:"--shimMissingExports",description:"Create shim variables for missing exports"},{name:"--silent",description:"Don't print warnings"},{name:"--sourcemapExcludeSources",description:"Do not include source code in source maps"},{name:"--sourcemapFile",description:"Specify bundle position for source maps",args:{name:"file"}},{name:"--stdin=ext",description:"Specify file extension used for stdin input"},{name:"--no-stdin",description:'Do not read "-" from stdin'},{name:"--no-strict",description:`Don't emit '"use strict"; in the generated modules`},{name:"--strictDeprecations",description:"Throw errors for deprecated features"},{name:"--systemNullSetters",description:"Replace empty SystemJS setters with 'null'"},{name:"--no-treeshake",description:"Disable tree-shaking optimizations"},{name:"--no-treeshake.annotations",description:"Ignore pure call annotations"},{name:"--no-treeshake.moduleSideEffects",description:"Assume modules have no side effects"},{name:"--no-treeshake.propertyReadSideEffects",description:"Ignore property access side-effects"},{name:"--no-treeshake.tryCatchDeoptimization",description:"Do not turn off try-catch-tree-shaking"},{name:"--no-treeshake.unknownGlobalSideEffects",description:"Assume unknown globals do not throw"},{name:"--waitForBuildInput",description:"Wait for bundle input files"},{name:"--watch.buildDelay",description:"Throttle watch rebuilds",args:{name:"number"}},{name:"--no-watch.clearScreen",description:"Do not clear the screen when rebuilding"},{name:"--watch.skipWrite",description:"Do not write files to disk when watching"},{name:"--watch.exclude",description:"Exclude files from being watched",args:{name:"files"}},{name:"--watch.include",description:"Limit watching to specified files",args:{name:"files"}},{name:"--validate",description:"Validate output"}]},ke=xe;export{ke as default};
