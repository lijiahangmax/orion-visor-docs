var Y=Object.create;var R=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var te=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,oe=Object.prototype.hasOwnProperty;var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of te(t))!oe.call(e,i)&&i!==n&&R(e,i,{get:()=>t[i],enumerable:!(o=ee(t,i))||o.enumerable});return e};var se=(e,t,n)=>(n=e!=null?Y(ne(e)):{},ie(t||!e||!e.__esModule?R(n,"default",{value:e,enumerable:!0}):n,e));var k=A(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.shellExpand=j.ensureTrailingSlash=void 0;var re=e=>e.endsWith("/")?e:`${e}/`;j.ensureTrailingSlash=re;var ae=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,le=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,i=>{var s;let a=i.slice(1);return(s=t[a])!==null&&s!==void 0?s:i}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(i,s,a)=>{var d,u;return(u=(d=t[s])!==null&&d!==void 0?d:a)!==null&&u!==void 0?u:i}),ce=(e,t)=>{var n;let{environmentVariables:o}=t;return le(ae(e,(n=o?.HOME)!==null&&n!==void 0?n:"~"),o)};j.shellExpand=ce});var $=A(y=>{"use strict";var de=y&&y.__awaiter||function(e,t,n,o){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function d(r){try{l(o.next(r))}catch(c){a(c)}}function u(r){try{l(o.throw(r))}catch(c){a(c)}}function l(r){r.done?s(r.value):i(r.value).then(d,u)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.filepaths=y.folders=y.getCurrentInsertedDirectory=y.sortFilesAlphabetically=void 0;var D=k();function W(e,t=[]){let n=t.map(i=>i.toLowerCase()),o=e.filter(i=>!n.includes(i.toLowerCase()));return[...o.filter(i=>!i.startsWith(".")).sort((i,s)=>i.localeCompare(s)),...o.filter(i=>i.startsWith(".")).sort((i,s)=>i.localeCompare(s)),"../"]}y.sortFilesAlphabetically=W;var ue=(e,t,n)=>{if(e===null)return"/";let o=(0,D.shellExpand)(t,n),i=o.slice(0,o.lastIndexOf("/")+1);return i===""?(0,D.ensureTrailingSlash)(e):i.startsWith("/")?i:`${(0,D.ensureTrailingSlash)(e)}${i}`};y.getCurrentInsertedDirectory=ue;function N(e={}){let{extensions:t=[],equals:n=[],matches:o,filterFolders:i=!1,editFileSuggestions:s,editFolderSuggestions:a,rootDirectory:d,showFolders:u="always"}=e,l=new Set(t),r=new Set(n),c=()=>t.length>0||n.length>0||o,v=(m=[])=>c()?m.filter(({name:g="",type:_})=>{if(!i&&_==="folder"||r.has(g)||o&&g.match(o))return!0;let[,...p]=g.split(".");if(p.length>=1){let S=p.length-1,O=p[S];do{if(l.has(O))return!0;S-=1,O=[p[S],O].join(".")}while(S>=0)}return!1}):m,w=(m=[])=>!s&&!a?m:m.map(g=>Object.assign(Object.assign({},g),(g.type==="file"?s:a)||{}));return{trigger:(m,g)=>{let _=m.lastIndexOf("/"),p=g.lastIndexOf("/");return _!==p?!0:_===-1&&p===-1?!1:m.slice(0,_)!==g.slice(0,p)},getQueryTerm:m=>m.slice(m.lastIndexOf("/")+1),custom:(m,g,_)=>de(this,void 0,void 0,function*(){var p;let{isDangerous:S,currentWorkingDirectory:O,searchTerm:h}=_,T=(p=(0,y.getCurrentInsertedDirectory)(d??O,h,_))!==null&&p!==void 0?p:"/";try{let q=yield g({command:"ls",args:["-1ApL"],cwd:T}),U=W(q.stdout.split(`
`),[".DS_Store"]),K=[];for(let F of U)if(F){let M=F.endsWith("/")?"folders":"filepaths";(M==="filepaths"&&u!=="only"||M==="folders"&&u!=="never")&&K.push({type:M==="filepaths"?"file":"folder",name:F,insertValue:F,isDangerous:S,context:{templateType:M}})}return w(v(K))}catch{return[]}})}}y.folders=Object.assign(()=>N({showFolders:"only"}),Object.freeze(N({showFolders:"only"})));y.filepaths=Object.assign(N,Object.freeze(N()))});var J=A(x=>{"use strict";var E=x&&x.__awaiter||function(e,t,n,o){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function d(r){try{l(o.next(r))}catch(c){a(c)}}function u(r){try{l(o.throw(r))}catch(c){a(c)}}function l(r){r.done?s(r.value):i(r.value).then(d,u)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.keyValueList=x.keyValue=x.valueList=void 0;var z=new Map;function P(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function H(e,t,n){return E(this,void 0,void 0,function*(){if(typeof e=="function"){let o=yield e(...n);return P(t,o)}if(typeof e[0]=="string"){let o=e.map(i=>({name:i}));return P(t,o)}return P(t,e)})}function C(e,t,n,o){return E(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let i=z.get(e);return i===void 0&&(i=yield H(e,t,o),z.set(e,i)),i}return H(e,t,o)})}function G(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function V(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function L(e,t){let n=new Set(e);return t.filter(o=>{var i;return typeof o.name=="string"?!n.has(o.name):!(!((i=o.name)===null||i===void 0)&&i.some(s=>n.has(s)))})}function fe({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:o=!1,allowRepeatedValues:i=!1}){return{trigger:(s,a)=>s.lastIndexOf(e)!==a.lastIndexOf(e),getQueryTerm:s=>s.slice(s.lastIndexOf(e)+e.length),custom:(...s)=>E(this,void 0,void 0,function*(){var a;let d=yield C(t,o?e:"",n,s);if(i)return d;let[u]=s,l=(a=u[u.length-1])===null||a===void 0?void 0:a.split(e);return L(l,d)})}}x.valueList=fe;function pe({separator:e="=",keys:t=[],values:n=[],cache:o=!1,insertSeparator:i=!0}){return{trigger:(s,a)=>s.indexOf(e)!==a.indexOf(e),getQueryTerm:s=>s.slice(s.indexOf(e)+1),custom:(...s)=>E(this,void 0,void 0,function*(){let[a]=s,u=!a[a.length-1].includes(e),l=u?t:n,r=G(u,o);return C(l,u&&i?e:"",r,s)})}}x.keyValue=pe;function me({separator:e="=",delimiter:t=",",keys:n=[],values:o=[],cache:i=!1,insertSeparator:s=!0,insertDelimiter:a=!1,allowRepeatedKeys:d=!1,allowRepeatedValues:u=!0}){return{trigger:(l,r)=>{let c=V(l,e,t),v=V(r,e,t);return c!==v},getQueryTerm:l=>{let r=V(l,e,t);return l.slice(r+1)},custom:(...l)=>E(this,void 0,void 0,function*(){let[r]=l,c=r[r.length-1],v=V(c,e,t),w=v===-1||c.slice(v,v+e.length)!==e,m=w?n:o,g=G(w,i),p=yield C(m,w?s?e:"":a?t:"",g,l);if(w){if(d)return p;let O=c.split(t).map(h=>h.slice(0,h.indexOf(e)));return L(O,p)}if(u)return p;let S=c.split(t).map(O=>O.slice(O.indexOf(e)+e.length));return L(S,p)})}}x.keyValueList=me});var Q=A(I=>{"use strict";var he=I&&I.__awaiter||function(e,t,n,o){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function d(r){try{l(o.next(r))}catch(c){a(c)}}function u(r){try{l(o.throw(r))}catch(c){a(c)}}function l(r){r.done?s(r.value):i(r.value).then(d,u)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.ai=void 0;var ge=4097,ve=4,ye=.8,be=ge*ve*ye;function Se({name:e,prompt:t,message:n,postProcess:o,temperature:i,splitOn:s}){return{scriptTimeout:15e3,custom:(a,d,u)=>he(this,void 0,void 0,function*(){var l,r;let c=yield d({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(c.stdout))return[];let v=typeof t=="function"?yield t({tokens:a,executeCommand:d,generatorContext:u}):t,w=typeof n=="function"?yield n({tokens:a,executeCommand:d,generatorContext:u}):n;if(w===null||w.length===0)return console.warn("No message provided to AI generator"),[];let m=be-((l=v?.length)!==null&&l!==void 0?l:0),g={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...v?[{role:"system",content:v}]:[],{role:"user",content:w.slice(0,m)}],temperature:i},_=JSON.stringify(g),p=yield d({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",_]}),S=JSON.parse(p.stdout);return(r=S?.choices.map(h=>{var T;return(T=h?.message)===null||T===void 0?void 0:T.content}).filter(h=>typeof h=="string").flatMap(h=>s?h.split(s).filter(T=>T.trim().length>0):[h]).map(h=>{if(o)return o(h);let T=h.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:T,insertValue:`'${T}'`,description:"Generated by Fig AI"}}))!==null&&r!==void 0?r:[]})}}I.ai=Se});var B=A(b=>{"use strict";var _e=b&&b.__createBinding||(Object.create?function(e,t,n,o){o===void 0&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){o===void 0&&(o=n),e[o]=t[n]}),Oe=b&&b.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_e(t,e,n)};Object.defineProperty(b,"__esModule",{value:!0});b.ai=b.folders=b.filepaths=void 0;var Z=$();Object.defineProperty(b,"filepaths",{enumerable:!0,get:function(){return Z.filepaths}});Object.defineProperty(b,"folders",{enumerable:!0,get:function(){return Z.folders}});Oe(J(),b);var we=Q();Object.defineProperty(b,"ai",{enumerable:!0,get:function(){return we.ai}})});var X=se(B(),1),f="https://upload.wikimedia.org/wikipedia/commons/7/7d/Microsoft_.NET_logo.svg",Te=[{name:"new",loadSpec:"dotnet/dotnet-new",icon:f},{name:"add",loadSpec:"dotnet/dotnet-add",icon:f},{name:"list",loadSpec:"dotnet/dotnet-list",icon:f},{name:"remove",loadSpec:"dotnet/dotnet-remove",icon:f},{name:"build",loadSpec:"dotnet/dotnet-build",icon:f},{name:"build-server",loadSpec:"dotnet/dotnet-build-server",icon:f},{name:"clean",loadSpec:"dotnet/dotnet-clean",icon:f},{name:"format",loadSpec:"dotnet/dotnet-format",icon:f},{name:"migrate",loadSpec:"dotnet/dotnet-migrate",icon:f},{name:"msbuild",loadSpec:"dotnet/dotnet-msbuild",icon:f},{name:"nuget",loadSpec:"dotnet/dotnet-nuget",icon:f},{name:"pack",loadSpec:"dotnet/dotnet-pack",icon:f},{name:"publish",loadSpec:"dotnet/dotnet-publish",icon:f},{name:"restore",loadSpec:"dotnet/dotnet-restore",icon:f},{name:"run",loadSpec:"dotnet/dotnet-run",icon:f},{name:"sln",loadSpec:"dotnet/dotnet-sln",icon:f},{name:"store",loadSpec:"dotnet/dotnet-store",icon:f},{name:"test",loadSpec:"dotnet/dotnet-test",icon:f},{name:"tool",loadSpec:"dotnet/dotnet-tool",icon:f}],xe={name:"dotnet",description:"The dotnet cli",icon:f,args:{name:"command",isOptional:!0,generators:(0,X.filepaths)({extensions:["dll"]})},options:[{name:"--version",description:"Prints out the version of the .NET SDK used by dotnet commands. Includes the effects of any global.json"},{name:"--info",description:"Prints out detailed information about a .NET installation and the machine environment, such as the current operating system, and commit SHA of the .NET version"},{name:"--list-runtimes",description:"Prints out a list of the installed .NET runtimes. An x86 version of the SDK lists only x86 runtimes, and an x64 version of the SDK lists only x64 runtimes"},{name:"--list-sdks",description:"Prints out a list of the installed .NET SDKs"},{name:["-?","-h","--help"],description:"Prints out a list of available commands"},{name:["-d","--diagnostics"],description:"Enables diagnostic output"},{name:["-v","--verbosity"],description:"Sets the verbosity level of the command. Allowed values are q[uiet], m[inimal], n[ormal], d[etailed], and diag[nostic]. Not supported in every command. See specific command page to determine if this option is available",args:{name:"verbosity",suggestions:["quiet","minimal","normal","detailed","diagnostic"]}},{name:"--additionalprobingpath",description:"Path containing probing policy and assemblies to probe",args:{name:"path",template:"folders"}},{name:"--additional-deps",description:"Path to an additional .deps.json file. A deps.json file contains a list of dependencies, compilation dependencies, and version information used to address assembly conflicts. For more information, see Runtime Configuration Files on GitHub",args:{name:"deps",template:"filepaths"}},{name:"-depsfile",description:"Path to the deps.json file. A deps.json file is a configuration file that contains information about dependencies necessary to run the application. This file is generated by the .NET SDK",args:{name:"deps",template:"filepaths"}},{name:"--runtimeconfig",description:"Path to a runtimeconfig.json file. A runtimeconfig.json file is a configuration file that contains run-time settings",args:{name:"path",template:"filepaths"}},{name:"--roll-forward",description:"Controls how roll forward is applied to the app. The SETTING can be one of the following values. If not specified, Minor is the default",args:{name:"setting",suggestions:["LatestPatch","Minor","Major","LatestMinor","LatestMajor","Disable"]}},{name:"--fx-version",description:"Version of the .NET runtime to use to run the application",args:{name:"version"}}],subcommands:Te,async generateSpec(e,t){let n=/(([a-zA-Z \.\[\]#,/][^ ]{1,})+)/g,o=[],{stdout:i}=await t({command:"dotnet",args:["tool","list","--global"]}),s=i.split(`
`).slice(2);for(let a of s){let[d,u,l]=a.match(n).map(c=>c.trim()),r=l.split(",").map(c=>({name:c.replace("dotnet-",""),description:c,args:{name:"args",isOptional:!0}}));o.push(...r)}return{name:"dotnet",subcommands:o}}},Ne=xe;export{Ne as default};
