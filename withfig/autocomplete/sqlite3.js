var Y=Object.create;var R=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var te=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var re=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of te(t))!ie.call(e,r)&&r!==n&&R(e,r,{get:()=>t[r],enumerable:!(i=ee(t,r))||i.enumerable});return e};var oe=(e,t,n)=>(n=e!=null?Y(ne(e)):{},re(t||!e||!e.__esModule?R(n,"default",{value:e,enumerable:!0}):n,e));var W=A(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.shellExpand=I.ensureTrailingSlash=void 0;var se=e=>e.endsWith("/")?e:`${e}/`;I.ensureTrailingSlash=se;var ae=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,le=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,r=>{var o;let a=r.slice(1);return(o=t[a])!==null&&o!==void 0?o:r}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(r,o,a)=>{var c,u;return(u=(c=t[o])!==null&&c!==void 0?c:a)!==null&&u!==void 0?u:r}),ce=(e,t)=>{var n;let{environmentVariables:i}=t;return le(ae(e,(n=i?.HOME)!==null&&n!==void 0?n:"~"),i)};I.shellExpand=ce});var Q=A(g=>{"use strict";var ue=g&&g.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(s){try{l(i.next(s))}catch(d){a(d)}}function u(s){try{l(i.throw(s))}catch(d){a(d)}}function l(s){s.done?o(s.value):r(s.value).then(c,u)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(g,"__esModule",{value:!0});g.filepaths=g.folders=g.getCurrentInsertedDirectory=g.sortFilesAlphabetically=void 0;var L=W();function z(e,t=[]){let n=t.map(r=>r.toLowerCase()),i=e.filter(r=>!n.includes(r.toLowerCase()));return[...i.filter(r=>!r.startsWith(".")).sort((r,o)=>r.localeCompare(o)),...i.filter(r=>r.startsWith(".")).sort((r,o)=>r.localeCompare(o)),"../"]}g.sortFilesAlphabetically=z;var de=(e,t,n)=>{if(e===null)return"/";let i=(0,L.shellExpand)(t,n),r=i.slice(0,i.lastIndexOf("/")+1);return r===""?(0,L.ensureTrailingSlash)(e):r.startsWith("/")?r:`${(0,L.ensureTrailingSlash)(e)}${r}`};g.getCurrentInsertedDirectory=de;function N(e={}){let{extensions:t=[],equals:n=[],matches:i,filterFolders:r=!1,editFileSuggestions:o,editFolderSuggestions:a,rootDirectory:c,showFolders:u="always"}=e,l=new Set(t),s=new Set(n),d=()=>t.length>0||n.length>0||i,v=(p=[])=>d()?p.filter(({name:m="",type:b})=>{if(!r&&b==="folder"||s.has(m)||i&&m.match(i))return!0;let[,...f]=m.split(".");if(f.length>=1){let S=f.length-1,_=f[S];do{if(l.has(_))return!0;S-=1,_=[f[S],_].join(".")}while(S>=0)}return!1}):p,O=(p=[])=>!o&&!a?p:p.map(m=>Object.assign(Object.assign({},m),(m.type==="file"?o:a)||{}));return{trigger:(p,m)=>{let b=p.lastIndexOf("/"),f=m.lastIndexOf("/");return b!==f?!0:b===-1&&f===-1?!1:p.slice(0,b)!==m.slice(0,f)},getQueryTerm:p=>p.slice(p.lastIndexOf("/")+1),custom:(p,m,b)=>ue(this,void 0,void 0,function*(){var f;let{isDangerous:S,currentWorkingDirectory:_,searchTerm:h}=b,w=(f=(0,g.getCurrentInsertedDirectory)(c??_,h,b))!==null&&f!==void 0?f:"/";try{let C=yield m({command:"ls",args:["-1ApL"],cwd:w}),G=z(C.stdout.split(`
`),[".DS_Store"]),P=[];for(let M of G)if(M){let F=M.endsWith("/")?"folders":"filepaths";(F==="filepaths"&&u!=="only"||F==="folders"&&u!=="never")&&P.push({type:F==="filepaths"?"file":"folder",name:M,insertValue:M,isDangerous:S,context:{templateType:F}})}return O(v(P))}catch{return[]}})}}g.folders=Object.assign(()=>N({showFolders:"only"}),Object.freeze(N({showFolders:"only"})));g.filepaths=Object.assign(N,Object.freeze(N()))});var K=A(x=>{"use strict";var j=x&&x.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(s){try{l(i.next(s))}catch(d){a(d)}}function u(s){try{l(i.throw(s))}catch(d){a(d)}}function l(s){s.done?o(s.value):r(s.value).then(c,u)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.keyValueList=x.keyValue=x.valueList=void 0;var Z=new Map;function V(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function $(e,t,n){return j(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...n);return V(t,i)}if(typeof e[0]=="string"){let i=e.map(r=>({name:r}));return V(t,i)}return V(t,e)})}function D(e,t,n,i){return j(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let r=Z.get(e);return r===void 0&&(r=yield $(e,t,i),Z.set(e,r)),r}return $(e,t,i)})}function k(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function E(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function q(e,t){let n=new Set(e);return t.filter(i=>{var r;return typeof i.name=="string"?!n.has(i.name):!(!((r=i.name)===null||r===void 0)&&r.some(o=>n.has(o)))})}function fe({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:i=!1,allowRepeatedValues:r=!1}){return{trigger:(o,a)=>o.lastIndexOf(e)!==a.lastIndexOf(e),getQueryTerm:o=>o.slice(o.lastIndexOf(e)+e.length),custom:(...o)=>j(this,void 0,void 0,function*(){var a;let c=yield D(t,i?e:"",n,o);if(r)return c;let[u]=o,l=(a=u[u.length-1])===null||a===void 0?void 0:a.split(e);return q(l,c)})}}x.valueList=fe;function pe({separator:e="=",keys:t=[],values:n=[],cache:i=!1,insertSeparator:r=!0}){return{trigger:(o,a)=>o.indexOf(e)!==a.indexOf(e),getQueryTerm:o=>o.slice(o.indexOf(e)+1),custom:(...o)=>j(this,void 0,void 0,function*(){let[a]=o,u=!a[a.length-1].includes(e),l=u?t:n,s=k(u,i);return D(l,u&&r?e:"",s,o)})}}x.keyValue=pe;function he({separator:e="=",delimiter:t=",",keys:n=[],values:i=[],cache:r=!1,insertSeparator:o=!0,insertDelimiter:a=!1,allowRepeatedKeys:c=!1,allowRepeatedValues:u=!0}){return{trigger:(l,s)=>{let d=E(l,e,t),v=E(s,e,t);return d!==v},getQueryTerm:l=>{let s=E(l,e,t);return l.slice(s+1)},custom:(...l)=>j(this,void 0,void 0,function*(){let[s]=l,d=s[s.length-1],v=E(d,e,t),O=v===-1||d.slice(v,v+e.length)!==e,p=O?n:i,m=k(O,r),f=yield D(p,O?o?e:"":a?t:"",m,l);if(O){if(c)return f;let _=d.split(t).map(h=>h.slice(0,h.indexOf(e)));return q(_,f)}if(u)return f;let S=d.split(t).map(_=>_.slice(_.indexOf(e)+e.length));return q(S,f)})}}x.keyValueList=he});var U=A(T=>{"use strict";var me=T&&T.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(s){try{l(i.next(s))}catch(d){a(d)}}function u(s){try{l(i.throw(s))}catch(d){a(d)}}function l(s){s.done?o(s.value):r(s.value).then(c,u)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.ai=void 0;var ve=4097,ge=4,ye=.8,Se=ve*ge*ye;function be({name:e,prompt:t,message:n,postProcess:i,temperature:r,splitOn:o}){return{scriptTimeout:15e3,custom:(a,c,u)=>me(this,void 0,void 0,function*(){var l,s;let d=yield c({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let v=typeof t=="function"?yield t({tokens:a,executeCommand:c,generatorContext:u}):t,O=typeof n=="function"?yield n({tokens:a,executeCommand:c,generatorContext:u}):n;if(O===null||O.length===0)return console.warn("No message provided to AI generator"),[];let p=Se-((l=v?.length)!==null&&l!==void 0?l:0),m={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...v?[{role:"system",content:v}]:[],{role:"user",content:O.slice(0,p)}],temperature:r},b=JSON.stringify(m),f=yield c({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",b]}),S=JSON.parse(f.stdout);return(s=S?.choices.map(h=>{var w;return(w=h?.message)===null||w===void 0?void 0:w.content}).filter(h=>typeof h=="string").flatMap(h=>o?h.split(o).filter(w=>w.trim().length>0):[h]).map(h=>{if(i)return i(h);let w=h.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:w,insertValue:`'${w}'`,description:"Generated by Fig AI"}}))!==null&&s!==void 0?s:[]})}}T.ai=be});var J=A(y=>{"use strict";var _e=y&&y.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Oe=y&&y.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_e(t,e,n)};Object.defineProperty(y,"__esModule",{value:!0});y.ai=y.folders=y.filepaths=void 0;var H=Q();Object.defineProperty(y,"filepaths",{enumerable:!0,get:function(){return H.filepaths}});Object.defineProperty(y,"folders",{enumerable:!0,get:function(){return H.folders}});Oe(K(),y);var we=U();Object.defineProperty(y,"ai",{enumerable:!0,get:function(){return we.ai}})});var B=oe(J(),1),X=(0,B.filepaths)({extensions:["sql","sqlite","sqlite3","db"]}),xe={name:"sqlite3",description:"A command line interface for SQLite version 3",parserDirectives:{flagsArePosixNoncompliant:!0},args:{name:"FILENAME",generators:X},options:[{name:"-append",description:"Append the database to the end of the file"},{name:"-ascii",description:"Set output mode to 'ascii'"},{name:"-bail",description:"Stop after hitting an error"},{name:"-batch",description:"Force batch I/O"},{name:"-column",description:"Set output mode to 'column'"},{name:"-cmd",description:'Run "COMMAND" before reading stdin',args:{name:"COMMAND"}},{name:"-csv",description:"Set output mode to 'csv'"},{name:"-echo",description:"Print commands before execution"},{name:"-init",description:"Read/process named file",args:{name:"FILENAME",generators:X}},{name:"-header",description:"Turn headers on"},{name:"-noheader",description:"Turn headers off"},{name:"-help",description:"Show help message"},{name:"-html",description:"Set output mode to HTML"},{name:"-interactive",description:"Force interactive I/O"},{name:"-line",description:"Set output mode to 'line'"},{name:"-list",description:"Set output mode to 'list'"},{name:"-lookaside",description:"Use N entries of SZ bytes for lookaside memory",args:[{name:"SIZE"},{name:"N"}]},{name:"-memtrace",description:"Trace all memory allocations and deallocations"},{name:"-mmap",description:"Default mmap size set to N",args:{name:"N"}},{name:"-newline",description:"Set output row separator",args:{name:"SEP",default:"'\\n'"}},{name:"-nofollow",description:"Refuse to open symbolic links to database files"},{name:"-nullvalue",description:"Set text string for NULL values",args:{name:"TEXT",default:"''"}},{name:"-pagecache",description:"Use N slots of SZ bytes each for page cache memory",args:[{name:"SIZE"},{name:"N"}]},{name:"-quote",description:"Set output mode to 'quote'"},{name:"-readonly",description:"Open the database read-only"},{name:"-separator",description:"Set output column separator",args:{name:"SEP",default:"'|'"}},{name:"-stats",description:"Print memory stats before each finalize"},{name:"-version",description:"Show SQLite version"},{name:"-vfs",description:"Use NAME as the default VFS",args:{name:"NAME"}}]},Ne=xe;export{Ne as default};
