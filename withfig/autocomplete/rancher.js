var ee=Object.create;var q=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var se=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var re=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ne(t))!ie.call(e,i)&&i!==n&&q(e,i,{get:()=>t[i],enumerable:!(s=te(t,i))||s.enumerable});return e};var oe=(e,t,n)=>(n=e!=null?ee(se(e)):{},re(t||!e||!e.__esModule?q(n,"default",{value:e,enumerable:!0}):n,e));var G=E(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.shellExpand=A.ensureTrailingSlash=void 0;var ae=e=>e.endsWith("/")?e:`${e}/`;A.ensureTrailingSlash=ae;var le=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,ce=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,i=>{var r;let o=i.slice(1);return(r=t[o])!==null&&r!==void 0?r:i}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(i,r,o)=>{var c,u;return(u=(c=t[r])!==null&&c!==void 0?c:o)!==null&&u!==void 0?u:i}),ue=(e,t)=>{var n;let{environmentVariables:s}=t;return ce(le(e,(n=s?.HOME)!==null&&n!==void 0?n:"~"),s)};A.shellExpand=ue});var U=E(v=>{"use strict";var de=v&&v.__awaiter||function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function c(a){try{l(s.next(a))}catch(d){o(d)}}function u(a){try{l(s.throw(a))}catch(d){o(d)}}function l(a){a.done?r(a.value):i(a.value).then(c,u)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.filepaths=v.folders=v.getCurrentInsertedDirectory=v.sortFilesAlphabetically=void 0;var P=G();function H(e,t=[]){let n=t.map(i=>i.toLowerCase()),s=e.filter(i=>!n.includes(i.toLowerCase()));return[...s.filter(i=>!i.startsWith(".")).sort((i,r)=>i.localeCompare(r)),...s.filter(i=>i.startsWith(".")).sort((i,r)=>i.localeCompare(r)),"../"]}v.sortFilesAlphabetically=H;var pe=(e,t,n)=>{if(e===null)return"/";let s=(0,P.shellExpand)(t,n),i=s.slice(0,s.lastIndexOf("/")+1);return i===""?(0,P.ensureTrailingSlash)(e):i.startsWith("/")?i:`${(0,P.ensureTrailingSlash)(e)}${i}`};v.getCurrentInsertedDirectory=pe;function j(e={}){let{extensions:t=[],equals:n=[],matches:s,filterFolders:i=!1,editFileSuggestions:r,editFolderSuggestions:o,rootDirectory:c,showFolders:u="always"}=e,l=new Set(t),a=new Set(n),d=()=>t.length>0||n.length>0||s,g=(f=[])=>d()?f.filter(({name:h="",type:w})=>{if(!i&&w==="folder"||a.has(h)||s&&h.match(s))return!0;let[,...p]=h.split(".");if(p.length>=1){let b=p.length-1,_=p[b];do{if(l.has(_))return!0;b-=1,_=[p[b],_].join(".")}while(b>=0)}return!1}):f,O=(f=[])=>!r&&!o?f:f.map(h=>Object.assign(Object.assign({},h),(h.type==="file"?r:o)||{}));return{trigger:(f,h)=>{let w=f.lastIndexOf("/"),p=h.lastIndexOf("/");return w!==p?!0:w===-1&&p===-1?!1:f.slice(0,w)!==h.slice(0,p)},getQueryTerm:f=>f.slice(f.lastIndexOf("/")+1),custom:(f,h,w)=>de(this,void 0,void 0,function*(){var p;let{isDangerous:b,currentWorkingDirectory:_,searchTerm:m}=w,S=(p=(0,v.getCurrentInsertedDirectory)(c??_,m,w))!==null&&p!==void 0?p:"/";try{let D=yield h({command:"ls",args:["-1ApL"],cwd:S}),Y=H(D.stdout.split(`
`),[".DS_Store"]),F=[];for(let R of Y)if(R){let L=R.endsWith("/")?"folders":"filepaths";(L==="filepaths"&&u!=="only"||L==="folders"&&u!=="never")&&F.push({type:L==="filepaths"?"file":"folder",name:R,insertValue:R,isDangerous:b,context:{templateType:L}})}return O(g(F))}catch{return[]}})}}v.folders=Object.assign(()=>j({showFolders:"only"}),Object.freeze(j({showFolders:"only"})));v.filepaths=Object.assign(j,Object.freeze(j()))});var B=E(T=>{"use strict";var x=T&&T.__awaiter||function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function c(a){try{l(s.next(a))}catch(d){o(d)}}function u(a){try{l(s.throw(a))}catch(d){o(d)}}function l(a){a.done?r(a.value):i(a.value).then(c,u)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.keyValueList=T.keyValue=T.valueList=void 0;var W=new Map;function V(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function $(e,t,n){return x(this,void 0,void 0,function*(){if(typeof e=="function"){let s=yield e(...n);return V(t,s)}if(typeof e[0]=="string"){let s=e.map(i=>({name:i}));return V(t,s)}return V(t,e)})}function k(e,t,n,s){return x(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let i=W.get(e);return i===void 0&&(i=yield $(e,t,s),W.set(e,i)),i}return $(e,t,s)})}function K(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function N(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function M(e,t){let n=new Set(e);return t.filter(s=>{var i;return typeof s.name=="string"?!n.has(s.name):!(!((i=s.name)===null||i===void 0)&&i.some(r=>n.has(r)))})}function fe({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:s=!1,allowRepeatedValues:i=!1}){return{trigger:(r,o)=>r.lastIndexOf(e)!==o.lastIndexOf(e),getQueryTerm:r=>r.slice(r.lastIndexOf(e)+e.length),custom:(...r)=>x(this,void 0,void 0,function*(){var o;let c=yield k(t,s?e:"",n,r);if(i)return c;let[u]=r,l=(o=u[u.length-1])===null||o===void 0?void 0:o.split(e);return M(l,c)})}}T.valueList=fe;function me({separator:e="=",keys:t=[],values:n=[],cache:s=!1,insertSeparator:i=!0}){return{trigger:(r,o)=>r.indexOf(e)!==o.indexOf(e),getQueryTerm:r=>r.slice(r.indexOf(e)+1),custom:(...r)=>x(this,void 0,void 0,function*(){let[o]=r,u=!o[o.length-1].includes(e),l=u?t:n,a=K(u,s);return k(l,u&&i?e:"",a,r)})}}T.keyValue=me;function he({separator:e="=",delimiter:t=",",keys:n=[],values:s=[],cache:i=!1,insertSeparator:r=!0,insertDelimiter:o=!1,allowRepeatedKeys:c=!1,allowRepeatedValues:u=!0}){return{trigger:(l,a)=>{let d=N(l,e,t),g=N(a,e,t);return d!==g},getQueryTerm:l=>{let a=N(l,e,t);return l.slice(a+1)},custom:(...l)=>x(this,void 0,void 0,function*(){let[a]=l,d=a[a.length-1],g=N(d,e,t),O=g===-1||d.slice(g,g+e.length)!==e,f=O?n:s,h=K(O,i),p=yield k(f,O?r?e:"":o?t:"",h,l);if(O){if(c)return p;let _=d.split(t).map(m=>m.slice(0,m.indexOf(e)));return M(_,p)}if(u)return p;let b=d.split(t).map(_=>_.slice(_.indexOf(e)+e.length));return M(b,p)})}}T.keyValueList=he});var J=E(I=>{"use strict";var ge=I&&I.__awaiter||function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function c(a){try{l(s.next(a))}catch(d){o(d)}}function u(a){try{l(s.throw(a))}catch(d){o(d)}}function l(a){a.done?r(a.value):i(a.value).then(c,u)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.ai=void 0;var ve=4097,ye=4,be=.8,we=ve*ye*be;function _e({name:e,prompt:t,message:n,postProcess:s,temperature:i,splitOn:r}){return{scriptTimeout:15e3,custom:(o,c,u)=>ge(this,void 0,void 0,function*(){var l,a;let d=yield c({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let g=typeof t=="function"?yield t({tokens:o,executeCommand:c,generatorContext:u}):t,O=typeof n=="function"?yield n({tokens:o,executeCommand:c,generatorContext:u}):n;if(O===null||O.length===0)return console.warn("No message provided to AI generator"),[];let f=we-((l=g?.length)!==null&&l!==void 0?l:0),h={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...g?[{role:"system",content:g}]:[],{role:"user",content:O.slice(0,f)}],temperature:i},w=JSON.stringify(h),p=yield c({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",w]}),b=JSON.parse(p.stdout);return(a=b?.choices.map(m=>{var S;return(S=m?.message)===null||S===void 0?void 0:S.content}).filter(m=>typeof m=="string").flatMap(m=>r?m.split(r).filter(S=>S.trim().length>0):[m]).map(m=>{if(s)return s(m);let S=m.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:S,insertValue:`'${S}'`,description:"Generated by Fig AI"}}))!==null&&a!==void 0?a:[]})}}I.ai=_e});var Q=E(y=>{"use strict";var Oe=y&&y.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),Se=y&&y.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Oe(t,e,n)};Object.defineProperty(y,"__esModule",{value:!0});y.ai=y.folders=y.filepaths=void 0;var z=U();Object.defineProperty(y,"filepaths",{enumerable:!0,get:function(){return z.filepaths}});Object.defineProperty(y,"folders",{enumerable:!0,get:function(){return z.folders}});Se(B(),y);var Te=J();Object.defineProperty(y,"ai",{enumerable:!0,get:function(){return Te.ai}})});var Z=oe(Q(),1),X={script:["rancher","server","ls"],postProcess:function(e){let t=e.split(`
`),n=[];for(let s=1;s<t.length;s++)if(t[s].match(/\S+/g)[0]!="*"){let r=t[s].match(/\S+/g)[1],o=t[s].match(/\S+/g)[2];n.push({name:r,description:o,icon:"https://rancher.com/docs/img/favicon.png"})}return n.length===0&&n.push({name:"No other servers found to swtich to",description:"",icon:"https://rancher.com/docs/img/favicon.png"}),n}},C=[{name:["--format","-o"],description:"Output format: 'json', 'yaml' or custom format",args:{name:"format",suggestions:["json","yaml"]}},{name:["--quiet","-q"],description:"Only display IDs or suppress help text"},{name:["--help","-h"],description:"Show help"}],Ae={name:"rancher",description:"The Rancher CLI (Command Line Interface) is a unified tool that you can use to interact with Rancher",subcommands:[{name:["apps","app"],description:"Operations with apps. Uses helm. Flags are prepended with 'helm' can also be accurately described by helm documentation",subcommands:[{name:"ls",description:"List all apps in the current Rancher server"},{name:"delete",description:"Delete an app",args:{name:"APP_NAME/APP_ID",description:"The name of the app to delete"}},{name:"install",description:"Install an app template",args:[{name:"TEMPLATE_NAME/TEMPLATE_PATH",description:"Install an app template in the current Rancher server"},{name:"APP_NAME",description:"The name of the app to install"}],options:[{name:["--answers","-a"],description:"Path to an answers file, the format of the file is a map with key:value. This supports JSON and YAML",args:{name:"answers-file-path",generators:(0,Z.filepaths)({extensions:["json","yaml"]})}},{name:["--values","-v"],description:"Path to a helm values file",args:{name:"values-file-path",template:"filepaths"}},{name:["--namespace","-n"],description:"Namespace to install the app into",args:{name:"namespace"}},{name:"--set",description:"Set answers for the template, can be used multiple times. Example: --set foo=bar",args:{name:"key=value"},isRepeatable:!0},{name:"--set-string",description:"Set string answers for the template (Skips Helm's type conversion), can be used multiple times. Example: --set-string foo=bar",args:{name:"key=value"},isRepeatable:!0},{name:"--version",description:"Version of the template to use",args:{name:"version"}},{name:"--no-prompt",description:"Suppress asking questions and use the default values when required answers are not provided"},{name:"--helm-timeout",description:"Amount of time for helm to wait for k8s commands (default is 300 secs). Example: --helm-timeout 600 (default: 300)",args:{name:"seconds"}},{name:"--helm-wait",description:"Helm will wait for as long as timeout value, for installed resources to be ready (pods, PVCs, deployments, etc.). Example: --helm-wait"}]},{name:"rollback",description:"Rollback an app to a previous version",args:[{name:"APP_NAME/APP_ID",description:"The name/id of the app to rollback"},{name:"REVISION_ID/REVISION_NAME",description:"The name/id of the revision to rollback"}]},{name:"upgrade",description:"Upgrade an existing app to a newer version"},{name:["list-templates","lt"],description:"List templates available for installation"},{name:["show-tempate","st"],description:"Show versions available to install for an app template"},{name:["show-app","sa"],description:"Show an app's available versions and revisions"},{name:"show-notes",description:"Show contents of apps notes.txt"}],options:C},{name:"catalog",description:"Operations with catalogs",subcommands:[{name:"ls",description:"List all catalogs in the current Rancher server",options:[...C,{name:["--verbose","-v"]}]},{name:"add",description:"Add a catalog",args:[{name:"CATALOG_NAME",description:"The name of the catalog to add"},{name:"CATALOG_URL",description:"The URL of the catalog to add"}],options:[{name:"--branch",description:"Branch from the url to use (default: 'master')",args:{name:"branch name"}},{name:"--helm-version",description:"Version of helm the app(s) in your catalog will use for deployment. Use 'v2' for helm 2 or 'v3' for helm 3 (default: 'v2')",args:{name:"version"}}]}]},{name:["clusters","cluster"],description:"Operations on clusters",icon:"https://rancher.com/docs/img/favicon.png"},{name:"context",description:"Operations for the context"},{name:"globaldns",description:"Operations on global DNS providers and entries"},{name:"inspect",description:"View details of resources"},{name:"kubectl",description:"Run kubectl commands",icon:"fig://icon?type=kubernetes"},{name:["login","-l"],description:"Login to a Rancher server",args:{name:"SERVER_URL",description:"The server url you want to login to"},options:[{name:"--token",description:"API Bearer Token to authenticate Rancher CLI to your Rancher server",args:{name:"BEARER_TOKEN",description:"The bearer token you want to use"}}]},{name:["machines","machine"],description:"Operations on machines"},{name:["multiclusterapps","multiclusterapp"],description:"Operations with multi-cluster apps"},{name:["namespaces","namespace"],description:"Operations on namespaces"},{name:["nodes","node"],description:"Operations on nodes"},{name:["projects","project"],description:"Operations on projects"},{name:"ps",description:"Show workloads in a project"},{name:"server",description:"Operations for the server",subcommands:[{name:"current",description:"Display the current server"},{name:"delete",description:"\u26A0\uFE0F Delete a server from the local config",args:{name:"SERVER_NAME",description:"The name of server you want to delete",generators:X},isDangerous:!0},{name:"ls",description:"List all servers"},{name:"switch",description:"Switch to a new server",args:{name:"SERVER_NAME",description:"The name of server you want to switch to",generators:X}}]},{name:["settings","setting"],description:"Show settings for the current server",subcommands:[{name:"ls",description:"List settings"},{name:"get",description:"Print a setting",args:{name:"SETTING_NAME",description:"The name of setting you want to get"}},{name:"set",description:"Set the value for a setting",args:[{name:"SETTINGNAME",description:"The name of setting you want to set"},{name:"SETTING_VALUE",description:"The value of setting you want to set"}],options:[...C,{name:"--default",description:"Reset the setting back to it's default value. If the default value is (blank) it will be set to that"}]}]},{name:"ssh",description:"SSH into a node"},{name:"up",description:"Apply compose config"},{name:"wait",description:"Wait for resources cluster, app, project, multiClusterApp"},{name:"token",description:"Authenticate and generate new kubeconfig token"},{name:["help","h"],description:"Shows a list of commands or help for one command"}],options:[{name:"--debug",description:"Debug logging"},{name:["--config","-c"],description:"Path to rancher config (default: `$home/.rancher`) [$RANCHER_CONFIG_DIR]",args:{name:"RANCHER_CONFIG_PATH",template:"folders",description:"The path to the rancher config"}},{name:["--help","-h"],description:"Show help for rancher cli"},{name:["--version","-v"],description:"Print the version"}]},Ne=Ae;export{Ne as default};
