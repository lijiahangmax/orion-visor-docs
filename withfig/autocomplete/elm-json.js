var Y=Object.create;var W=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var P=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var re=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of ne(n))!ie.call(e,r)&&r!==t&&W(e,r,{get:()=>n[r],enumerable:!(i=ee(n,r))||i.enumerable});return e};var se=(e,n,t)=>(t=e!=null?Y(te(e)):{},re(n||!e||!e.__esModule?W(t,"default",{value:e,enumerable:!0}):t,e));var G=P(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.shellExpand=T.ensureTrailingSlash=void 0;var oe=e=>e.endsWith("/")?e:`${e}/`;T.ensureTrailingSlash=oe;var le=(e,n)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",n):e,ae=(e,n)=>e.replace(/\$([A-Za-z0-9_]+)/g,r=>{var s;let l=r.slice(1);return(s=n[l])!==null&&s!==void 0?s:r}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(r,s,l)=>{var c,u;return(u=(c=n[s])!==null&&c!==void 0?c:l)!==null&&u!==void 0?u:r}),ce=(e,n)=>{var t;let{environmentVariables:i}=n;return ae(le(e,(t=i?.HOME)!==null&&t!==void 0?t:"~"),i)};T.shellExpand=ce});var U=P(v=>{"use strict";var ue=v&&v.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function c(o){try{a(i.next(o))}catch(d){l(d)}}function u(o){try{a(i.throw(o))}catch(d){l(d)}}function a(o){o.done?s(o.value):r(o.value).then(c,u)}a((i=i.apply(e,n||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.filepaths=v.folders=v.getCurrentInsertedDirectory=v.sortFilesAlphabetically=void 0;var E=G();function R(e,n=[]){let t=n.map(r=>r.toLowerCase()),i=e.filter(r=>!t.includes(r.toLowerCase()));return[...i.filter(r=>!r.startsWith(".")).sort((r,s)=>r.localeCompare(s)),...i.filter(r=>r.startsWith(".")).sort((r,s)=>r.localeCompare(s)),"../"]}v.sortFilesAlphabetically=R;var de=(e,n,t)=>{if(e===null)return"/";let i=(0,E.shellExpand)(n,t),r=i.slice(0,i.lastIndexOf("/")+1);return r===""?(0,E.ensureTrailingSlash)(e):r.startsWith("/")?r:`${(0,E.ensureTrailingSlash)(e)}${r}`};v.getCurrentInsertedDirectory=de;function L(e={}){let{extensions:n=[],equals:t=[],matches:i,filterFolders:r=!1,editFileSuggestions:s,editFolderSuggestions:l,rootDirectory:c,showFolders:u="always"}=e,a=new Set(n),o=new Set(t),d=()=>n.length>0||t.length>0||i,g=(p=[])=>d()?p.filter(({name:m="",type:b})=>{if(!r&&b==="folder"||o.has(m)||i&&m.match(i))return!0;let[,...f]=m.split(".");if(f.length>=1){let _=f.length-1,O=f[_];do{if(a.has(O))return!0;_-=1,O=[f[_],O].join(".")}while(_>=0)}return!1}):p,w=(p=[])=>!s&&!l?p:p.map(m=>Object.assign(Object.assign({},m),(m.type==="file"?s:l)||{}));return{trigger:(p,m)=>{let b=p.lastIndexOf("/"),f=m.lastIndexOf("/");return b!==f?!0:b===-1&&f===-1?!1:p.slice(0,b)!==m.slice(0,f)},getQueryTerm:p=>p.slice(p.lastIndexOf("/")+1),custom:(p,m,b)=>ue(this,void 0,void 0,function*(){var f;let{isDangerous:_,currentWorkingDirectory:O,searchTerm:h}=b,j=(f=(0,v.getCurrentInsertedDirectory)(c??O,h,b))!==null&&f!==void 0?f:"/";try{let K=yield m({command:"ls",args:["-1ApL"],cwd:j}),Z=R(K.stdout.split(`
`),[".DS_Store"]),k=[];for(let V of Z)if(V){let F=V.endsWith("/")?"folders":"filepaths";(F==="filepaths"&&u!=="only"||F==="folders"&&u!=="never")&&k.push({type:F==="filepaths"?"file":"folder",name:V,insertValue:V,isDangerous:_,context:{templateType:F}})}return w(g(k))}catch{return[]}})}}v.folders=Object.assign(()=>L({showFolders:"only"}),Object.freeze(L({showFolders:"only"})));v.filepaths=Object.assign(L,Object.freeze(L()))});var J=P(S=>{"use strict";var I=S&&S.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function c(o){try{a(i.next(o))}catch(d){l(d)}}function u(o){try{a(i.throw(o))}catch(d){l(d)}}function a(o){o.done?s(o.value):r(o.value).then(c,u)}a((i=i.apply(e,n||[])).next())})};Object.defineProperty(S,"__esModule",{value:!0});S.keyValueList=S.keyValue=S.valueList=void 0;var $=new Map;function M(e,n){return e.length===0?n:n.map(t=>t.insertValue?t:Object.assign(Object.assign({},t),{insertValue:t.name+e}))}function z(e,n,t){return I(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...t);return M(n,i)}if(typeof e[0]=="string"){let i=e.map(r=>({name:r}));return M(n,i)}return M(n,e)})}function q(e,n,t,i){return I(this,void 0,void 0,function*(){if(t||Array.isArray(e)){let r=$.get(e);return r===void 0&&(r=yield z(e,n,i),$.set(e,r)),r}return z(e,n,i)})}function H(e,n){return typeof n=="string"?e&&n==="keys"||!e&&n==="values":n}function C(e,...n){return Math.max(...n.map(t=>e.lastIndexOf(t)))}function N(e,n){let t=new Set(e);return n.filter(i=>{var r;return typeof i.name=="string"?!t.has(i.name):!(!((r=i.name)===null||r===void 0)&&r.some(s=>t.has(s)))})}function fe({delimiter:e=",",values:n=[],cache:t=!1,insertDelimiter:i=!1,allowRepeatedValues:r=!1}){return{trigger:(s,l)=>s.lastIndexOf(e)!==l.lastIndexOf(e),getQueryTerm:s=>s.slice(s.lastIndexOf(e)+e.length),custom:(...s)=>I(this,void 0,void 0,function*(){var l;let c=yield q(n,i?e:"",t,s);if(r)return c;let[u]=s,a=(l=u[u.length-1])===null||l===void 0?void 0:l.split(e);return N(a,c)})}}S.valueList=fe;function pe({separator:e="=",keys:n=[],values:t=[],cache:i=!1,insertSeparator:r=!0}){return{trigger:(s,l)=>s.indexOf(e)!==l.indexOf(e),getQueryTerm:s=>s.slice(s.indexOf(e)+1),custom:(...s)=>I(this,void 0,void 0,function*(){let[l]=s,u=!l[l.length-1].includes(e),a=u?n:t,o=H(u,i);return q(a,u&&r?e:"",o,s)})}}S.keyValue=pe;function he({separator:e="=",delimiter:n=",",keys:t=[],values:i=[],cache:r=!1,insertSeparator:s=!0,insertDelimiter:l=!1,allowRepeatedKeys:c=!1,allowRepeatedValues:u=!0}){return{trigger:(a,o)=>{let d=C(a,e,n),g=C(o,e,n);return d!==g},getQueryTerm:a=>{let o=C(a,e,n);return a.slice(o+1)},custom:(...a)=>I(this,void 0,void 0,function*(){let[o]=a,d=o[o.length-1],g=C(d,e,n),w=g===-1||d.slice(g,g+e.length)!==e,p=w?t:i,m=H(w,r),f=yield q(p,w?s?e:"":l?n:"",m,a);if(w){if(c)return f;let O=d.split(n).map(h=>h.slice(0,h.indexOf(e)));return N(O,f)}if(u)return f;let _=d.split(n).map(O=>O.slice(O.indexOf(e)+e.length));return N(_,f)})}}S.keyValueList=he});var Q=P(x=>{"use strict";var me=x&&x.__awaiter||function(e,n,t,i){function r(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function c(o){try{a(i.next(o))}catch(d){l(d)}}function u(o){try{a(i.throw(o))}catch(d){l(d)}}function a(o){o.done?s(o.value):r(o.value).then(c,u)}a((i=i.apply(e,n||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.ai=void 0;var ge=4097,ve=4,ye=.8,_e=ge*ve*ye;function be({name:e,prompt:n,message:t,postProcess:i,temperature:r,splitOn:s}){return{scriptTimeout:15e3,custom:(l,c,u)=>me(this,void 0,void 0,function*(){var a,o;let d=yield c({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let g=typeof n=="function"?yield n({tokens:l,executeCommand:c,generatorContext:u}):n,w=typeof t=="function"?yield t({tokens:l,executeCommand:c,generatorContext:u}):t;if(w===null||w.length===0)return console.warn("No message provided to AI generator"),[];let p=_e-((a=g?.length)!==null&&a!==void 0?a:0),m={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...g?[{role:"system",content:g}]:[],{role:"user",content:w.slice(0,p)}],temperature:r},b=JSON.stringify(m),f=yield c({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",b]}),_=JSON.parse(f.stdout);return(o=_?.choices.map(h=>{var j;return(j=h?.message)===null||j===void 0?void 0:j.content}).filter(h=>typeof h=="string").flatMap(h=>s?h.split(s).filter(j=>j.trim().length>0):[h]).map(h=>{if(i)return i(h);let j=h.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:j,insertValue:`'${j}'`,description:"Generated by Fig AI"}}))!==null&&o!==void 0?o:[]})}}x.ai=be});var X=P(y=>{"use strict";var Oe=y&&y.__createBinding||(Object.create?function(e,n,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(n,t);(!r||("get"in r?!n.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,i,r)}:function(e,n,t,i){i===void 0&&(i=t),e[i]=n[t]}),we=y&&y.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&Oe(n,e,t)};Object.defineProperty(y,"__esModule",{value:!0});y.ai=y.folders=y.filepaths=void 0;var B=U();Object.defineProperty(y,"filepaths",{enumerable:!0,get:function(){return B.filepaths}});Object.defineProperty(y,"folders",{enumerable:!0,get:function(){return B.folders}});we(J(),y);var je=Q();Object.defineProperty(y,"ai",{enumerable:!0,get:function(){return je.ai}})});var A=se(X(),1),D={script:["curl","-sH","accept-encoding: gzip","--compressed","https://package.elm-lang.org/search.json"],cache:{ttl:1e3*24*60*60*3},postProcess:e=>JSON.parse(e).map(n=>({name:n.name,description:n.summary}))},Se={name:"elm-json",description:"Deal with your elm.json",subcommands:[{name:"help",description:"Prints help information or the help of the given subcommand(s)",args:{name:"subcommand",template:"help"}},{name:"install",description:"Install a package",options:[{name:["--help","-h"],description:"Prints help information"},{name:"--test",description:"Install as a test-dependency"},{name:["--version","-V"],description:"Prints version information"},{name:"--yes",description:'Answer "yes" to all questions'}],args:[{name:"PACKAGE",description:"Package to install, e.g. elm/core or elm/core@1.0.2 or elm/core@1",debounce:!0,generators:D},{name:"-- INPUT",isOptional:!0,description:"The elm.json file to upgrade [default: elm.json]",generators:(0,A.filepaths)({extensions:["json"]})}]},{name:"new",description:"Create a new elm.json file",options:[{name:["--help","-h"],description:"Prints help information"},{name:["--version","-V"],description:"Prints version information"}]},{name:"tree",description:"List entire dependency graph as a tree",options:[{name:["--help","-h"],description:"Prints help information"},{name:"--test",description:"Promote test-dependencies to top-level dependencies"},{name:["--version","-V"],description:"Prints version information"}],args:[{name:"PACKAGE",description:"Limit output to show path to some (indirect) dependency",debounce:!0,generators:D},{name:"-- INPUT",isOptional:!0,description:"The elm.json file to solve [default: elm.json]",generators:(0,A.filepaths)({extensions:["json"]})}]},{name:"uninstall",description:"Uninstall a package",options:[{name:["--help","-h"],description:"Prints help information"},{name:["--version","-V"],description:"Prints version information"},{name:"--yes",description:'Answer "yes" to all questions'}],args:[{name:"PACKAGE",description:"Package to uninstall, e.g. elm/html",debounce:!0,generators:D},{name:"-- INPUT",isOptional:!0,description:"The elm.json file to upgrade [default: elm.json]",generators:(0,A.filepaths)({extensions:["json"]})}]},{name:"upgrade",description:"Bring your dependencies up to date",options:[{name:["--help","-h"],description:"Prints help information"},{name:"--unsafe",description:"Allow major versions bumps"},{name:["--version","-V"],description:"Prints version information"},{name:"--yes",description:'Answer "yes" to all questions'}],args:{name:"INPUT",description:"The elm.json file to upgrade [default: elm.json]",isOptional:!0,generators:(0,A.filepaths)({extensions:["json"]})}}],options:[{name:["--help","-h"],description:"Prints help information"},{name:"--offline",description:"Enable offline mode, which means no HTTP traffic will happen"},{name:["--version","-V"],description:"Prints version information"},{name:["--verbose","-v"],description:"Sets the level of verbosity"}]},Fe=Se;export{Fe as default};
