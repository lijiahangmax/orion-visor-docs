var U=Object.create;var R=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var j=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ee(t))!ne.call(e,s)&&s!==n&&R(e,s,{get:()=>t[s],enumerable:!(i=Z(t,s))||i.enumerable});return e};var se=(e,t,n)=>(n=e!=null?U(te(e)):{},ie(t||!e||!e.__esModule?R(n,"default",{value:e,enumerable:!0}):n,e));var W=j(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.shellExpand=T.ensureTrailingSlash=void 0;var re=e=>e.endsWith("/")?e:`${e}/`;T.ensureTrailingSlash=re;var oe=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,ae=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,s=>{var r;let a=s.slice(1);return(r=t[a])!==null&&r!==void 0?r:s}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(s,r,a)=>{var l,u;return(u=(l=t[r])!==null&&l!==void 0?l:a)!==null&&u!==void 0?u:s}),ce=(e,t)=>{var n;let{environmentVariables:i}=t;return ae(oe(e,(n=i?.HOME)!==null&&n!==void 0?n:"~"),i)};T.shellExpand=ce});var k=j(y=>{"use strict";var le=y&&y.__awaiter||function(e,t,n,i){function s(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function l(o){try{c(i.next(o))}catch(d){a(d)}}function u(o){try{c(i.throw(o))}catch(d){a(d)}}function c(o){o.done?r(o.value):s(o.value).then(l,u)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.filepaths=y.folders=y.getCurrentInsertedDirectory=y.sortFilesAlphabetically=void 0;var C=W();function q(e,t=[]){let n=t.map(s=>s.toLowerCase()),i=e.filter(s=>!n.includes(s.toLowerCase()));return[...i.filter(s=>!s.startsWith(".")).sort((s,r)=>s.localeCompare(r)),...i.filter(s=>s.startsWith(".")).sort((s,r)=>s.localeCompare(r)),"../"]}y.sortFilesAlphabetically=q;var ue=(e,t,n)=>{if(e===null)return"/";let i=(0,C.shellExpand)(t,n),s=i.slice(0,i.lastIndexOf("/")+1);return s===""?(0,C.ensureTrailingSlash)(e):s.startsWith("/")?s:`${(0,C.ensureTrailingSlash)(e)}${s}`};y.getCurrentInsertedDirectory=ue;function F(e={}){let{extensions:t=[],equals:n=[],matches:i,filterFolders:s=!1,editFileSuggestions:r,editFolderSuggestions:a,rootDirectory:l,showFolders:u="always"}=e,c=new Set(t),o=new Set(n),d=()=>t.length>0||n.length>0||i,g=(h=[])=>d()?h.filter(({name:m="",type:_})=>{if(!s&&_==="folder"||o.has(m)||i&&m.match(i))return!0;let[,...f]=m.split(".");if(f.length>=1){let b=f.length-1,O=f[b];do{if(c.has(O))return!0;b-=1,O=[f[b],O].join(".")}while(b>=0)}return!1}):h,w=(h=[])=>!r&&!a?h:h.map(m=>Object.assign(Object.assign({},m),(m.type==="file"?r:a)||{}));return{trigger:(h,m)=>{let _=h.lastIndexOf("/"),f=m.lastIndexOf("/");return _!==f?!0:_===-1&&f===-1?!1:h.slice(0,_)!==m.slice(0,f)},getQueryTerm:h=>h.slice(h.lastIndexOf("/")+1),custom:(h,m,_)=>le(this,void 0,void 0,function*(){var f;let{isDangerous:b,currentWorkingDirectory:O,searchTerm:p}=_,S=(f=(0,y.getCurrentInsertedDirectory)(l??O,p,_))!==null&&f!==void 0?f:"/";try{let H=yield m({command:"ls",args:["-1ApL"],cwd:S}),G=q(H.stdout.split(`
`),[".DS_Store"]),N=[];for(let A of G)if(A){let V=A.endsWith("/")?"folders":"filepaths";(V==="filepaths"&&u!=="only"||V==="folders"&&u!=="never")&&N.push({type:V==="filepaths"?"file":"folder",name:A,insertValue:A,isDangerous:b,context:{templateType:V}})}return w(g(N))}catch{return[]}})}}y.folders=Object.assign(()=>F({showFolders:"only"}),Object.freeze(F({showFolders:"only"})));y.filepaths=Object.assign(F,Object.freeze(F()))});var J=j(x=>{"use strict";var P=x&&x.__awaiter||function(e,t,n,i){function s(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function l(o){try{c(i.next(o))}catch(d){a(d)}}function u(o){try{c(i.throw(o))}catch(d){a(d)}}function c(o){o.done?r(o.value):s(o.value).then(l,u)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.keyValueList=x.keyValue=x.valueList=void 0;var z=new Map;function M(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function $(e,t,n){return P(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...n);return M(t,i)}if(typeof e[0]=="string"){let i=e.map(s=>({name:s}));return M(t,i)}return M(t,e)})}function L(e,t,n,i){return P(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let s=z.get(e);return s===void 0&&(s=yield $(e,t,i),z.set(e,s)),s}return $(e,t,i)})}function K(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function D(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function E(e,t){let n=new Set(e);return t.filter(i=>{var s;return typeof i.name=="string"?!n.has(i.name):!(!((s=i.name)===null||s===void 0)&&s.some(r=>n.has(r)))})}function de({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:i=!1,allowRepeatedValues:s=!1}){return{trigger:(r,a)=>r.lastIndexOf(e)!==a.lastIndexOf(e),getQueryTerm:r=>r.slice(r.lastIndexOf(e)+e.length),custom:(...r)=>P(this,void 0,void 0,function*(){var a;let l=yield L(t,i?e:"",n,r);if(s)return l;let[u]=r,c=(a=u[u.length-1])===null||a===void 0?void 0:a.split(e);return E(c,l)})}}x.valueList=de;function fe({separator:e="=",keys:t=[],values:n=[],cache:i=!1,insertSeparator:s=!0}){return{trigger:(r,a)=>r.indexOf(e)!==a.indexOf(e),getQueryTerm:r=>r.slice(r.indexOf(e)+1),custom:(...r)=>P(this,void 0,void 0,function*(){let[a]=r,u=!a[a.length-1].includes(e),c=u?t:n,o=K(u,i);return L(c,u&&s?e:"",o,r)})}}x.keyValue=fe;function he({separator:e="=",delimiter:t=",",keys:n=[],values:i=[],cache:s=!1,insertSeparator:r=!0,insertDelimiter:a=!1,allowRepeatedKeys:l=!1,allowRepeatedValues:u=!0}){return{trigger:(c,o)=>{let d=D(c,e,t),g=D(o,e,t);return d!==g},getQueryTerm:c=>{let o=D(c,e,t);return c.slice(o+1)},custom:(...c)=>P(this,void 0,void 0,function*(){let[o]=c,d=o[o.length-1],g=D(d,e,t),w=g===-1||d.slice(g,g+e.length)!==e,h=w?n:i,m=K(w,s),f=yield L(h,w?r?e:"":a?t:"",m,c);if(w){if(l)return f;let O=d.split(t).map(p=>p.slice(0,p.indexOf(e)));return E(O,f)}if(u)return f;let b=d.split(t).map(O=>O.slice(O.indexOf(e)+e.length));return E(b,f)})}}x.keyValueList=he});var Q=j(I=>{"use strict";var pe=I&&I.__awaiter||function(e,t,n,i){function s(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function l(o){try{c(i.next(o))}catch(d){a(d)}}function u(o){try{c(i.throw(o))}catch(d){a(d)}}function c(o){o.done?r(o.value):s(o.value).then(l,u)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.ai=void 0;var me=4097,ge=4,ye=.8,ve=me*ge*ye;function be({name:e,prompt:t,message:n,postProcess:i,temperature:s,splitOn:r}){return{scriptTimeout:15e3,custom:(a,l,u)=>pe(this,void 0,void 0,function*(){var c,o;let d=yield l({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let g=typeof t=="function"?yield t({tokens:a,executeCommand:l,generatorContext:u}):t,w=typeof n=="function"?yield n({tokens:a,executeCommand:l,generatorContext:u}):n;if(w===null||w.length===0)return console.warn("No message provided to AI generator"),[];let h=ve-((c=g?.length)!==null&&c!==void 0?c:0),m={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...g?[{role:"system",content:g}]:[],{role:"user",content:w.slice(0,h)}],temperature:s},_=JSON.stringify(m),f=yield l({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",_]}),b=JSON.parse(f.stdout);return(o=b?.choices.map(p=>{var S;return(S=p?.message)===null||S===void 0?void 0:S.content}).filter(p=>typeof p=="string").flatMap(p=>r?p.split(r).filter(S=>S.trim().length>0):[p]).map(p=>{if(i)return i(p);let S=p.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:S,insertValue:`'${S}'`,description:"Generated by Fig AI"}}))!==null&&o!==void 0?o:[]})}}I.ai=be});var B=j(v=>{"use strict";var _e=v&&v.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Oe=v&&v.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_e(t,e,n)};Object.defineProperty(v,"__esModule",{value:!0});v.ai=v.folders=v.filepaths=void 0;var Y=k();Object.defineProperty(v,"filepaths",{enumerable:!0,get:function(){return Y.filepaths}});Object.defineProperty(v,"folders",{enumerable:!0,get:function(){return Y.folders}});Oe(J(),v);var we=Q();Object.defineProperty(v,"ai",{enumerable:!0,get:function(){return we.ai}})});var X=se(B(),1),Se={name:"python3",description:"Run the python interpreter",generateSpec:async(e,t)=>{if((await t({command:"bash",args:["-c","cat manage.py | grep -q django"]})).status===0)return{name:"python3",subcommands:[{name:"manage.py",loadSpec:"django-admin"}]}},args:{name:"python script",isScript:!0,generators:(0,X.filepaths)({extensions:["py"],editFileSuggestions:{priority:76}})},options:[{name:"-c",insertValue:"-c '{cursor}'",description:"Execute the Python code in command. command can be one or more statements separated by newlines, with significant leading whitespace as in normal module code",args:{name:"command",isCommand:!0}},{name:"-m",insertValue:"-m '{cursor}'",description:"Search sys.path for the named module and execute its contents as the __main__ module",args:{name:"command",isCommand:!0}},{name:["-?","-h","--help"],description:"Print a short description of all command line options"},{name:["-V","--version"],description:"Print the Python version number and exit"},{name:"-b",description:"Issue a warning when comparing bytes or bytearray with str or bytes with int. Issue an error when the option is given twice (-bb)"},{name:"-B",description:"If given, Python won\u2019t try to write .pyc files on the import of source modules"},{name:"--check-hash-based-pycs",description:"Control the validation behavior of hash-based .pyc files. See Cached bytecode invalidation",args:{suggestions:[{name:"default"},{name:"always"},{name:"never"}]}},{name:"-d",description:"Turn on parser debugging output (for expert only, depending on compilation options)"},{name:"-E",description:"Ignore all PYTHON* environment variables, e.g. PYTHONPATH and PYTHONHOME, that might be set"},{name:"-i",description:"When a script is passed as first argument or the -c option is used, enter interactive mode after executing the script or the command, even when sys.stdin does not appear to be a terminal"},{name:"-I",description:"Run Python in isolated mode. This also implies -E and -s. In isolated mode sys.path contains neither the script\u2019s directory nor the user\u2019s site-packages directory"},{name:"-O",description:"Remove assert statements and any code conditional on the value of __debug__"},{name:"-OO",description:"Do -O and also discard docstrings"},{name:"-g",description:"Don\u2019t display the copyright and version messages even in interactive mode"},{name:"-R",description:"Turn on hash randomization. This option only has an effect if the PYTHONHASHSEED environment variable is set to 0, since hash randomization is enabled by default"},{name:"-s",description:"Don\u2019t add the user site-packages directory to sys.path"},{name:"-S",description:"Disable the import of the module site and the site-dependent manipulations of sys.path that it entails"},{name:"-u",description:"Force the stdout and stderr streams to be unbuffered. This option has no effect on the stdin stream"},{name:"-v",description:"Print a message each time a module is initialized, showing the place (filename or built-in module) from which it is loaded"},{name:"-W",description:"Warning control. Python\u2019s warning machinery by default prints warning messages to sys.stderr",args:{}},{name:"-x",description:"Skip the first line of the source, allowing use of non-Unix forms of #!cmd. This is intended for a DOS specific hack only"},{name:"-X",description:"Reserved for various implementation-specific options",args:{suggestions:[{name:"faulthandler"},{name:"showrefcount"},{name:"tracemalloc"},{name:"showalloccount"},{name:"importtime"},{name:"dev"},{name:"utf8"},{name:"pycache_prefix=PATH"}]}}]},Ve=Se;export{Ve as default};
