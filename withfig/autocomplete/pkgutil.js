var r=(t={})=>a=>{let{pathPrefix:p=""}=t,s=new Set;a.split(`
`).map(i=>{if(i.startsWith(p)){let o=i.replace(p,"").split("/")[0];o&&s.add(o+"/")}});let n=[];return s.forEach(i=>n.push({name:i})),n},e={bom:{script:["find",".","-type","f","-name","*.bom","-maxdepth","1"],postProcess:function(t){return t.split(`
`).map(a=>({name:a.replace("./","")}))}},packageIds:{script:["pkgutil","--pkgs"],splitOn:`
`},pkgs:{script:["find",".","-type","f","-name","*.pkg","-maxdepth","1"],postProcess:function(t){return t.split(`
`).map(a=>({name:a.replace("./","")}))}},groupIds:{script:["pkgutil","--groups"],splitOn:`
`},pkgFilenames:{custom:async(t,a)=>{let p=t.indexOf("--edit-pkg"),s=p+1;if(p===-1||s>=t.length)return[];let n=t[s],i=t[t.length-1];return r({pathPrefix:i})((await a({command:"pkgutil",args:["--files",n]})).stdout,t)},trigger:"/"}},c={name:"pkgutil",description:"Query and manipulate for macOS Installer packages and receipts",subcommands:[{name:["--packages","--pkgs"],description:"List all installed package IDs on the specified --volume"},{name:"--pkgs-plist",description:"List all installed package IDs, in Mac OS X plist(5) format, on the specified --volume"},{name:"--files",description:"List all of the files installed under the package-id",args:{name:"package-id",description:"The package ID to list the files of",generators:e.packageIds}},{name:"--export-plist",description:"Print all receipt information about the specified package-id in Mac OS X plist(5) format",args:{name:"package-id",description:"The package ID to export the plist of",generators:e.packageIds}},{name:"--verify",description:"Run repair_packages(8) to verify the specified package-id",args:{name:"package-id",description:"The package ID to verify",generators:e.packageIds}},{name:"--repair",description:"Run repair_packages(8) to repair the specified package-id",args:{name:"package-id",description:"The package ID to repair",generators:e.packageIds}},{name:"--pkg-info",description:"Print extended information about the specified package-id",args:{name:"package-id",description:"The package ID to print the info of",generators:e.packageIds}},{name:"--pkg-info-plist",description:"Print extended information about the specified package-id in Mac OS X plist(5) format",args:{name:"package-id",description:"The package ID to print the info of",generators:e.packageIds}},{name:"--forget",description:"Discard all receipt data about package-id, but don't touch installed files",args:{name:"package-id",description:"The package ID to forget",generators:e.packageIds}},{name:"--learn",description:"Update the ACLs of the given path in the receipt identified by --edit-pkg",args:{name:"path",description:"The path to update ACLs on",generators:e.pkgFilenames}},{name:"--pkg-groups",description:"List all of the package groups this package-id is a member of",args:{name:"package-id",description:"The package ID to list the groups of",generators:e.packageIds}},{name:"--groups",description:"List all of the package groups ont he specified --volume"},{name:"--group-plist",description:"List all of the package groups ont he specified --volume in Mac OS X plist(5) format"},{name:"--group-pkgs",description:"List all of the packages that are members of this group-id",args:{name:"group-id",description:"The group ID to list the packages of",generators:e.groupIds}},{name:"--file-info",description:"Show the metadata known about path",args:{name:"path",description:"The path to show the metadata of",template:"filepaths"}},{name:"--file-info-plist",description:"Show the metadata known about path in Mac OS X plist(5) format",args:{name:"path",description:"The path to show the metadata of",template:"filepaths"}},{name:"--expand",description:"Expand the flat package at pkg-path into a new directory specified by dir-path",args:[{name:"pkg-path",description:"The path to the flat package to expand",template:"filepaths"},{name:"dir-path",description:"The path to the directory to expand the package into",template:"folders"}]},{name:"--flatten",description:"Flatten the dir-path into a new flat package created at pkg-path",args:[{name:"dir-path",description:"The path to the directory to flatten",template:"folders"},{name:"pkg-path",description:"The path to the flat package to create",template:"filepaths"}]},{name:"--bom",description:"Extract any BOM files from the flat pkg at path into /tmp and return the filename(s)",args:{name:"path",description:"The path to the flat package to extract the BOM from",generators:e.bom}},{name:"--payload-files",description:"List the files archived within the uninstalled flat package(s) at path",args:{name:"path",description:"The path to the flat package to list the archived files of",generators:e.pkgs}},{name:"--check-signature",description:"Check the validity and trust of the signature on the package at pkg-path",args:{name:"pkg-path",description:"The path to the flat package to check the signature of",generators:e.pkgs}}],options:[{name:["-h","--help"],description:"A brief summary of commands and usage"},{name:["-f","--force"],description:"Skip confirmation before a potentially destructive or ambiguous action"},{name:["-v","--verbose"],description:"Output in a human-readable format"},{name:"--volume",description:"Perform all operations on specified volume",args:{name:"volume",description:"Volume to perform operations on",template:"folders"}},{name:"--edit-pkg",description:"Specifies an existing receipt to be modified in-place by --learn",args:{name:"package-id",description:"Package ID of the receipt to modify",generators:e.packageIds}},{name:"--only-files",description:"List only files (not directories) in --files listing"},{name:"--only-dirs",description:"List only directories (not files) in --files listing"},{name:"--regexp",description:"Use regex to match package-id arguments, if an exact match isn't found"},{name:"--pkgs",description:"List all installed package IDs, optionally matching kwarg REGEXP, on the specified --volume",requiresSeparator:!0,args:{name:"REGEXP",description:"Regular expression"}}]},d=c;export{d as default,e as pkgutilGenerators};
