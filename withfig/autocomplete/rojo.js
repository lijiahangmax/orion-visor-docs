var Z=Object.create;var q=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var oe=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ee(t))!ne.call(e,r)&&r!==n&&q(e,r,{get:()=>t[r],enumerable:!(o=Y(t,r))||o.enumerable});return e};var re=(e,t,n)=>(n=e!=null?Z(te(e)):{},oe(t||!e||!e.__esModule?q(n,"default",{value:e,enumerable:!0}):n,e));var N=T(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.shellExpand=I.ensureTrailingSlash=void 0;var ie=e=>e.endsWith("/")?e:`${e}/`;I.ensureTrailingSlash=ie;var se=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,ae=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,r=>{var i;let a=r.slice(1);return(i=t[a])!==null&&i!==void 0?i:r}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(r,i,a)=>{var u,c;return(c=(u=t[i])!==null&&u!==void 0?u:a)!==null&&c!==void 0?c:r}),le=(e,t)=>{var n;let{environmentVariables:o}=t;return ae(se(e,(n=o?.HOME)!==null&&n!==void 0?n:"~"),o)};I.shellExpand=le});var J=T(v=>{"use strict";var ue=v&&v.__awaiter||function(e,t,n,o){function r(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(s){try{l(o.next(s))}catch(d){a(d)}}function c(s){try{l(o.throw(s))}catch(d){a(d)}}function l(s){s.done?i(s.value):r(s.value).then(u,c)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.filepaths=v.folders=v.getCurrentInsertedDirectory=v.sortFilesAlphabetically=void 0;var E=N();function U(e,t=[]){let n=t.map(r=>r.toLowerCase()),o=e.filter(r=>!n.includes(r.toLowerCase()));return[...o.filter(r=>!r.startsWith(".")).sort((r,i)=>r.localeCompare(i)),...o.filter(r=>r.startsWith(".")).sort((r,i)=>r.localeCompare(i)),"../"]}v.sortFilesAlphabetically=U;var ce=(e,t,n)=>{if(e===null)return"/";let o=(0,E.shellExpand)(t,n),r=o.slice(0,o.lastIndexOf("/")+1);return r===""?(0,E.ensureTrailingSlash)(e):r.startsWith("/")?r:`${(0,E.ensureTrailingSlash)(e)}${r}`};v.getCurrentInsertedDirectory=ce;function D(e={}){let{extensions:t=[],equals:n=[],matches:o,filterFolders:r=!1,editFileSuggestions:i,editFolderSuggestions:a,rootDirectory:u,showFolders:c="always"}=e,l=new Set(t),s=new Set(n),d=()=>t.length>0||n.length>0||o,g=(p=[])=>d()?p.filter(({name:m="",type:O})=>{if(!r&&O==="folder"||s.has(m)||o&&m.match(o))return!0;let[,...f]=m.split(".");if(f.length>=1){let b=f.length-1,_=f[b];do{if(l.has(_))return!0;b-=1,_=[f[b],_].join(".")}while(b>=0)}return!1}):p,x=(p=[])=>!i&&!a?p:p.map(m=>Object.assign(Object.assign({},m),(m.type==="file"?i:a)||{}));return{trigger:(p,m)=>{let O=p.lastIndexOf("/"),f=m.lastIndexOf("/");return O!==f?!0:O===-1&&f===-1?!1:p.slice(0,O)!==m.slice(0,f)},getQueryTerm:p=>p.slice(p.lastIndexOf("/")+1),custom:(p,m,O)=>ue(this,void 0,void 0,function*(){var f;let{isDangerous:b,currentWorkingDirectory:_,searchTerm:h}=O,j=(f=(0,v.getCurrentInsertedDirectory)(u??_,h,O))!==null&&f!==void 0?f:"/";try{let k=yield m({command:"ls",args:["-1ApL"],cwd:j}),X=U(k.stdout.split(`
`),[".DS_Store"]),W=[];for(let P of X)if(P){let R=P.endsWith("/")?"folders":"filepaths";(R==="filepaths"&&c!=="only"||R==="folders"&&c!=="never")&&W.push({type:R==="filepaths"?"file":"folder",name:P,insertValue:P,isDangerous:b,context:{templateType:R}})}return x(g(W))}catch{return[]}})}}v.folders=Object.assign(()=>D({showFolders:"only"}),Object.freeze(D({showFolders:"only"})));v.filepaths=Object.assign(D,Object.freeze(D()))});var B=T(S=>{"use strict";var A=S&&S.__awaiter||function(e,t,n,o){function r(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(s){try{l(o.next(s))}catch(d){a(d)}}function c(s){try{l(o.throw(s))}catch(d){a(d)}}function l(s){s.done?i(s.value):r(s.value).then(u,c)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(S,"__esModule",{value:!0});S.keyValueList=S.keyValue=S.valueList=void 0;var K=new Map;function V(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function $(e,t,n){return A(this,void 0,void 0,function*(){if(typeof e=="function"){let o=yield e(...n);return V(t,o)}if(typeof e[0]=="string"){let o=e.map(r=>({name:r}));return V(t,o)}return V(t,e)})}function M(e,t,n,o){return A(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let r=K.get(e);return r===void 0&&(r=yield $(e,t,o),K.set(e,r)),r}return $(e,t,o)})}function z(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function C(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function F(e,t){let n=new Set(e);return t.filter(o=>{var r;return typeof o.name=="string"?!n.has(o.name):!(!((r=o.name)===null||r===void 0)&&r.some(i=>n.has(i)))})}function de({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:o=!1,allowRepeatedValues:r=!1}){return{trigger:(i,a)=>i.lastIndexOf(e)!==a.lastIndexOf(e),getQueryTerm:i=>i.slice(i.lastIndexOf(e)+e.length),custom:(...i)=>A(this,void 0,void 0,function*(){var a;let u=yield M(t,o?e:"",n,i);if(r)return u;let[c]=i,l=(a=c[c.length-1])===null||a===void 0?void 0:a.split(e);return F(l,u)})}}S.valueList=de;function fe({separator:e="=",keys:t=[],values:n=[],cache:o=!1,insertSeparator:r=!0}){return{trigger:(i,a)=>i.indexOf(e)!==a.indexOf(e),getQueryTerm:i=>i.slice(i.indexOf(e)+1),custom:(...i)=>A(this,void 0,void 0,function*(){let[a]=i,c=!a[a.length-1].includes(e),l=c?t:n,s=z(c,o);return M(l,c&&r?e:"",s,i)})}}S.keyValue=fe;function pe({separator:e="=",delimiter:t=",",keys:n=[],values:o=[],cache:r=!1,insertSeparator:i=!0,insertDelimiter:a=!1,allowRepeatedKeys:u=!1,allowRepeatedValues:c=!0}){return{trigger:(l,s)=>{let d=C(l,e,t),g=C(s,e,t);return d!==g},getQueryTerm:l=>{let s=C(l,e,t);return l.slice(s+1)},custom:(...l)=>A(this,void 0,void 0,function*(){let[s]=l,d=s[s.length-1],g=C(d,e,t),x=g===-1||d.slice(g,g+e.length)!==e,p=x?n:o,m=z(x,r),f=yield M(p,x?i?e:"":a?t:"",m,l);if(x){if(u)return f;let _=d.split(t).map(h=>h.slice(0,h.indexOf(e)));return F(_,f)}if(c)return f;let b=d.split(t).map(_=>_.slice(_.indexOf(e)+e.length));return F(b,f)})}}S.keyValueList=pe});var G=T(w=>{"use strict";var he=w&&w.__awaiter||function(e,t,n,o){function r(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(s){try{l(o.next(s))}catch(d){a(d)}}function c(s){try{l(o.throw(s))}catch(d){a(d)}}function l(s){s.done?i(s.value):r(s.value).then(u,c)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.ai=void 0;var me=4097,ge=4,ve=.8,ye=me*ge*ve;function be({name:e,prompt:t,message:n,postProcess:o,temperature:r,splitOn:i}){return{scriptTimeout:15e3,custom:(a,u,c)=>he(this,void 0,void 0,function*(){var l,s;let d=yield u({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let g=typeof t=="function"?yield t({tokens:a,executeCommand:u,generatorContext:c}):t,x=typeof n=="function"?yield n({tokens:a,executeCommand:u,generatorContext:c}):n;if(x===null||x.length===0)return console.warn("No message provided to AI generator"),[];let p=ye-((l=g?.length)!==null&&l!==void 0?l:0),m={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...g?[{role:"system",content:g}]:[],{role:"user",content:x.slice(0,p)}],temperature:r},O=JSON.stringify(m),f=yield u({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",O]}),b=JSON.parse(f.stdout);return(s=b?.choices.map(h=>{var j;return(j=h?.message)===null||j===void 0?void 0:j.content}).filter(h=>typeof h=="string").flatMap(h=>i?h.split(i).filter(j=>j.trim().length>0):[h]).map(h=>{if(o)return o(h);let j=h.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:j,insertValue:`'${j}'`,description:"Generated by Fig AI"}}))!==null&&s!==void 0?s:[]})}}w.ai=be});var Q=T(y=>{"use strict";var Oe=y&&y.__createBinding||(Object.create?function(e,t,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){o===void 0&&(o=n),e[o]=t[n]}),_e=y&&y.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Oe(t,e,n)};Object.defineProperty(y,"__esModule",{value:!0});y.ai=y.folders=y.filepaths=void 0;var H=J();Object.defineProperty(y,"filepaths",{enumerable:!0,get:function(){return H.filepaths}});Object.defineProperty(y,"folders",{enumerable:!0,get:function(){return H.folders}});_e(B(),y);var xe=G();Object.defineProperty(y,"ai",{enumerable:!0,get:function(){return xe.ai}})});var L=re(Q(),1),je={name:"rojo",description:"Enables professional-grade development tools for Roblox developers",subcommands:[{name:"help",description:"Print this message or the help of the given subcommand(s)",args:{name:"SUBCOMMAND",template:"help"}},{name:"build",description:"Generates a model or place file from the Rojo project",options:[{name:["--output","-o"],description:"Where to output the result. Should end in .rbxm, .rbxl, .rbxmx, or .rbxlx",isRequired:!0,args:{name:"OUTPUT",description:"Where to output the result. Should end in .rbxm, .rbxl, .rbxmx, or .rbxlx",generators:(0,L.filepaths)({extensions:["rbxm","rbxl","rbxmx","rbxlx"]}),suggestCurrentToken:!0}},{name:"--watch",description:"Whether to automatically rebuild when any input files change"}],args:{name:"PROJECT",description:"Path to the project to serve. Defaults to the current directory [default: ]"}},{name:"doc",description:"Open Rojo's documentation in your browser"},{name:"fmt-project",description:"Reformat a Rojo project using the standard JSON formatting rules",args:{name:"PROJECT",description:"Path to the project to format. Defaults to the current directory [default: ]"}},{name:"init",description:"Initializes a new Rojo project",options:[{name:"--kind",description:"The kind of project to create, 'place' or 'model'. Defaults to place",args:{name:"KIND",description:"The kind of project to create, 'place' or 'model'. Defaults to place",suggestions:["place","model"]}}],args:{name:"PATH",description:"Path to the place to create the project. Defaults to the current directory [default: ]"}},{name:"plugin",description:"Install Rojo's plugin"},{name:"serve",description:"Expose a Rojo project to the Rojo Studio plugin",options:[{name:"address",description:"The IP address to listen on. Defaults to `127.0.0.1`",args:{name:"ADDRESS",description:"The IP address to listen on. Defaults to `127.0.0.1`"}}]},{name:"sourcemap",description:"Generates a sourcemap file from the Rojo project",options:[{name:"--include-non-scripts",description:"If non-script files should be included or not. Defaults to false"},{name:["--output","-o"],description:"Where to output the sourcemap. Omit this to use stdout instead of writing to a file. Should end in .json",args:{name:"OUTPUT",description:"Where to output the sourcemap. Omit this to use stdout instead of writing to a file. Should end in .json",generators:(0,L.filepaths)({extensions:["rbxm","rbxl","rbxmx","rbxlx"]}),suggestCurrentToken:!0}}],args:{name:"PROJECT",description:"Path to the project to use for the sourcemap. Defaults to the current directory [default: ]"}},{name:"upload",description:"Builds the project and uploads it to Roblox",options:[{name:"--api-key",description:"API key obtained from create.roblox.com/credentials. Rojo will use the Open Cloud API when this is provided. Only supports uploading to a place",args:{name:"API_KEY",description:"API key obtained from create.roblox.com/credentials. Rojo will use the Open Cloud API when this is provided. Only supports uploading to a place"}},{name:"--asset_id",description:"Asset ID to upload to",args:{name:"ASSET_ID",description:"Asset ID to upload to"}},{name:"--cookie",description:"Authenication cookie to use. If not specified, Rojo will attempt to find one from the system automatically",args:{name:"COOKIE",description:"Authenication cookie to use. If not specified, Rojo will attempt to find one from the system automatically"}},{name:"--universe_id",description:"The Universe ID of the given place. Required when using the Open Cloud API",args:{name:"UNIVERSE_ID",description:"The Universe ID of the given place. Required when using the Open Cloud API"}}],args:{}}],options:[{name:["--help","-h"],description:"Print help information",isPersistent:!0},{name:"--color",description:"Set color behavior. Valid values are auto, always, and never [default: auto]",isPersistent:!0,args:{name:"COLOR",suggestions:["auto","always","never"],default:"auto"}},{name:["--verbose","-v"],description:"Sets verbosity level. Can be specified multiple times",isRepeatable:4,isPersistent:!0},{name:["--version","-V"],description:"Print version information"}]},Re=je;export{Re as default};
