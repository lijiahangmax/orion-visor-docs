var Z=Object.create;var W=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var re=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ee(t))!ne.call(e,i)&&i!==n&&W(e,i,{get:()=>t[i],enumerable:!(r=Y(t,i))||r.enumerable});return e};var ie=(e,t,n)=>(n=e!=null?Z(te(e)):{},re(t||!e||!e.__esModule?W(n,"default",{value:e,enumerable:!0}):n,e));var J=T(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.shellExpand=j.ensureTrailingSlash=void 0;var se=e=>e.endsWith("/")?e:`${e}/`;j.ensureTrailingSlash=se;var oe=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,le=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,i=>{var s;let l=i.slice(1);return(s=t[l])!==null&&s!==void 0?s:i}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(i,s,l)=>{var u,c;return(c=(u=t[s])!==null&&u!==void 0?u:l)!==null&&c!==void 0?c:i}),ae=(e,t)=>{var n;let{environmentVariables:r}=t;return le(oe(e,(n=r?.HOME)!==null&&n!==void 0?n:"~"),r)};j.shellExpand=ae});var $=T(g=>{"use strict";var ue=g&&g.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(o){try{a(r.next(o))}catch(d){l(d)}}function c(o){try{a(r.throw(o))}catch(d){l(d)}}function a(o){o.done?s(o.value):i(o.value).then(u,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(g,"__esModule",{value:!0});g.filepaths=g.folders=g.getCurrentInsertedDirectory=g.sortFilesAlphabetically=void 0;var L=J();function R(e,t=[]){let n=t.map(i=>i.toLowerCase()),r=e.filter(i=>!n.includes(i.toLowerCase()));return[...r.filter(i=>!i.startsWith(".")).sort((i,s)=>i.localeCompare(s)),...r.filter(i=>i.startsWith(".")).sort((i,s)=>i.localeCompare(s)),"../"]}g.sortFilesAlphabetically=R;var ce=(e,t,n)=>{if(e===null)return"/";let r=(0,L.shellExpand)(t,n),i=r.slice(0,r.lastIndexOf("/")+1);return i===""?(0,L.ensureTrailingSlash)(e):i.startsWith("/")?i:`${(0,L.ensureTrailingSlash)(e)}${i}`};g.getCurrentInsertedDirectory=ce;function F(e={}){let{extensions:t=[],equals:n=[],matches:r,filterFolders:i=!1,editFileSuggestions:s,editFolderSuggestions:l,rootDirectory:u,showFolders:c="always"}=e,a=new Set(t),o=new Set(n),d=()=>t.length>0||n.length>0||r,v=(p=[])=>d()?p.filter(({name:y="",type:O})=>{if(!i&&O==="folder"||o.has(y)||r&&y.match(r))return!0;let[,...f]=y.split(".");if(f.length>=1){let _=f.length-1,b=f[_];do{if(a.has(b))return!0;_-=1,b=[f[_],b].join(".")}while(_>=0)}return!1}):p,S=(p=[])=>!s&&!l?p:p.map(y=>Object.assign(Object.assign({},y),(y.type==="file"?s:l)||{}));return{trigger:(p,y)=>{let O=p.lastIndexOf("/"),f=y.lastIndexOf("/");return O!==f?!0:O===-1&&f===-1?!1:p.slice(0,O)!==y.slice(0,f)},getQueryTerm:p=>p.slice(p.lastIndexOf("/")+1),custom:(p,y,O)=>ue(this,void 0,void 0,function*(){var f;let{isDangerous:_,currentWorkingDirectory:b,searchTerm:h}=O,x=(f=(0,g.getCurrentInsertedDirectory)(u??b,h,O))!==null&&f!==void 0?f:"/";try{let P=yield y({command:"ls",args:["-1ApL"],cwd:x}),X=R(P.stdout.split(`
`),[".DS_Store"]),q=[];for(let A of X)if(A){let D=A.endsWith("/")?"folders":"filepaths";(D==="filepaths"&&c!=="only"||D==="folders"&&c!=="never")&&q.push({type:D==="filepaths"?"file":"folder",name:A,insertValue:A,isDangerous:_,context:{templateType:D}})}return S(v(q))}catch{return[]}})}}g.folders=Object.assign(()=>F({showFolders:"only"}),Object.freeze(F({showFolders:"only"})));g.filepaths=Object.assign(F,Object.freeze(F()))});var Q=T(w=>{"use strict";var V=w&&w.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(o){try{a(r.next(o))}catch(d){l(d)}}function c(o){try{a(r.throw(o))}catch(d){l(d)}}function a(o){o.done?s(o.value):i(o.value).then(u,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.keyValueList=w.keyValue=w.valueList=void 0;var k=new Map;function M(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function K(e,t,n){return V(this,void 0,void 0,function*(){if(typeof e=="function"){let r=yield e(...n);return M(t,r)}if(typeof e[0]=="string"){let r=e.map(i=>({name:i}));return M(t,r)}return M(t,e)})}function N(e,t,n,r){return V(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let i=k.get(e);return i===void 0&&(i=yield K(e,t,r),k.set(e,i)),i}return K(e,t,r)})}function z(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function C(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function E(e,t){let n=new Set(e);return t.filter(r=>{var i;return typeof r.name=="string"?!n.has(r.name):!(!((i=r.name)===null||i===void 0)&&i.some(s=>n.has(s)))})}function de({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:r=!1,allowRepeatedValues:i=!1}){return{trigger:(s,l)=>s.lastIndexOf(e)!==l.lastIndexOf(e),getQueryTerm:s=>s.slice(s.lastIndexOf(e)+e.length),custom:(...s)=>V(this,void 0,void 0,function*(){var l;let u=yield N(t,r?e:"",n,s);if(i)return u;let[c]=s,a=(l=c[c.length-1])===null||l===void 0?void 0:l.split(e);return E(a,u)})}}w.valueList=de;function fe({separator:e="=",keys:t=[],values:n=[],cache:r=!1,insertSeparator:i=!0}){return{trigger:(s,l)=>s.indexOf(e)!==l.indexOf(e),getQueryTerm:s=>s.slice(s.indexOf(e)+1),custom:(...s)=>V(this,void 0,void 0,function*(){let[l]=s,c=!l[l.length-1].includes(e),a=c?t:n,o=z(c,r);return N(a,c&&i?e:"",o,s)})}}w.keyValue=fe;function pe({separator:e="=",delimiter:t=",",keys:n=[],values:r=[],cache:i=!1,insertSeparator:s=!0,insertDelimiter:l=!1,allowRepeatedKeys:u=!1,allowRepeatedValues:c=!0}){return{trigger:(a,o)=>{let d=C(a,e,t),v=C(o,e,t);return d!==v},getQueryTerm:a=>{let o=C(a,e,t);return a.slice(o+1)},custom:(...a)=>V(this,void 0,void 0,function*(){let[o]=a,d=o[o.length-1],v=C(d,e,t),S=v===-1||d.slice(v,v+e.length)!==e,p=S?n:r,y=z(S,i),f=yield N(p,S?s?e:"":l?t:"",y,a);if(S){if(u)return f;let b=d.split(t).map(h=>h.slice(0,h.indexOf(e)));return E(b,f)}if(c)return f;let _=d.split(t).map(b=>b.slice(b.indexOf(e)+e.length));return E(_,f)})}}w.keyValueList=pe});var H=T(I=>{"use strict";var he=I&&I.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(o){try{a(r.next(o))}catch(d){l(d)}}function c(o){try{a(r.throw(o))}catch(d){l(d)}}function a(o){o.done?s(o.value):i(o.value).then(u,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.ai=void 0;var ye=4097,ve=4,ge=.8,me=ye*ve*ge;function _e({name:e,prompt:t,message:n,postProcess:r,temperature:i,splitOn:s}){return{scriptTimeout:15e3,custom:(l,u,c)=>he(this,void 0,void 0,function*(){var a,o;let d=yield u({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(d.stdout))return[];let v=typeof t=="function"?yield t({tokens:l,executeCommand:u,generatorContext:c}):t,S=typeof n=="function"?yield n({tokens:l,executeCommand:u,generatorContext:c}):n;if(S===null||S.length===0)return console.warn("No message provided to AI generator"),[];let p=me-((a=v?.length)!==null&&a!==void 0?a:0),y={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...v?[{role:"system",content:v}]:[],{role:"user",content:S.slice(0,p)}],temperature:i},O=JSON.stringify(y),f=yield u({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",O]}),_=JSON.parse(f.stdout);return(o=_?.choices.map(h=>{var x;return(x=h?.message)===null||x===void 0?void 0:x.content}).filter(h=>typeof h=="string").flatMap(h=>s?h.split(s).filter(x=>x.trim().length>0):[h]).map(h=>{if(r)return r(h);let x=h.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:x,insertValue:`'${x}'`,description:"Generated by Fig AI"}}))!==null&&o!==void 0?o:[]})}}I.ai=_e});var G=T(m=>{"use strict";var Oe=m&&m.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),be=m&&m.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Oe(t,e,n)};Object.defineProperty(m,"__esModule",{value:!0});m.ai=m.folders=m.filepaths=void 0;var B=$();Object.defineProperty(m,"filepaths",{enumerable:!0,get:function(){return B.filepaths}});Object.defineProperty(m,"folders",{enumerable:!0,get:function(){return B.folders}});be(Q(),m);var Se=H();Object.defineProperty(m,"ai",{enumerable:!0,get:function(){return Se.ai}})});var U=ie(G(),1),xe={name:"deployctl",description:"Command line tool for Deno Deploy",subcommands:[{name:"deploy",description:"Deploy a script with static files to Deno Deploy",args:{name:"entrypoint",generators:(0,U.filepaths)({extensions:["js","mjs","jsx","mjsx","ts","mts","tsx","mtsx"]})},options:[{name:"--exclude",insertValue:"--exclude '{cursor}'",description:"Exclude files that match this pattern",args:{name:"pattern"}},{name:"--include",insertValue:"--include '{cursor}'",description:"Only upload files that match this pattern",args:{name:"pattern"}},{name:"--no-static",description:"Don't include the files in the CWD as static files"},{name:"--prod",description:"Create a production deployment (default is preview deployment)"},{name:["-p","--project"],description:"The project to deploy to",args:{name:"name"}},{name:"--token",description:"The API token to use",args:{name:"token"}}]},{name:"upgrade",description:"Upgrade deployctl",args:{name:"version",isOptional:!0,generators:{script:["curl","-sL","https://cdn.deno.land/deploy/meta/versions.json"],cache:{ttl:1e3*60*60*24},postProcess:e=>{let t=JSON.parse(e);return t.versions.map(n=>({name:n,icon:n===t.latest?"\u2B50\uFE0F":"\u{1F995}"}))}}}}],options:[{name:["--help","-h"],description:"Show help",isPersistent:!0},{name:["-V","--version"],description:"Show the version"}]},De=xe;export{De as default};
