var U=Object.create;var N=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ee(t))!ne.call(e,r)&&r!==n&&N(e,r,{get:()=>t[r],enumerable:!(i=Y(t,r))||i.enumerable});return e};var re=(e,t,n)=>(n=e!=null?U(te(e)):{},ie(t||!e||!e.__esModule?N(n,"default",{value:e,enumerable:!0}):n,e));var R=T(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.shellExpand=j.ensureTrailingSlash=void 0;var oe=e=>e.endsWith("/")?e:`${e}/`;j.ensureTrailingSlash=oe;var se=(e,t)=>e.startsWith("~")&&(e.length===1||e.charAt(1)==="/")?e.replace("~",t):e,le=(e,t)=>e.replace(/\$([A-Za-z0-9_]+)/g,r=>{var o;let l=r.slice(1);return(o=t[l])!==null&&o!==void 0?o:r}).replace(/\$\{([A-Za-z0-9_]+)(?::-([^}]+))?\}/g,(r,o,l)=>{var u,c;return(c=(u=t[o])!==null&&u!==void 0?u:l)!==null&&c!==void 0?c:r}),ae=(e,t)=>{var n;let{environmentVariables:i}=t;return le(se(e,(n=i?.HOME)!==null&&n!==void 0?n:"~"),i)};j.shellExpand=ae});var $=T(y=>{"use strict";var ue=y&&y.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(s){try{a(i.next(s))}catch(f){l(f)}}function c(s){try{a(i.throw(s))}catch(f){l(f)}}function a(s){s.done?o(s.value):r(s.value).then(u,c)}a((i=i.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.filepaths=y.folders=y.getCurrentInsertedDirectory=y.sortFilesAlphabetically=void 0;var C=R();function K(e,t=[]){let n=t.map(r=>r.toLowerCase()),i=e.filter(r=>!n.includes(r.toLowerCase()));return[...i.filter(r=>!r.startsWith(".")).sort((r,o)=>r.localeCompare(o)),...i.filter(r=>r.startsWith(".")).sort((r,o)=>r.localeCompare(o)),"../"]}y.sortFilesAlphabetically=K;var ce=(e,t,n)=>{if(e===null)return"/";let i=(0,C.shellExpand)(t,n),r=i.slice(0,i.lastIndexOf("/")+1);return r===""?(0,C.ensureTrailingSlash)(e):r.startsWith("/")?r:`${(0,C.ensureTrailingSlash)(e)}${r}`};y.getCurrentInsertedDirectory=ce;function L(e={}){let{extensions:t=[],equals:n=[],matches:i,filterFolders:r=!1,editFileSuggestions:o,editFolderSuggestions:l,rootDirectory:u,showFolders:c="always"}=e,a=new Set(t),s=new Set(n),f=()=>t.length>0||n.length>0||i,g=(h=[])=>f()?h.filter(({name:v="",type:O})=>{if(!r&&O==="folder"||s.has(v)||i&&v.match(i))return!0;let[,...d]=v.split(".");if(d.length>=1){let _=d.length-1,b=d[_];do{if(a.has(b))return!0;_-=1,b=[d[_],b].join(".")}while(_>=0)}return!1}):h,w=(h=[])=>!o&&!l?h:h.map(v=>Object.assign(Object.assign({},v),(v.type==="file"?o:l)||{}));return{trigger:(h,v)=>{let O=h.lastIndexOf("/"),d=v.lastIndexOf("/");return O!==d?!0:O===-1&&d===-1?!1:h.slice(0,O)!==v.slice(0,d)},getQueryTerm:h=>h.slice(h.lastIndexOf("/")+1),custom:(h,v,O)=>ue(this,void 0,void 0,function*(){var d;let{isDangerous:_,currentWorkingDirectory:b,searchTerm:p}=O,S=(d=(0,y.getCurrentInsertedDirectory)(u??b,p,O))!==null&&d!==void 0?d:"/";try{let P=yield v({command:"ls",args:["-1ApL"],cwd:S}),Z=K(P.stdout.split(`
`),[".DS_Store"]),W=[];for(let V of Z)if(V){let F=V.endsWith("/")?"folders":"filepaths";(F==="filepaths"&&c!=="only"||F==="folders"&&c!=="never")&&W.push({type:F==="filepaths"?"file":"folder",name:V,insertValue:V,isDangerous:_,context:{templateType:F}})}return w(g(W))}catch{return[]}})}}y.folders=Object.assign(()=>L({showFolders:"only"}),Object.freeze(L({showFolders:"only"})));y.filepaths=Object.assign(L,Object.freeze(L()))});var Q=T(x=>{"use strict";var A=x&&x.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(s){try{a(i.next(s))}catch(f){l(f)}}function c(s){try{a(i.throw(s))}catch(f){l(f)}}function a(s){s.done?o(s.value):r(s.value).then(u,c)}a((i=i.apply(e,t||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.keyValueList=x.keyValue=x.valueList=void 0;var k=new Map;function D(e,t){return e.length===0?t:t.map(n=>n.insertValue?n:Object.assign(Object.assign({},n),{insertValue:n.name+e}))}function z(e,t,n){return A(this,void 0,void 0,function*(){if(typeof e=="function"){let i=yield e(...n);return D(t,i)}if(typeof e[0]=="string"){let i=e.map(r=>({name:r}));return D(t,i)}return D(t,e)})}function E(e,t,n,i){return A(this,void 0,void 0,function*(){if(n||Array.isArray(e)){let r=k.get(e);return r===void 0&&(r=yield z(e,t,i),k.set(e,r)),r}return z(e,t,i)})}function J(e,t){return typeof t=="string"?e&&t==="keys"||!e&&t==="values":t}function M(e,...t){return Math.max(...t.map(n=>e.lastIndexOf(n)))}function q(e,t){let n=new Set(e);return t.filter(i=>{var r;return typeof i.name=="string"?!n.has(i.name):!(!((r=i.name)===null||r===void 0)&&r.some(o=>n.has(o)))})}function fe({delimiter:e=",",values:t=[],cache:n=!1,insertDelimiter:i=!1,allowRepeatedValues:r=!1}){return{trigger:(o,l)=>o.lastIndexOf(e)!==l.lastIndexOf(e),getQueryTerm:o=>o.slice(o.lastIndexOf(e)+e.length),custom:(...o)=>A(this,void 0,void 0,function*(){var l;let u=yield E(t,i?e:"",n,o);if(r)return u;let[c]=o,a=(l=c[c.length-1])===null||l===void 0?void 0:l.split(e);return q(a,u)})}}x.valueList=fe;function de({separator:e="=",keys:t=[],values:n=[],cache:i=!1,insertSeparator:r=!0}){return{trigger:(o,l)=>o.indexOf(e)!==l.indexOf(e),getQueryTerm:o=>o.slice(o.indexOf(e)+1),custom:(...o)=>A(this,void 0,void 0,function*(){let[l]=o,c=!l[l.length-1].includes(e),a=c?t:n,s=J(c,i);return E(a,c&&r?e:"",s,o)})}}x.keyValue=de;function he({separator:e="=",delimiter:t=",",keys:n=[],values:i=[],cache:r=!1,insertSeparator:o=!0,insertDelimiter:l=!1,allowRepeatedKeys:u=!1,allowRepeatedValues:c=!0}){return{trigger:(a,s)=>{let f=M(a,e,t),g=M(s,e,t);return f!==g},getQueryTerm:a=>{let s=M(a,e,t);return a.slice(s+1)},custom:(...a)=>A(this,void 0,void 0,function*(){let[s]=a,f=s[s.length-1],g=M(f,e,t),w=g===-1||f.slice(g,g+e.length)!==e,h=w?n:i,v=J(w,r),d=yield E(h,w?o?e:"":l?t:"",v,a);if(w){if(u)return d;let b=f.split(t).map(p=>p.slice(0,p.indexOf(e)));return q(b,d)}if(c)return d;let _=f.split(t).map(b=>b.slice(b.indexOf(e)+e.length));return q(_,d)})}}x.keyValueList=he});var G=T(I=>{"use strict";var pe=I&&I.__awaiter||function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(s){try{a(i.next(s))}catch(f){l(f)}}function c(s){try{a(i.throw(s))}catch(f){l(f)}}function a(s){s.done?o(s.value):r(s.value).then(u,c)}a((i=i.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.ai=void 0;var ve=4097,ge=4,ye=.8,me=ve*ge*ye;function _e({name:e,prompt:t,message:n,postProcess:i,temperature:r,splitOn:o}){return{scriptTimeout:15e3,custom:(l,u,c)=>pe(this,void 0,void 0,function*(){var a,s;let f=yield u({command:"fig",args:["settings","--format","json","autocomplete.ai.enabled"]});if(!JSON.parse(f.stdout))return[];let g=typeof t=="function"?yield t({tokens:l,executeCommand:u,generatorContext:c}):t,w=typeof n=="function"?yield n({tokens:l,executeCommand:u,generatorContext:c}):n;if(w===null||w.length===0)return console.warn("No message provided to AI generator"),[];let h=me-((a=g?.length)!==null&&a!==void 0?a:0),v={model:"gpt-3.5-turbo",source:"autocomplete",name:e,messages:[...g?[{role:"system",content:g}]:[],{role:"user",content:w.slice(0,h)}],temperature:r},O=JSON.stringify(v),d=yield u({command:"fig",args:["_","request","--route","/ai/chat","--method","POST","--body",O]}),_=JSON.parse(d.stdout);return(s=_?.choices.map(p=>{var S;return(S=p?.message)===null||S===void 0?void 0:S.content}).filter(p=>typeof p=="string").flatMap(p=>o?p.split(o).filter(S=>S.trim().length>0):[p]).map(p=>{if(i)return i(p);let S=p.trim().replace(/\n/g," ");return{icon:"\u{1FA84}",name:S,insertValue:`'${S}'`,description:"Generated by Fig AI"}}))!==null&&s!==void 0?s:[]})}}I.ai=_e});var B=T(m=>{"use strict";var Oe=m&&m.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),be=m&&m.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Oe(t,e,n)};Object.defineProperty(m,"__esModule",{value:!0});m.ai=m.folders=m.filepaths=void 0;var H=$();Object.defineProperty(m,"filepaths",{enumerable:!0,get:function(){return H.filepaths}});Object.defineProperty(m,"folders",{enumerable:!0,get:function(){return H.folders}});be(Q(),m);var we=G();Object.defineProperty(m,"ai",{enumerable:!0,get:function(){return we.ai}})});var X=re(B(),1),Se=(0,X.filepaths)({equals:[".sublime-project",".sublime-workspace"],editFileSuggestions:{priority:76}}),xe={name:"subl",description:"Sublime Text",args:{name:"files|directories",isVariadic:!0,isOptional:!0,template:["folders","filepaths"]},options:[{name:"--project",description:"Load the given project",args:{name:"project",generators:Se}},{name:"--command",description:"Run the given command",args:{name:"command"}},{name:["-n","--new-window"],description:"Open a new window",exclusiveOn:["-a"]},{name:["-a","--add"],description:"Add folders to the current window",exclusiveOn:["-n"]},{name:"--launch-or-new-window",description:"Only open a new window if the application is open"},{name:["-w","--wait"],description:"Wait for the files to be closed before returning"},{name:["-b","--background"],description:"Don't activate the application"},{name:["-s","--stay"],description:"Keep the application activated after closing the file"},{name:"--safe-mode",description:"Launch using a clean environment"},{name:["-h","--help"],description:"Show a help message and exit"},{name:["-v","--version"],description:"Show the version and exit"}]},Le=xe;export{Le as default};
