var E=Symbol("singleComment"),A=Symbol("multiComment"),U=()=>"",L=(e,s,o)=>e.slice(s,o).replace(/\S/g," "),V=(e,s)=>{let o=s-1,l=0;for(;e[o]==="\\";)o-=1,l+=1;return!!(l%2)};function P(e,{whitespace:s=!0,trailingCommas:o=!1}={}){if(typeof e!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof e}\``);let l=s?L:U,c=!1,n=!1,a=0,p="",h="",b=-1;for(let t=0;t<e.length;t++){let r=e[t],j=e[t+1];if(!n&&r==='"'&&(V(e,t)||(c=!c)),!c)if(!n&&r+j==="//")p+=e.slice(a,t),a=t,n=E,t++;else if(n===E&&r+j===`\r
`){t++,n=!1,p+=l(e,a,t),a=t;continue}else if(n===E&&r===`
`)n=!1,p+=l(e,a,t),a=t;else if(!n&&r+j==="/*"){p+=e.slice(a,t),a=t,n=A,t++;continue}else if(n===A&&r+j==="*/"){t++,n=!1,p+=l(e,a,t+1),a=t+1;continue}else o&&!n&&(b!==-1?r==="}"||r==="]"?(p+=e.slice(a,t),h+=l(p,0,1)+p.slice(1),p="",a=t,b=-1):r!==" "&&r!=="	"&&r!=="\r"&&r!==`
`&&(p+=e.slice(a,t),a=t,b=-1):r===","&&(h+=p+e.slice(a,t),p="",a=t,b=t))}return h+p+(n?l(e.slice(a)):e.slice(a))}function T(e){return{name:e,description:"Uninstall a package",args:{name:"package",generators:F,filterStrategy:"fuzzy",isVariadic:!0},options:G}}var N=e=>(e.match(/@/g)||[]).length,_=e=>async(s,o,l)=>{let c=s[s.length-1];if(c==="")return[];let n=e?.length>0?`+keywords:${e.join(",")}`:"",p=["-s","-H","Accept: application/json",n?`https://api.npms.io/v2/search?size=20&q=${c}${n}`:`https://api.npms.io/v2/search/suggestions?q=${c}&size=20`],h=["-s","-H","Accept: application/vnd.npm.install-v1+json",`https://registry.npmjs.org/${c.slice(0,-1)}`],b=r=>o({command:"curl",args:r[r.length-1]==="@"?h:p}),t=c.startsWith("@")?N(c)>1:c.includes("@");try{let r=JSON.parse((await b(c)).stdout);if(t){let w=Object.entries(r["dist-tags"]||{}).map(([x,M])=>({name:x,description:M}));return w.push(...Object.keys(r.versions).map(x=>({name:x})).reverse()),w}return(n?r.results:r).map(w=>({name:w.package.name,description:w.package.description}))}catch(r){return console.error({error:r}),[]}},v={trigger:(e,s)=>s.startsWith("@")?!(N(s)>1&&N(e)>1):!(s.includes("@")&&e.includes("@")),getQueryTerm:"@",cache:{ttl:1e3*60*60*24*2},custom:_()},J={custom:async(e,s)=>{let{stdout:o}=await s({command:"npm",args:["prefix"]}),{stdout:l}=await s({command:"cat",args:[`${o}/package.json`]}),c=[];try{if(l.trim()=="")return c;let a=JSON.parse(l).workspaces;if(a)for(let p of a)c.push({name:p,description:"Workspaces"})}catch(n){console.log(n)}return c}},F={trigger:e=>e==="-g"||e==="--global",custom:async function(e,s){if(!e.includes("-g")&&!e.includes("--global")){let{stdout:o}=await s({command:"npm",args:["prefix"]}),{stdout:l}=await s({command:"cat",args:[`${o}/package.json`]}),c=JSON.parse(l),n=c.dependencies??{},a=c.devDependencies,p=c.optionalDependencies??{};return Object.assign(n,a,p),Object.keys(n).filter(h=>!e.some(t=>t===h)).map(h=>({name:h,icon:"\u{1F4E6}",description:n[h]?"dependency":p[h]?"optionalDependency":"devDependency"}))}else{let{stdout:o}=await s({command:"bash",args:["-c","ls -1 `npm root -g`"]});return o.split(`
`).map(l=>({name:l,icon:"\u{1F4E6}",description:"Global dependency"}))}}},H={cache:{strategy:"stale-while-revalidate",cacheByDirectory:!0},script:["bash","-c","until [[ -f package.json ]] || [[ $PWD = '/' ]]; do cd ..; done; cat package.json"],postProcess:function(e,[s]){if(e.trim()=="")return[];try{let o=JSON.parse(e),l=o.scripts,c=o.fig||{};if(l)return Object.entries(l).map(([n,a])=>{let p=s==="yarn"?"fig://icon?type=yarn":"fig://icon?type=npm",h=c[n];return{name:n,icon:p,description:a,priority:51,...h}})}catch(o){console.error(o)}return[]}},S={name:["-g","--global"],description:"Operates in 'global' mode, so that packages are installed into the prefix folder instead of the current working directory"},u={name:"--json",description:"Show output in json format"},I={name:"--omit",description:"Dependency types to omit from the installation tree on disk",args:{name:"Package type",default:"dev",suggestions:["dev","optional","peer"]},isRepeatable:3},f={name:["-p","--parseable"],description:"Output parseable results from commands that write to standard output"},R={name:["-l","--long"],description:"Show extended information"},d=[{name:["-w","--workspace"],description:"Enable running a command in the context of the configured workspaces of the current project",args:{name:"workspace",generators:J,isVariadic:!0}},{name:["-ws","--workspaces"],description:"Enable running a command in the context of all the configured workspaces"}],G=[{name:["-S","--save"],description:"Package will be removed from your dependencies"},{name:["-D","--save-dev"],description:"Package will appear in your `devDependencies`"},{name:["-O","--save-optional"],description:"Package will appear in your `optionalDependencies`"},{name:"--no-save",description:"Prevents saving to `dependencies`"},{name:"-g",description:"Uninstall global package"},...d],B=[{name:["-a","-all"],description:"Show all outdated or installed packages"},u,R,f,{name:"--depth",description:"The depth to go when recursing packages",args:{name:"depth"}},{name:"--link",description:"Limits output to only those packages that are linked"},{name:"--package-lock-only",description:"Current operation will only use the package-lock.json, ignoring node_modules"},{name:"--no-unicode",description:"Uses unicode characters in the tree output"},S,I,...d],i={name:"--registry",description:"The base URL of the npm registry",args:{name:"registry"}},D={name:"--verbose",description:"Show extra information",args:{name:"verbose"}},m={name:"--otp",description:"One-time password from a two-factor authenticator",args:{name:"otp"}},g={name:"--ignore-scripts",description:"If true, npm does not run scripts specified in package.json files"},k={name:"--script-shell",description:"The shell to use for scripts run with the npm exec, npm run and npm init <pkg> commands",args:{name:"script-shell"}},y={name:"--dry-run",description:"Indicates that you don't want npm to make any changes and that it should only report what it would have done"},q={name:"npm",parserDirectives:{flagsArePosixNoncompliant:!0},description:"Node package manager",subcommands:[{name:["install","i","add"],description:"Install a package and its dependencies",args:{name:"package",isOptional:!0,generators:v,debounce:!0,isVariadic:!0},options:[{name:["-P","--save-prod"],description:"Package will appear in your `dependencies`. This is the default unless `-D` or `-O` are present"},{name:["-D","--save-dev"],description:"Package will appear in your `devDependencies`"},{name:["-O","--save-optional"],description:"Package will appear in your `optionalDependencies`"},{name:"--no-save",description:"Prevents saving to `dependencies`"},{name:["-E","--save-exact"],description:"Saved dependencies will be configured with an exact version rather than using npm's default semver range operator"},{name:["-B","--save-bundle"],description:"Saved dependencies will also be added to your bundleDependencies list"},S,{name:"--global-style",description:"Causes npm to install the package into your local node_modules folder with the same layout it uses with the global node_modules folder"},{name:"--legacy-bundling",description:"Causes npm to install the package such that versions of npm prior to 1.4, such as the one included with node 0.8, can install the package"},{name:"--legacy-peer-deps",description:"Bypass peerDependency auto-installation. Emulate install behavior of NPM v4 through v6"},{name:"--strict-peer-deps",description:"If set to true, and --legacy-peer-deps is not set, then any conflicting peerDependencies will be treated as an install failure"},{name:"--no-package-lock",description:"Ignores package-lock.json files when installing"},i,D,I,g,{name:"--no-audit",description:"Submit audit reports alongside the current npm command to the default registry and all registries configured for scopes"},{name:"--no-bin-links",description:"Tells npm to not create symlinks (or .cmd shims on Windows) for package executables"},{name:"--no-fund",description:"Hides the message at the end of each npm install acknowledging the number of dependencies looking for funding"},y,...d]},{name:["run","run-script"],description:"Run arbitrary package scripts",options:[...d,{name:"--if-present",description:"Npm will not exit with an error code when run-script is invoked for a script that isn't defined in the scripts section of package.json"},{name:"--silent",description:""},g,k,{name:"--",args:{name:"args",isVariadic:!0}}],args:{name:"script",description:"Script to run from your package.json",filterStrategy:"fuzzy",generators:H}},{name:"init",description:"Trigger the initialization",options:[{name:["-y","--yes"],description:"Automatically answer 'yes' to any prompts that npm might print on the command line"},{name:"-w",description:"Create the folders and boilerplate expected while also adding a reference to your project workspaces property",args:{name:"dir"}}]},{name:"access",description:"Set access controls on private packages"},{name:["adduser","login"],description:"Add a registry user account",options:[i,{name:"--scope",description:"Associate an operation with a scope for a scoped registry",args:{name:"scope",description:"Scope name"}}]},{name:"audit",description:"Run a security audit",subcommands:[{name:"fix",description:"If the fix argument is provided, then remediations will be applied to the package tree",options:[y,{name:["-f","--force"],description:"Removes various protections against unfortunate side effects, common mistakes, unnecessary performance degradation, and malicious input",isDangerous:!0},...d]}],options:[...d,{name:"--audit-level",description:"The minimum level of vulnerability for npm audit to exit with a non-zero exit code",args:{name:"audit",suggestions:["info","low","moderate","high","critical","none"]}},{name:"--package-lock-only",description:"Current operation will only use the package-lock.json, ignoring node_modules"},u,I]},{name:"bin",description:"Print the folder where npm will install executables",options:[S]},{name:["bugs","issues"],description:"Report bugs for a package in a web browser",args:{name:"package",isOptional:!0,generators:v,debounce:!0,isVariadic:!0},options:[{name:"--no-browser",description:"Display in command line instead of browser",exclusiveOn:["--browser"]},{name:"--browser",description:"The browser that is called by the npm bugs command to open websites",args:{name:"browser"},exclusiveOn:["--no-browser"]},i]},{name:"cache",description:"Manipulates packages cache",subcommands:[{name:"add",description:"Add the specified packages to the local cache"},{name:"clean",description:"Delete all data out of the cache folder"},{name:"verify",description:"Verify the contents of the cache folder, garbage collecting any unneeded data, and verifying the integrity of the cache index and all cached data"}],options:[{name:"--cache",args:{name:"cache"},description:"The location of npm's cache directory"}]},{name:["ci","clean-install","install-clean"],description:"Install a project with a clean slate",options:[{name:"--audit",description:'When "true" submit audit reports alongside the current npm command to the default registry and all registries configured for scopes',args:{name:"audit",suggestions:["true","false"]},exclusiveOn:["--no-audit"]},{name:"--no-audit",description:"Do not submit audit reports alongside the current npm command",exclusiveOn:["--audit"]},g,k,D,i]},{name:"cit",description:"Install a project with a clean slate and run tests"},{name:"clean-install-test",description:"Install a project with a clean slate and run tests"},{name:"completion",description:"Tab completion for npm"},{name:["config","c"],description:"Manage the npm configuration files",subcommands:[{name:"set",description:"Sets the config key to the value",args:[{name:"key"},{name:"value"}],options:[{name:["-g","--global"],description:"Sets it globally"}]},{name:"get",description:"Echo the config value to stdout",args:{name:"key"}},{name:"list",description:"Show all the config settings",options:[{name:"-g",description:"Lists globally installed packages"},{name:"-l",description:"Also shows defaults"},u]},{name:"delete",description:"Deletes the key from all configuration files",args:{name:"key"}},{name:"edit",description:"Opens the config file in an editor",options:[{name:"--global",description:"Edits the global config"}]}]},{name:"create",description:"Create a package.json file"},{name:["dedupe","ddp"],description:"Reduce duplication in the package tree"},{name:"deprecate",description:"Deprecate a version of a package",options:[i]},{name:"dist-tag",description:"Modify package distribution tags"},{name:["docs","home"],description:"Open documentation for a package in a web browser",args:{name:"package",isOptional:!0,generators:v,debounce:!0,isVariadic:!0},options:[...d,i,{name:"--no-browser",description:"Display in command line instead of browser",exclusiveOn:["--browser"]},{name:"--browser",description:"The browser that is called by the npm docs command to open websites",args:{name:"browser"},exclusiveOn:["--no-browser"]}]},{name:"doctor",description:"Check your npm environment",options:[i]},{name:"edit",description:"Edit an installed package",options:[{name:"--editor",description:"The command to run for npm edit or npm config edit"}]},{name:"explore",description:"Browse an installed package",args:{name:"package",filterStrategy:"fuzzy",generators:F}},{name:"fund",description:"Retrieve funding information"},{name:"get",description:"Echo the config value to stdout"},{name:"help",description:"Get help on npm",args:{name:"term",isVariadic:!0,description:"Terms to search for"},options:[{name:"--viewer",description:"The program to use to view help content",args:{name:"viewer"}}]},{name:"help-search",description:"Search npm help documentation",args:{name:"text",description:"Text to search for"},options:[R]},{name:"hook",description:"Manage registry hooks"},{name:"install-ci-test",description:"Install a project with a clean slate and run tests"},{name:"install-test",description:"Install package(s) and run tests"},{name:"it",description:"Install package(s) and run tests"},{name:"link",description:"Symlink a package folder",args:{name:"path",template:"filepaths"}},{name:"ln",description:"Symlink a package folder"},{name:"logout",description:"Log out of the registry",options:[i,{name:"--scope",description:"Associate an operation with a scope for a scoped registry",args:{name:"scope",description:"Scope name"}}]},{name:["ls","list"],description:"List installed packages",options:B,args:{name:"[@scope]/pkg",isVariadic:!0}},{name:"org",description:"Manage orgs",subcommands:[{name:"set",description:"Add a user to an org or manage roles",args:[{name:"orgname",description:"Organization name"},{name:"username",description:"User name"},{name:"role",isOptional:!0,suggestions:["developer","admin","owner"]}],options:[i,m]},{name:"rm",description:"Remove a user from an org",args:[{name:"orgname",description:"Organization name"},{name:"username",description:"User name"}],options:[i,m]},{name:"ls",description:"List users in an org or see what roles a particular user has in an org",args:[{name:"orgname",description:"Organization name"},{name:"username",description:"User name",isOptional:!0}],options:[i,m,u,f]}]},{name:"outdated",description:"Check for outdated packages",args:{name:"[<@scope>/]<pkg>",isVariadic:!0,isOptional:!0},options:[{name:["-a","-all"],description:"Show all outdated or installed packages"},u,R,f,{name:"-g",description:"Checks globally"},...d]},{name:["owner","author"],description:"Manage package owners",subcommands:[{name:"ls",description:"List all the users who have access to modify a package and push new versions. Handy when you need to know who to bug for help",args:{name:"[@scope/]pkg"},options:[i]},{name:"add",description:"Add a new user as a maintainer of a package. This user is enabled to modify metadata, publish new versions, and add other owners",args:[{name:"user"},{name:"[@scope/]pkg"}],options:[i,m]},{name:"rm",description:"Remove a user from the package owner list. This immediately revokes their privileges",args:[{name:"user"},{name:"[@scope/]pkg"}],options:[i,m]}]},{name:"pack",description:"Create a tarball from a package",args:{name:"[<@scope>/]<pkg>"},options:[u,y,...d,{name:"--pack-destination",description:"Directory in which npm pack will save tarballs",args:{name:"pack-destination",template:["folders"]}}]},{name:"ping",description:"Ping npm registry",options:[i]},{name:"pkg",description:"Manages your package.json",subcommands:[{name:"get",description:"Retrieves a value key, defined in your package.json file. It is possible to get multiple values and values for child fields",args:{name:"field",description:"Name of the field to get. You can view child fields by separating them with a period",isVariadic:!0},options:[u,...d]},{name:"set",description:"Sets a value in your package.json based on the field value. It is possible to set multiple values and values for child fields",args:{name:"field",description:"Name of the field to set. You can set child fields by separating them with a period",isVariadic:!0},options:[u,...d,{name:["-f","--force"],description:"Removes various protections against unfortunate side effects, common mistakes, unnecessary performance degradation, and malicious input. Allow clobbering existing values in npm pkg",isDangerous:!0}]},{name:"delete",description:"Deletes a key from your package.json",args:{name:"key",description:"Name of the key to delete. You can delete child fields by separating them with a period",isVariadic:!0},options:[...d,{name:["-f","--force"],description:"Removes various protections against unfortunate side effects, common mistakes, unnecessary performance degradation, and malicious input. Allow clobbering existing values in npm pkg",isDangerous:!0}]}]},{name:"prefix",description:"Display prefix",options:[{name:["-g","--global"],description:"Print the global prefix to standard out"}]},{name:"profile",description:"Change settings on your registry profile",subcommands:[{name:"get",description:"Display all of the properties of your profile, or one or more specific properties",args:{name:"property",isOptional:!0,description:"Property name"},options:[i,u,f,m]},{name:"set",description:"Set the value of a profile property",args:[{name:"property",description:"Property name",suggestions:["email","fullname","homepage","freenode","twitter","github"]},{name:"value",description:"Property value"}],options:[i,u,f,m],subcommands:[{name:"password",description:"Change your password. This is interactive, you'll be prompted for your current password and a new password"}]},{name:"enable-2fa",description:"Enables two-factor authentication",args:{name:"mode",description:"Mode for two-factor authentication. Defaults to auth-and-writes mode",isOptional:!0,suggestions:[{name:"auth-only",description:"Require an OTP when logging in or making changes to your account's authentication"},{name:"auth-and-writes",description:"Requires an OTP at all the times auth-only does, and also requires one when publishing a module, setting the latest dist-tag, or changing access via npm access and npm owner"}]},options:[i,m]},{name:"disable-2fa",description:"Disables two-factor authentication",options:[i,m]}]},{name:"prune",description:"Remove extraneous packages",args:{name:"[<@scope>/]<pkg>",isOptional:!0},options:[I,y,u,{name:"--production",description:"Remove the packages specified in your devDependencies"},...d]},{name:"publish",description:"Publish a package",args:{name:"tarball|folder",isOptional:!0,description:"A url or file path to a gzipped tar archive containing a single folder with a package.json file inside | A folder containing a package.json file",template:["folders"]},options:[{name:"--tag",description:"Registers the published package with the given tag",args:{name:"tag"}},...d,{name:"--access",description:"Sets scoped package to be publicly viewable if set to 'public'",args:{default:"restricted",suggestions:["restricted","public"]}},y,m]},{name:["rebuild","rb"],description:"Rebuild a package",args:{name:"[<@scope>/]<pkg>[@<version>]"},options:[S,...d,g,{name:"--no-bin-links",description:"Tells npm to not create symlinks (or .cmd shims on Windows) for package executables"}]},{name:"repo",description:"Open package repository page in the browser",args:{name:"package",isOptional:!0,generators:v,debounce:!0,isVariadic:!0},options:[...d,{name:"--no-browser",description:"Display in command line instead of browser",exclusiveOn:["--browser"]},{name:"--browser",description:"The browser that is called by the npm repo command to open websites",args:{name:"browser"},exclusiveOn:["--no-browser"]}]},{name:"restart",description:"Restart a package",options:[g,k,{name:"--",args:{name:"arg",description:"Arguments to be passed to the restart script"}}]},{name:"root",description:"Display npm root",options:[{name:["-g","--global"],description:"Print the effective global node_modules folder to standard out"}]},{name:["search","s","se","find"],description:"Search for packages",args:{name:"search terms",isVariadic:!0},options:[R,u,{name:"--color",description:"Show colors",args:{name:"always",suggestions:["always"],description:"Always show colors"},exclusiveOn:["--no-color"]},{name:"--no-color",description:"Do not show colors",exclusiveOn:["--color"]},f,{name:"--no-description",description:"Do not show descriptions"},{name:"--searchopts",description:"Space-separated options that are always passed to search",args:{name:"searchopts"}},{name:"--searchexclude",description:"Space-separated options that limit the results from search",args:{name:"searchexclude"}},i,{name:"--prefer-online",description:"If true, staleness checks for cached data will be forced, making the CLI look for updates immediately even for fresh package data",exclusiveOn:["--prefer-offline","--offline"]},{name:"--prefer-offline",description:"If true, staleness checks for cached data will be bypassed, but missing data will be requested from the server",exclusiveOn:["--prefer-online","--offline"]},{name:"--offline",description:"Force offline mode: no network requests will be done during install",exclusiveOn:["--prefer-online","--prefer-offline"]}]},{name:"set",description:"Sets the config key to the value"},{name:"set-script",description:"Set tasks in the scripts section of package.json",args:[{name:"script",description:"Name of the task to be added to the scripts section of package.json"},{name:"command",description:"Command to run when script is called"}],options:d},{name:"shrinkwrap",description:"Lock down dependency versions for publication"},{name:"star",description:"Mark your favorite packages",args:{name:"pkg",description:"Package to mark as favorite"},options:[i,{name:"--no-unicode",description:"Do not use unicode characters in the tree output"}]},{name:"stars",description:"View packages marked as favorites",args:{name:"user",isOptional:!0,description:"View packages marked as favorites by <user>"},options:[i]},{name:"start",description:"Start a package",options:[g,k,{name:"--",args:{name:"arg",description:"Arguments to be passed to the start script"}}]},{name:"stop",description:"Stop a package",options:[g,k,{name:"--",args:{name:"arg",description:"Arguments to be passed to the stop script"}}]},{name:"team",description:"Manage organization teams and team memberships",subcommands:[{name:"create",args:{name:"scope:team"},options:[i,m]},{name:"destroy",args:{name:"scope:team"},options:[i,m]},{name:"add",args:[{name:"scope:team"},{name:"user"}],options:[i,m]},{name:"rm",args:[{name:"scope:team"},{name:"user"}],options:[i,m]},{name:"ls",args:{name:"scope|scope:team"},options:[i,u,f]}]},{name:["test","tst","t"],description:"Test a package",options:[g,k]},{name:"token",description:"Manage your authentication tokens",subcommands:[{name:"list",description:"Shows a table of all active authentication tokens",options:[u,f]},{name:"create",description:"Create a new authentication token",options:[{name:"--read-only",description:"This is used to mark a token as unable to publish when configuring limited access tokens with the npm token create command"},{name:"--cidr",description:"This is a list of CIDR address to be used when configuring limited access tokens with the npm token create command",isRepeatable:!0,args:{name:"cidr"}}]},{name:"revoke",description:"Immediately removes an authentication token from the registry. You will no longer be able to use it",args:{name:"idtoken"}}],options:[i,m]},T("uninstall"),T(["r","rm"]),T("un"),T("remove"),T("unlink"),{name:"unpublish",description:"Remove a package from the registry",args:{name:"[<@scope>/]<pkg>[@<version>]"},options:[y,{name:["-f","--force"],description:"Allow unpublishing all versions of a published package. Removes various protections against unfortunate side effects, common mistakes, unnecessary performance degradation, and malicious input",isDangerous:!0},...d]},{name:"unstar",description:"Remove an item from your favorite packages",args:{name:"pkg",description:"Package to unmark as favorite"},options:[i,m,{name:"--no-unicode",description:"Do not use unicode characters in the tree output"}]},{name:["update","upgrade","up"],description:"Update a package",options:[{name:"-g",description:"Update global package"},{name:"--global-style",description:"Causes npm to install the package into your local node_modules folder with the same layout it uses with the global node_modules folder"},{name:"--legacy-bundling",description:"Causes npm to install the package such that versions of npm prior to 1.4, such as the one included with node 0.8, can install the package"},{name:"--strict-peer-deps",description:"If set to true, and --legacy-peer-deps is not set, then any conflicting peerDependencies will be treated as an install failure"},{name:"--no-package-lock",description:"Ignores package-lock.json files when installing"},I,g,{name:"--no-audit",description:"Submit audit reports alongside the current npm command to the default registry and all registries configured for scopes"},{name:"--no-bin-links",description:"Tells npm to not create symlinks (or .cmd shims on Windows) for package executables"},{name:"--no-fund",description:"Hides the message at the end of each npm install acknowledging the number of dependencies looking for funding"},{name:"--save",description:"Update the semver values of direct dependencies in your project package.json"},y,...d]},{name:"version",description:"Bump a package version",options:[...d,u,{name:"--allow-same-version",description:"Prevents throwing an error when npm version is used to set the new version to the same value as the current version"},{name:"--no-commit-hooks",description:"Do not run git commit hooks when using the npm version command"},{name:"--no-git-tag-version",description:"Do not tag the commit when using the npm version command"},{name:"--preid",description:'The "prerelease identifier" to use as a prefix for the "prerelease" part of a semver. Like the rc in 1.2.0-rc.8',args:{name:"prerelease-id"}},{name:"--sign-git-tag",description:"If set to true, then the npm version command will tag the version using -s to add a signature"}]},{name:["view","v","info","show"],description:"View registry info",options:[...d,u]},{name:"whoami",description:"Display npm username",options:[i]}]};var O={script:["bash","-c","until [[ -f rush.json ]] || [[ $PWD = '/' ]]; do cd ..; done; cat rush.json"],postProcess:function(e){let s=[];try{if(!e)return s;let o=JSON.parse(P(e.trim()));for(let l of o.projects)s.push({name:l.packageName,description:"Projects"})}catch(o){console.log("generate project suggestion fail: ",o)}return s}},C=[{name:["-t","--to"],args:{name:"PROJECT",generators:O},description:'Normally all projects in the monorepo will be processed; adding this parameter will instead select a subset of projects. Each "--to" parameter expands this selection to include PROJECT and all its dependencies. "." can be used as shorthand for the project in the current working directory. For details, refer to the website article "Selecting subsets of projects"'},{name:["-T","--to-except"],args:{name:"PROJECT",generators:O},description:'Normally all projects in the monorepo will be processed; adding this parameter will instead select a subset of projects. Each "--to-except" parameter expands this selection to include all dependencies of PROJECT, but not PROJECT itself. "." can be used as shorthand for the project in the current working directory. For details, refer to the website article "Selecting subsets of projects"'},{name:["-f","--from"],args:{name:"PROJECT",generators:O},description:'Normally all projects in the monorepo will be processed; adding this parameter will instead select a subset of projects. Each "--from" parameter expands this selection to include PROJECT and all projects that depend on it, plus all dependencies of this set.  "." can be used as shorthand for the project in the current working directory. For details, refer to the website article "Selecting subsets of projects"'},{name:["-o","--only"],args:{name:"PROJECT",generators:O},description:'Normally all projects in the monorepo will be processed; adding this parameter will instead select a subset of projects. Each "--only" parameter expands this selection to include PROJECT; its dependencies are not added. "." can be used as shorthand for the project in the current working directory. Note that this parameter is "unsafe" as it may produce a selection that excludes some dependencies. For details, refer to the website article "Selecting subsets of projects"'},{name:["-i","--impacted-by"],args:{name:"PROJECT",generators:O},description:'Normally all projects in the monorepo will be processed; adding this parameter will instead select a subset of projects. Each "--impacted-by" parameter expands this selection to include PROJECT and any projects that depend on PROJECT (and thus might be broken by changes to PROJECT). "." can be used as shorthand for the project in the current working directory. Note that this parameter is "unsafe" as it may produce a selection that excludes some dependencies. For details, refer to the website article "Selecting subsets of projects"'},{name:["-I","--impacted-by-except"],args:{name:"PROJECT",generators:O},description:'Normally all projects in the monorepo will be processed; adding this parameter will instead select a subset of projects. Each "--impacted-by-except" parameter works the same as "--impacted-by" except that PROJECT itself is not added to the selection. "." can be used as shorthand for the project in the current working directory. Note that this parameter is "unsafe" as it may produce a selection that excludes some dependencies. For details, refer to the website article "Selecting subsets of projects"'},{name:"--to-version-policy",args:{name:"VERSION_POLICY_NAME"},description:'Normally all projects in the monorepo will be processed; adding this parameter will instead select a subset of projects. The "--to-version-policy" parameter is equivalent to specifying "--to" for each of the projects belonging to VERSION_POLICY_NAME. For details, refer to the website article "Selecting subsets of projects"'},{name:"--from-version-policy",args:{name:"VERSION_POLICY_NAME"},description:'Normally all projects in the monorepo will be processed; adding this parameter will instead select a subset of projects. The "--from-version-policy" parameter is equivalent to specifying "--from" for each of the projects belonging to VERSION_POLICY_NAME.  For details, refer to the website article "Selecting subsets of projects"'}],W={name:"rush",description:"Multi-Project Build Tool",subcommands:[{name:"add",description:"Adds one or more dependencies to the package.json and runs rush update",options:[{name:["-p","--package"],description:"Specify package to the dependencies of the current project",isRequired:!0,isRepeatable:!0,args:{name:"PACKAGE",generators:v,debounce:!0}},{name:"--exact",description:"If specified, the SemVer specifier added to the package.json will be an exact version (e.g. without tilde or caret)"},{name:"--caret",description:'If specified, the SemVer specifier added to the package.json will be a prepended with a "caret" specifier ("^")'},{name:"--dev",description:'If specified, the package will be added to the "devDependencies" section of the package.json'},{name:["-m","--make-consistent"],description:"If specified, other packages with this dependency will have their package.json files updated to use the same version of the dependency"},{name:["-s","--skip-update"],description:'If specified, the "rush update" command will not be run after updating the package.json files'},{name:"--all",description:"If specified, the dependency will be added to all projects"}]},{name:"change",description:"Records changes made to projects, indicating how the package version number should be bumped for the next publish",options:[{name:["-v","--verify"],description:"Verify the change file has been generated and that it is a valid JSON file"},{name:"--no-fetch",description:'Skips fetching the baseline branch before running "git diff" to detect changes'},{name:["-b","--target-branch"],description:'If this parameter is specified, compare the checked out branch with the specified branch to determine which projects were changed. If this parameter is not specified, the checked out branch is compared against the "master" branch',args:{name:"BRANCH"}},{name:"--overwrite",description:"If a changefile already exists, overwrite without prompting (or erroring in --bulk mode)"},{name:"--email",args:{name:"EMAIL"},description:"The email address to use in changefiles. If this parameter is not provided, the email address will be detected or prompted for in interactive mode"},{name:"--bulk",description:"If this flag is specified, apply the same change message and bump type to all changed projects. The --message and the --bump-type parameters must be specified if the --bulk parameter is specified"},{name:"--message",args:{name:"MESSAGE"},description:"The message to apply to all changed projects if the --bulk flag is provided"},{name:"--bump-type",args:{name:"BUMP_TYPE",suggestions:["major","minor","patch","none"]},description:"The bump type to apply to all changed projects if the --bulk flag is provided"}]},{name:"check",description:"Checks each project's package.json files and ensures that all dependencies are of the same version throughout the repository",options:[{name:"--variant",description:"Run command using a variant installation configuration. This parameter may alternatively be specified via the RUSH_VARIANT environment variable",args:{name:"VARIANT"}},{name:"--json",description:"If this flag is specified, output will be in JSON format"}]},{name:"deploy",description:"Prepares a deployment by copying a subset of Rush projects and their dependencies to a target folder",options:[{name:["-p","--project"],args:{name:"PROJECT_NAME"},description:'Specifies the name of the main Rush project to be deployed. It must appear in the "deploymentProjectNames" setting in the deployment config file'},{name:["-s","--scenario"],args:{name:"SCENARIO_NAME"},description:'By default, the deployment configuration is specified in "common/config/rush/deploy.json". You can use "--scenario" to specify an alternate name. The name must be lowercase and separated by dashes. For example, if SCENARIO_NAME is "web", then the config file would be "common/config/rush/deploy-web.json"'},{name:"--overwrite",description:"By default, deployment will fail if the target folder is not empty. SPECIFYING THIS FLAG WILL RECURSIVELY DELETE EXISTING CONTENTS OF THE TARGET FOLDER"},{name:["-t","--target-folder"],args:{name:"PATH"},description:'By default, files are deployed to the "common/deploy" folder inside the Rush repo. Use this parameter to specify a different location. WARNING: USE CAUTION WHEN COMBINING WITH "--overwrite". This parameter may alternatively be specified via the RUSH_DEPLOY_TARGET_FOLDER environment variable'},{name:"--create-archive",args:{name:"ARCHIVE_PATH"},description:'If specified, after the deployment has been prepared, "rush deploy" will create an archive containing the contents of the target folder. The newly created archive file will be placed according to the designated path, relative to the target folder. Supported file extensions: .zip'}]},{name:"init",description:"Initializes a new repository to be managed by Rush",options:[{name:"--overwrite-existing",description:'By default "rush init" will not overwrite existing config files. Specify this switch to override that.  This can be useful when upgrading your repo to a newer release of Rush. WARNING: USE WITH CARE!'},{name:"--rush-example-repo",description:'When copying the template config files, this uncomments fragments that are used by the "rush-example" GitHub repo, which is a sample monorepo that illustrates many Rush features. This option is primarily intended for maintaining that example'}]},{name:"init-autoinstaller",description:"Initializes a new autoinstaller",options:[{name:"--name",args:{name:"AUTOINSTALLER_NAME"},description:"Specifies the name of the autoinstaller folder, which must conform to the naming rules for NPM packages"}]},{name:"init-deploy",description:'Creates a deployment scenario config file for use with "rush deploy"',options:[{name:["-p","--project"],args:{name:"PROJECT_NAME"},description:'Specifies the name of the main Rush project to be deployed in this scenario. It will be added to the "deploymentProjectNames" setting'},{name:["-s","--scenario"],args:{name:"SCENARIO"},description:'By default, the deployment configuration will be written to "common/config/rush/deploy.json". You can use "--scenario" to specify an alternate name. The name must be lowercase and separated by dashes. For example, if the name is "web", then the config file would be "common/config/rush/deploy-web.json"'}]},{name:"install",description:"Install package dependencies for all projects in the repo according to the shrinkwrap file",options:[{name:["-p","--purge"],description:'Perform "rush purge" before starting the installation'},{name:"--bypass-policy",description:'Overrides enforcement of the "gitPolicy" rules from rush.json (use honorably!)'},{name:"--no-link",description:'If "--no-link" is specified, then project symlinks will NOT be created after the installation completes. You will need to run "rush link" manually. This flag is useful for automated builds that want to report stages individually or perform extra operations in between the two stages. This flag is not supported when using workspaces'},{name:"--network-concurrency",args:{name:"COUNT"},description:"If specified, limits the maximum number of concurrent network requests. This is useful when troubleshooting network failures"},{name:"--debug-package-manager",description:"Activates verbose logging for the package manager. You will probably want to pipe the output of Rush to a file when using this command"},{name:"--max-install-attempts",args:{name:"NUMBER"},description:"Overrides the default maximum number of install attempts. The default value is 3"},{name:"--ignore-hooks",description:'Skips execution of the "eventHooks" scripts defined in rush.json. Make sure you know what you are skipping'},{name:"--variant",args:{name:"VARIANT"},description:"Run command using a variant installation configuration. This parameter may alternatively be specified via the RUSH_VARIANT environment variable"},...C,{name:"--check-only",description:"Only check the validity of the shrinkwrap file without performing an install"}]},{name:"link",description:"Create node_modules symlinks for all projects",options:[{name:["-f","--force"],description:"Deletes and recreates all links, even if the filesystem state seems to indicate that this is unnecessary"}]},{name:"list",description:"List package information for all projects in the repo",options:[{name:["-v","--version"],description:"If this flag is specified, the project version will be displayed in a column along with the package name"},{name:["-p","--path"],description:"If this flag is specified, the project path will be displayed in a column along with the package name"},{name:"--full-path",description:"If this flag is specified, the project full path will be displayed in a column along with the package name"},{name:"--detailed",description:"For the non --json view, if this flag is specified, include path (-p), version (-v) columns along with the project's applicable: versionPolicy, versionPolicyName, shouldPublish, and reviewPolicy fields"},{name:"--json",description:"If this flag is specified, output will be in JSON format"}]},{name:"publish",description:'Reads and processes package publishing change requests generated by "rush change"',options:[{name:["-a","--apply"],description:"If this flag is specified, the change requests will be applied to package.json files"},{name:["-b","--target-branch"],args:{name:"BRANCH"},description:"If this flag is specified, applied changes and deleted change requests will be committed and merged into the target branch"},{name:["-p","--publish"],description:"If this flag is specified, applied changes will be published to the NPM registry"},{name:"--add-commit-details",description:"Adds commit author and hash to the changelog.json files for each change"},{name:"--regenerate-changelogs",description:"Regenerates all changelog files based on the current JSON content"},{name:["-r","--registry"],args:{name:"REGISTRY"},description:"Publishes to a specified NPM registry. If this is specified, it will prevent the current commit will not be tagged"},{name:["-n","--npm-auth-token"],args:{name:"TOKEN"},deprecated:!0,description:"(DEPRECATED) Specifies the authentication token to use during publishing. This parameter is deprecated because command line parameters may be readable by unrelated processes on a lab machine. Instead, a safer practice is to pass the token via an environment variable and reference it from your common/config/rush/.npmrc-publish file"},{name:["-t","--tag"],args:{name:"TAG"},description:"The tag option to pass to npm publish. By default NPM will publish using the 'latest' tag, even if the package is older than the current latest, so in publishing workflows for older releases, providing a tag is important. When hotfix changes are made, this parameter defaults to 'hotfix'"},{name:"--set-access-level",args:{name:"ACCESS_LEVEL",suggestions:["public","restricted"]},description:'By default, when Rush invokes "npm publish" it will publish scoped packages with an access level of "restricted". Scoped packages can be published with an access level of "public" by specifying that value for this flag with the initial publication. NPM always publishes unscoped packages with an access level of "public". For more information, see the NPM documentation for the "--access" option of "npm publish"'},{name:"--pack",description:"Packs projects into tarballs instead of publishing to npm repository. It can only be used when --include-all is specified. If this flag is specified, NPM registry related parameters will be ignored"},{name:"--release-folder",args:{name:"FOLDER"},description:"This parameter is used with --pack parameter to provide customized location for the tarballs instead of the default value"},{name:"--include-all",description:"If this flag is specified, all packages with shouldPublish=true in rush.json or with a specified version policy will be published if their version is newer than published version"},{name:"--version-policy",args:{name:"POLICY"},description:"Version policy name. Only projects with this version policy will be published if used with --include-all"},{name:"--prerelease-name",args:{name:"NAME"},description:"Bump up to a prerelease version with the provided prerelease name. Cannot be used with --suffix"},{name:"--partial-prerelease",description:"Used with --prerelease-name. Only bump packages to a prerelease version if they have changes"},{name:"--suffix",args:{name:"SUFFIX"},description:"Append a suffix to all changed versions. Cannot be used with --prerelease-name"},{name:"--force",description:"If this flag is specified with --publish, packages will be published with --force on npm"},{name:"--apply-git-tags-on-pack",description:"If specified with --publish and --pack, git tags will be applied for packages as if a publish was being run without --pack"},{name:["-c","--commit"],args:{name:"COMMIT_ID"},description:"Used in conjunction with git tagging -- apply git tags at the commit hash specified. If not provided, the current HEAD will be tagged"},{name:"--ignore-git-hooks",description:"Skips execution of all git hooks. Make sure you know what you are skipping"}]},{name:"purge",description:"For diagnostic purposes, use this command to delete caches and other temporary files used by Rush",options:[{name:"--unsafe",description:`(UNSAFE!) Also delete shared files such as the package manager instances stored in the ".rush" folder in the user's home directory. This is a more aggressive fix that is NOT SAFE to run in a live environment because it will cause other concurrent Rush processes to fail`}]},{name:"scan",description:"When migrating projects into a Rush repo, this command is helpful for detecting undeclared dependencies",options:[{name:"--json",description:"If this flag is specified, output will be in JSON format"},{name:"--all",description:"If this flag is specified, output will list all detected dependencies"}]},{name:"setup",description:"(EXPERIMENTAL) Invoke this command before working in a new repo to ensure that any required prerequisites are installed and permissions are configured"},{name:"unlink",description:"Delete node_modules symlinks for all projects in the repo"},{name:"update",description:"Install package dependencies for all projects in the repo, and create or update the shrinkwrap file as needed",options:[{name:["-p","--purge"],description:'Perform "rush purge" before starting the installation'},{name:"--bypass-policy",description:'Overrides enforcement of the "gitPolicy" rules from rush.json (use honorably!)'},{name:"--no-link",description:'If "--no-link" is specified, then project symlinks will NOT be created after the installation completes.  You will need to run "rush link" manually. This flag is useful for automated builds that want to report stages individually or perform extra operations in between the two stages. This flag is not supported when using workspaces'},{name:"--network-concurrency",args:{name:"COUNT"},description:"If specified, limits the maximum number of concurrent network requests. This is useful when troubleshooting network failures"},{name:"--debug-package-manager",description:"Activates verbose logging for the package manager.  You will probably want to pipe the output of Rush to a file when using this command"},{name:"--max-install-attempts",args:{name:"NUMBER"},description:"Overrides the default maximum number of install attempts. The default value is 3"},{name:"--ignore-hooks",description:'Skips execution of the "eventHooks" scripts defined in rush.json. Make sure you know what you are skipping'},{name:"--variant",args:{name:"VARIANT"},description:"Run command using a variant installation configuration. This parameter may alternatively be specified via the RUSH_VARIANT environment variable"},{name:"--full",description:'Normally "rush update" tries to preserve your existing installed versions and only makes the minimum updates needed to satisfy the package.json files. This conservative approach prevents your PR from getting involved with package updates that are unrelated to your work. Use "--full" when you really want to update all dependencies to the latest SemVer-compatible version. This should be done periodically by a person or robot whose role is to deal with potential upgrade regressions'},{name:"--recheck",description:`If the shrinkwrap file appears to already satisfy the package.json files, then "rush update" will skip invoking the package manager at all. In certain situations this heuristic may be inaccurate. Use the "--recheck" flag to force the package manager to process the shrinkwrap file. This will also update your shrinkwrap file with Rush's fixups. (To minimize shrinkwrap churn, these fixups are normally performed only in the temporary folder.)`}]},{name:"update-autoinstaller",description:"Updates autoinstaller package dependenices",options:[{name:"--name",args:{name:"AUTOINSTALLER_NAME"},description:"Specifies the name of the autoinstaller, which must be one of the folders under common/autoinstallers"}]},{name:"update-cloud-credentials",description:"(EXPERIMENTAL) Update the credentials used by the build cache provider",options:[{name:["-i","--interactive"],description:"Run the credential update operation in interactive mode, if supported by the provider"},{name:"--credential",args:{name:"CREDENTIAL_STRING"},description:"A static credential, to be cached"},{name:["-d","--delete"],description:"If specified, delete stored credentials"}]},{name:"version",description:"Manage package versions in the repo",options:[{name:["-b","--target-branch"],args:{name:"BRANCH"},description:"If this flag is specified, changes will be committed and merged into the target branch"},{name:"--ensure-version-policy",description:"Updates package versions if needed to satisfy version policies"},{name:"--override-version",args:{name:"NEW_VERSION"},description:"Override the version in the specified --version-policy. This setting only works for lock-step version policy and when --ensure-version-policy is specified"},{name:"--bump",description:"Bumps package version based on version policies"},{name:"--bypass-policy",description:'Overrides "gitPolicy" enforcement (use honorably!)'},{name:"--version-policy",args:{name:"POLICY"},description:"The name of the version policy"},{name:"--override-bump",args:{name:"BUMPTYPE"},description:"Overrides the bump type in the version-policy.json for the specified version policy. Valid BUMPTYPE values include: prerelease, patch, preminor, minor, major. This setting only works for lock-step version policy in bump action"},{name:"--override-prerelease-id",args:{name:"ID"},description:'Overrides the prerelease identifier in the version value of version-policy.json for the specified version policy. This setting only works for lock-step version policy. This setting increases to new prerelease id when "--bump" is provided but only replaces the prerelease name when "--ensure-version-policy" is provided'},{name:"--ignore-git-hooks",description:"Skips execution of all git hooks. Make sure you know what you are skipping"}]},{name:"build",description:"Build all projects that haven't been built, or have changed since they were last built",options:[{name:["-p","--parallelism"],args:{name:"COUNT"},description:'Specifies the maximum number of concurrent processes to launch during a build. The COUNT should be a positive integer or else the word "max" to specify a count that is equal to the number of CPU cores. If this parameter is omitted, then the default value depends on the operating system and number of CPU cores. This parameter may alternatively be specified via the RUSH_PARALLELISM environment variable'},...C,{name:["-v","--verbose"],description:"Display the logs during the build, rather than just displaying the build status summary"},{name:["-c","--changed-projects-only"],description:'Normally the incremental build logic will rebuild changed projects as well as any projects that directly or indirectly depend on a changed project. Specify "--changed-projects-only" to ignore dependent projects, only rebuilding those projects whose files were changed. Note that this parameter is "unsafe"; it is up to the developer to ensure that the ignored projects are okay to ignore'},{name:"--ignore-hooks",description:'Skips execution of the "eventHooks" scripts defined in rush.json. Make sure you know what you are skipping'}]},{name:"rebuild",description:"Clean and rebuild the entire set of projects",options:[{name:["-p","--parallelism"],args:{name:"COUNT"},description:'Specifies the maximum number of concurrent processes to launch during a build. The COUNT should be a positive integer or else the word "max" to specify a count that is equal to the number of CPU cores. If this parameter is omitted, then the default value depends on the operating system and number of CPU cores. This parameter may alternatively be specified via the RUSH_PARALLELISM environment variable'},...C,{name:["-v","--verbose"],description:"Display the logs during the build, rather than just displaying the build status summary"},{name:"--ignore-hooks",description:'Skips execution of the "eventHooks" scripts defined in rush.json. Make sure you know what you are skipping'}]},{name:"tab-complete",description:"Provides tab completion",options:[{name:"--word",args:{name:"WORD"},description:'The word to complete. The default value is ""'},{name:"--position",args:{name:"INDEX"},description:"The position in the word to be completed. The default value is 0"}]}],options:[{name:["-h","--help"],description:"Show this help message and exit",isPersistent:!0},{name:["-d","--debug"],description:"Show the full call stack if an error occurs while executing the tool"}]},K=W;export{K as default};
